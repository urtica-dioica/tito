{"version":3,"names":["cov_11c7k7na4r","actualCoverage","s","express_1","require","leaveController_1","leaveAccrualController_1","authenticate_1","authorize_1","router","Router","leaveAccrualController","LeaveAccrualController","use","authenticate","post","authorize","leaveController","createLeaveRequest","get","listLeaveRequests","getEmployeeLeaveRequests","getEmployeeLeaveBalance","getEmployeeLeaveCalendar","getPendingRequestsForDepartmentHead","getLeaveStats","initializeEmployeeLeaveBalance","getLeaveRequest","put","approveLeaveRequest","delete","deleteLeaveRequest","createLeaveAccrual","bind","listLeaveAccruals","getLeaveAccrualStats","getLeaveAccrual","getEmployeeLeaveAccruals","getEmployeeAccrualSummary","processOvertimeToLeaveAccrual","processBulkOvertimeAccruals","recalculateEmployeeAccruals","deleteLeaveAccrual","exports","default"],"sources":["/home/kim/tito/server/src/routes/leave/leaveRoutes.ts"],"sourcesContent":["import { Router } from 'express';\nimport { leaveController } from '../../controllers/leave/leaveController';\nimport { LeaveAccrualController } from '../../controllers/leave/leaveAccrualController';\nimport { authenticate } from '../../middleware/auth/authenticate';\nimport { authorize } from '../../middleware/auth/authorize';\n\nconst router = Router();\nconst leaveAccrualController = new LeaveAccrualController();\n\n// Apply authentication to all routes\nrouter.use(authenticate);\n\n/**\n * @route POST /api/v1/leaves\n * @desc Create a leave request\n * @access Employee\n */\nrouter.post('/', authorize(['employee']), leaveController.createLeaveRequest);\n\n/**\n * @route GET /api/v1/leaves\n * @desc List leave requests\n * @access HR, Department Head\n * @query page, limit, employeeId, departmentId, leaveType, status, startDate, endDate, search, sortBy, sortOrder\n */\nrouter.get('/', authorize(['hr', 'department_head']), leaveController.listLeaveRequests);\n\n/**\n * @route GET /api/v1/leaves/employee\n * @desc Get employee's leave requests\n * @access Employee\n * @query startDate, endDate, page, limit\n */\nrouter.get('/employee', authorize(['employee']), leaveController.getEmployeeLeaveRequests);\n\n/**\n * @route GET /api/v1/leaves/balance\n * @desc Get employee's leave balance\n * @access Employee\n * @query year\n */\nrouter.get('/balance', authorize(['employee']), leaveController.getEmployeeLeaveBalance);\n\n/**\n * @route GET /api/v1/leaves/calendar/:year\n * @desc Get employee's leave calendar for a year\n * @access Employee\n */\nrouter.get('/calendar/:year', authorize(['employee']), leaveController.getEmployeeLeaveCalendar);\n\n/**\n * @route GET /api/v1/leaves/pending\n * @desc Get pending requests for department head\n * @access Department Head\n */\nrouter.get('/pending', authorize(['department_head']), leaveController.getPendingRequestsForDepartmentHead);\n\n/**\n * @route GET /api/v1/leaves/stats\n * @desc Get leave statistics\n * @access HR, Department Head\n * @query employeeId, departmentId\n */\nrouter.get('/stats', authorize(['hr', 'department_head']), leaveController.getLeaveStats);\n\n/**\n * @route POST /api/v1/leaves/initialize-balance\n * @desc Initialize leave balance for an employee\n * @access HR\n */\nrouter.post('/initialize-balance', authorize(['hr']), leaveController.initializeEmployeeLeaveBalance);\n\n/**\n * @route GET /api/v1/leaves/:id\n * @desc Get leave request by ID\n * @access Employee, HR, Department Head\n */\nrouter.get('/:id', authorize(['employee', 'hr', 'department_head']), leaveController.getLeaveRequest);\n\n/**\n * @route PUT /api/v1/leaves/:id/approve\n * @desc Approve or reject a leave request\n * @access Department Head\n */\nrouter.put('/:id/approve', authorize(['department_head']), leaveController.approveLeaveRequest);\n\n/**\n * @route DELETE /api/v1/leaves/:id\n * @desc Delete a leave request\n * @access Employee (own requests only)\n */\nrouter.delete('/:id', authorize(['employee']), leaveController.deleteLeaveRequest);\n\n// ===== LEAVE ACCRUAL ROUTES =====\n\n/**\n * @route POST /api/v1/leaves/accruals\n * @desc Create a leave accrual\n * @access HR Admin\n */\nrouter.post('/accruals', authorize(['hr']), leaveAccrualController.createLeaveAccrual.bind(leaveAccrualController));\n\n/**\n * @route GET /api/v1/leaves/accruals\n * @desc List leave accruals\n * @access HR Admin\n */\nrouter.get('/accruals', authorize(['hr']), leaveAccrualController.listLeaveAccruals.bind(leaveAccrualController));\n\n/**\n * @route GET /api/v1/leaves/accruals/stats\n * @desc Get leave accrual statistics\n * @access HR Admin\n */\nrouter.get('/accruals/stats', authorize(['hr']), leaveAccrualController.getLeaveAccrualStats.bind(leaveAccrualController));\n\n/**\n * @route GET /api/v1/leaves/accruals/:id\n * @desc Get leave accrual by ID\n * @access HR Admin, Employee (own accruals)\n */\nrouter.get('/accruals/:id', authorize(['hr', 'employee']), leaveAccrualController.getLeaveAccrual.bind(leaveAccrualController));\n\n/**\n * @route GET /api/v1/leaves/accruals/employee/:employeeId\n * @desc Get employee's leave accruals\n * @access HR Admin, Employee (own accruals)\n */\nrouter.get('/accruals/employee/:employeeId', authorize(['hr', 'employee']), leaveAccrualController.getEmployeeLeaveAccruals.bind(leaveAccrualController));\n\n/**\n * @route GET /api/v1/leaves/accruals/employee/:employeeId/summary\n * @desc Get employee's accrual summary\n * @access HR Admin, Employee (own summary)\n */\nrouter.get('/accruals/employee/:employeeId/summary', authorize(['hr', 'employee']), leaveAccrualController.getEmployeeAccrualSummary.bind(leaveAccrualController));\n\n/**\n * @route POST /api/v1/leaves/accruals/process-overtime\n * @desc Process overtime to leave accrual\n * @access HR Admin\n */\nrouter.post('/accruals/process-overtime', authorize(['hr']), leaveAccrualController.processOvertimeToLeaveAccrual.bind(leaveAccrualController));\n\n/**\n * @route POST /api/v1/leaves/accruals/process-bulk\n * @desc Process bulk overtime accruals\n * @access HR Admin\n */\nrouter.post('/accruals/process-bulk', authorize(['hr']), leaveAccrualController.processBulkOvertimeAccruals.bind(leaveAccrualController));\n\n/**\n * @route POST /api/v1/leaves/accruals/employee/:employeeId/recalculate\n * @desc Recalculate employee accruals\n * @access HR Admin\n */\nrouter.post('/accruals/employee/:employeeId/recalculate', authorize(['hr']), leaveAccrualController.recalculateEmployeeAccruals.bind(leaveAccrualController));\n\n/**\n * @route DELETE /api/v1/leaves/accruals/:id\n * @desc Delete a leave accrual\n * @access HR Admin\n */\nrouter.delete('/accruals/:id', authorize(['hr']), leaveAccrualController.deleteLeaveAccrual.bind(leaveAccrualController));\n\nexport default router;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAgBG;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAAAA,cAAA,GAAAE,CAAA;;;;AAhBH,MAAAC,SAAA;AAAA;AAAA,CAAAH,cAAA,GAAAE,CAAA,OAAAE,OAAA;AACA,MAAAC,iBAAA;AAAA;AAAA,CAAAL,cAAA,GAAAE,CAAA,OAAAE,OAAA;AACA,MAAAE,wBAAA;AAAA;AAAA,CAAAN,cAAA,GAAAE,CAAA,OAAAE,OAAA;AACA,MAAAG,cAAA;AAAA;AAAA,CAAAP,cAAA,GAAAE,CAAA,OAAAE,OAAA;AACA,MAAAI,WAAA;AAAA;AAAA,CAAAR,cAAA,GAAAE,CAAA,OAAAE,OAAA;AAEA,MAAMK,MAAM;AAAA;AAAA,CAAAT,cAAA,GAAAE,CAAA,OAAG,IAAAC,SAAA,CAAAO,MAAM,GAAE;AACvB,MAAMC,sBAAsB;AAAA;AAAA,CAAAX,cAAA,GAAAE,CAAA,OAAG,IAAII,wBAAA,CAAAM,sBAAsB,EAAE;AAE3D;AAAA;AAAAZ,cAAA,GAAAE,CAAA;AACAO,MAAM,CAACI,GAAG,CAACN,cAAA,CAAAO,YAAY,CAAC;AAExB;;;;;AAAA;AAAAd,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACM,IAAI,CAAC,GAAG,EAAE,IAAAP,WAAA,CAAAQ,SAAS,EAAC,CAAC,UAAU,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACC,kBAAkB,CAAC;AAE7E;;;;;;AAAA;AAAAlB,cAAA,GAAAE,CAAA;AAMAO,MAAM,CAACU,GAAG,CAAC,GAAG,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACG,iBAAiB,CAAC;AAExF;;;;;;AAAA;AAAApB,cAAA,GAAAE,CAAA;AAMAO,MAAM,CAACU,GAAG,CAAC,WAAW,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,UAAU,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACI,wBAAwB,CAAC;AAE1F;;;;;;AAAA;AAAArB,cAAA,GAAAE,CAAA;AAMAO,MAAM,CAACU,GAAG,CAAC,UAAU,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,UAAU,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACK,uBAAuB,CAAC;AAExF;;;;;AAAA;AAAAtB,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,iBAAiB,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,UAAU,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACM,wBAAwB,CAAC;AAEhG;;;;;AAAA;AAAAvB,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,UAAU,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,iBAAiB,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACO,mCAAmC,CAAC;AAE3G;;;;;;AAAA;AAAAxB,cAAA,GAAAE,CAAA;AAMAO,MAAM,CAACU,GAAG,CAAC,QAAQ,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,EAAE,iBAAiB,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACQ,aAAa,CAAC;AAEzF;;;;;AAAA;AAAAzB,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACM,IAAI,CAAC,qBAAqB,EAAE,IAAAP,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACS,8BAA8B,CAAC;AAErG;;;;;AAAA;AAAA1B,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,MAAM,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,UAAU,EAAE,IAAI,EAAE,iBAAiB,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACU,eAAe,CAAC;AAErG;;;;;AAAA;AAAA3B,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACmB,GAAG,CAAC,cAAc,EAAE,IAAApB,WAAA,CAAAQ,SAAS,EAAC,CAAC,iBAAiB,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACY,mBAAmB,CAAC;AAE/F;;;;;AAAA;AAAA7B,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACqB,MAAM,CAAC,MAAM,EAAE,IAAAtB,WAAA,CAAAQ,SAAS,EAAC,CAAC,UAAU,CAAC,CAAC,EAAEX,iBAAA,CAAAY,eAAe,CAACc,kBAAkB,CAAC;AAElF;AAEA;;;;;AAAA;AAAA/B,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACM,IAAI,CAAC,WAAW,EAAE,IAAAP,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEL,sBAAsB,CAACqB,kBAAkB,CAACC,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAEnH;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,WAAW,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEL,sBAAsB,CAACuB,iBAAiB,CAACD,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAEjH;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,iBAAiB,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEL,sBAAsB,CAACwB,oBAAoB,CAACF,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAE1H;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,eAAe,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,EAAEL,sBAAsB,CAACyB,eAAe,CAACH,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAE/H;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,gCAAgC,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,EAAEL,sBAAsB,CAAC0B,wBAAwB,CAACJ,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAEzJ;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACU,GAAG,CAAC,wCAAwC,EAAE,IAAAX,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,EAAEL,sBAAsB,CAAC2B,yBAAyB,CAACL,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAElK;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACM,IAAI,CAAC,4BAA4B,EAAE,IAAAP,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEL,sBAAsB,CAAC4B,6BAA6B,CAACN,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAE/I;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACM,IAAI,CAAC,wBAAwB,EAAE,IAAAP,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEL,sBAAsB,CAAC6B,2BAA2B,CAACP,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAEzI;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACM,IAAI,CAAC,4CAA4C,EAAE,IAAAP,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEL,sBAAsB,CAAC8B,2BAA2B,CAACR,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAE7J;;;;;AAAA;AAAAX,cAAA,GAAAE,CAAA;AAKAO,MAAM,CAACqB,MAAM,CAAC,eAAe,EAAE,IAAAtB,WAAA,CAAAQ,SAAS,EAAC,CAAC,IAAI,CAAC,CAAC,EAAEL,sBAAsB,CAAC+B,kBAAkB,CAACT,IAAI,CAACtB,sBAAsB,CAAC,CAAC;AAAC;AAAAX,cAAA,GAAAE,CAAA;AAE1HyC,OAAA,CAAAC,OAAA,GAAenC,MAAM","ignoreList":[]}