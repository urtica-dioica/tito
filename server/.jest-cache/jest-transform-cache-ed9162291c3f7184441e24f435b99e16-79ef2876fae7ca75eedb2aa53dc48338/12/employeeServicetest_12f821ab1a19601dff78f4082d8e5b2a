41d527e4b837e67dfba8f0386cd8a38b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock the dependencies
jest.mock('../../../src/config/database');
const employeeService_1 = require("../../../src/services/employee/employeeService");
const database_1 = require("../../../src/config/database");
const mockGetPool = database_1.getPool;
describe('EmployeeService', () => {
    let employeeService;
    let mockPool;
    beforeEach(() => {
        employeeService = new employeeService_1.EmployeeService();
        jest.clearAllMocks();
        // Mock database pool
        mockPool = {
            query: jest.fn()
        };
        mockGetPool.mockReturnValue(mockPool);
    });
    describe('getEmployeeIdByUserId', () => {
        it('should return employee ID for valid user ID', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({
                rows: [{ employee_id: 'emp-123' }]
            });
            // Act
            const result = await employeeService.getEmployeeIdByUserId('user-123');
            // Assert
            expect(result).toBe('emp-123');
            expect(mockPool.query).toHaveBeenCalledWith('SELECT employee_id FROM employees WHERE user_id = $1', ['user-123']);
        });
        it('should return null if employee not found', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act
            const result = await employeeService.getEmployeeIdByUserId('user-123');
            // Assert
            expect(result).toBeNull();
        });
    });
    describe('getDashboard', () => {
        const mockEmployeeInfo = {
            id: 'emp-123',
            name: 'John Doe',
            employee_id: 'EMP001',
            department: 'Engineering',
            position: 'Software Developer',
            hire_date: '2023-01-01',
            profile_picture: 'profile.jpg'
        };
        const mockTodayAttendance = {
            today_status: 'present',
            clock_in_time: '08:30:00',
            clock_out_time: '17:30:00',
            total_hours: 8.5,
            morning_clock_in: '08:30:00',
            morning_clock_out: '12:00:00',
            afternoon_clock_in: '13:00:00',
            afternoon_clock_out: '17:30:00',
            break_start: '12:00:00',
            break_end: '13:00:00'
        };
        const mockMonthlyStats = {
            monthly_present: 20,
            monthly_absent: 2,
            monthly_late: 3
        };
        const mockLeaveBalance = {
            vacation: 10,
            sick: 8,
            maternity: 0,
            other: 2
        };
        const mockRecentActivity = [
            {
                id: 'act-123',
                type: 'clock_in',
                description: 'Clocked in at 08:30',
                timestamp: '2024-01-15T08:30:00Z',
                status: 'success'
            }
        ];
        it('should return employee dashboard successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: [mockEmployeeInfo] }) // getEmployeeInfo
                .mockResolvedValueOnce({ rows: [mockTodayAttendance] }) // getTodayAttendanceStatus
                .mockResolvedValueOnce({ rows: [mockMonthlyStats] }) // getMonthlyAttendanceStats
                .mockResolvedValueOnce({ rows: [mockLeaveBalance] }) // getLeaveBalance
                .mockResolvedValueOnce({ rows: mockRecentActivity }) // getRecentActivity
                .mockResolvedValueOnce({ rows: [{ count: '3' }] }) // getPendingRequestsCount
                .mockResolvedValueOnce({ rows: [] }); // getUpcomingEvents
            // Act
            const result = await employeeService.getDashboard('emp-123');
            // Assert
            expect(result).toEqual({
                employee: {
                    id: 'emp-123',
                    name: 'John Doe',
                    employeeId: 'EMP001',
                    department: 'Engineering',
                    position: 'Software Developer',
                    hireDate: '2023-01-01',
                    profilePicture: 'profile.jpg'
                },
                attendance: {
                    todayStatus: 'present',
                    clockInTime: '08:30:00',
                    clockOutTime: '17:30:00',
                    totalHours: 8.5,
                    morningClockIn: '08:30:00',
                    morningClockOut: '12:00:00',
                    afternoonClockIn: '13:00:00',
                    afternoonClockOut: '17:30:00',
                    breakStart: '12:00:00',
                    breakEnd: '13:00:00',
                    monthlyPresent: 20,
                    monthlyAbsent: 2,
                    monthlyLate: 3
                },
                leaveBalance: {
                    vacation: 10,
                    sick: 8,
                    maternity: 0,
                    other: 2
                },
                recentActivity: [
                    {
                        id: 'act-123',
                        type: 'clock_in',
                        description: 'Clocked in at 08:30',
                        timestamp: '2024-01-15T08:30:00Z',
                        status: 'success'
                    }
                ],
                pendingRequests: 3,
                upcomingEvents: []
            });
        });
        it('should handle missing employee info gracefully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: [] }) // getEmployeeInfo
                .mockResolvedValueOnce({ rows: [] }) // getTodayAttendanceStatus
                .mockResolvedValueOnce({ rows: [] }) // getMonthlyAttendanceStats
                .mockResolvedValueOnce({ rows: [] }) // getLeaveBalance
                .mockResolvedValueOnce({ rows: [] }) // getRecentActivity
                .mockResolvedValueOnce({ rows: [{ count: '0' }] }) // getPendingRequestsCount
                .mockResolvedValueOnce({ rows: [] }); // getUpcomingEvents
            // Act
            const result = await employeeService.getDashboard('emp-123');
            // Assert
            expect(result.employee).toEqual({
                id: '',
                name: '',
                employeeId: '',
                department: '',
                position: '',
                hireDate: '',
                profilePicture: undefined
            });
        });
    });
    describe('getEmployeeProfile', () => {
        const mockProfile = {
            id: 'emp-123',
            employee_id: 'EMP001',
            user_id: 'user-123',
            position: 'Software Developer',
            department_id: 'dept-123',
            department_name: 'Engineering',
            employment_type: 'regular',
            hire_date: '2023-01-01',
            base_salary: 50000,
            status: 'active',
            first_name: 'John',
            last_name: 'Doe',
            email: 'john.doe@company.com',
            phone: '+1234567890',
            address: '123 Main St',
            emergency_contact: 'Jane Doe',
            emergency_phone: '+0987654321'
        };
        it('should return employee profile successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [mockProfile] });
            // Act
            const result = await employeeService.getEmployeeProfile('emp-123');
            // Assert
            expect(result).toEqual({
                id: 'emp-123',
                employeeId: 'EMP001',
                userId: 'user-123',
                position: 'Software Developer',
                departmentId: 'dept-123',
                departmentName: 'Engineering',
                employmentType: 'regular',
                hireDate: '2023-01-01',
                baseSalary: 50000,
                status: 'active',
                personalInfo: {
                    firstName: 'John',
                    lastName: 'Doe',
                    email: 'john.doe@company.com',
                    phone: '+1234567890',
                    address: '123 Main St'
                },
                emergencyContact: {
                    name: 'Jane Doe',
                    phone: '+0987654321'
                }
            });
        });
        it('should throw error if employee not found', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act & Assert
            await expect(employeeService.getEmployeeProfile('emp-123'))
                .rejects.toThrow('Employee not found');
        });
    });
    describe('updateEmployeeProfile', () => {
        const updateData = {
            phone: '+1234567890',
            address: '123 Main St',
            emergencyContactName: 'Jane Doe',
            emergencyContactPhone: '+0987654321'
        };
        it('should update employee profile successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: [{ id: 'emp-123' }] }) // check employee exists
                .mockResolvedValueOnce({ rows: [] }); // update profile
            // Act
            await employeeService.updateEmployeeProfile('emp-123', updateData);
            // Assert
            expect(mockPool.query).toHaveBeenCalledTimes(2);
            expect(mockPool.query).toHaveBeenNthCalledWith(2, expect.stringContaining('UPDATE employees SET'), expect.arrayContaining(['+1234567890', '123 Main St', 'Jane Doe', '+0987654321', 'emp-123']));
        });
        it('should throw error if employee not found', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act & Assert
            await expect(employeeService.updateEmployeeProfile('emp-123', updateData))
                .rejects.toThrow('Employee not found');
        });
    });
    describe('getAttendanceHistory', () => {
        const mockAttendanceHistory = [
            {
                id: 'att-123',
                date: '2024-01-15',
                clock_in_time: '08:30:00',
                clock_out_time: '17:30:00',
                total_hours: 8.5,
                status: 'present',
                morning_clock_in: '08:30:00',
                morning_clock_out: '12:00:00',
                afternoon_clock_in: '13:00:00',
                afternoon_clock_out: '17:30:00'
            }
        ];
        it('should return attendance history successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: mockAttendanceHistory });
            // Act
            const result = await employeeService.getAttendanceHistory('emp-123', '2024-01');
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0]).toEqual({
                id: 'att-123',
                date: '2024-01-15',
                clockInTime: '08:30:00',
                clockOutTime: '17:30:00',
                totalHours: 8.5,
                status: 'present',
                morningClockIn: '08:30:00',
                morningClockOut: '12:00:00',
                afternoonClockIn: '13:00:00',
                afternoonClockOut: '17:30:00'
            });
        });
        it('should use current month if month not provided', async () => {
            // Arrange
            const currentMonth = new Date().toISOString().slice(0, 7); // YYYY-MM format
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act
            await employeeService.getAttendanceHistory('emp-123');
            // Assert
            expect(mockPool.query).toHaveBeenCalledWith(expect.stringContaining('WHERE employee_id = $1 AND DATE_TRUNC'), ['emp-123', currentMonth]);
        });
    });
    describe('getAttendanceSummary', () => {
        const mockSummary = {
            total_days: 22,
            present_days: 20,
            absent_days: 1,
            late_days: 1,
            total_hours: 160,
            average_hours_per_day: 8.0,
            attendance_rate: 90.9
        };
        it('should return attendance summary successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [mockSummary] });
            // Act
            const result = await employeeService.getAttendanceSummary('emp-123', '2024-01');
            // Assert
            expect(result).toEqual({
                totalDays: 22,
                presentDays: 20,
                absentDays: 1,
                lateDays: 1,
                totalHours: 160,
                averageHoursPerDay: 8.0,
                attendanceRate: 90.9
            });
        });
    });
    describe('getEmployeeRequests', () => {
        const mockRequests = [
            {
                id: 'req-123',
                type: 'time_correction',
                status: 'pending',
                date: '2024-01-15',
                reason: 'Forgot to clock out',
                created_at: '2024-01-15T10:00:00Z'
            }
        ];
        it('should return employee requests successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: mockRequests }) // get requests
                .mockResolvedValueOnce({ rows: [{ count: '5' }] }); // get total count
            // Act
            const result = await employeeService.getEmployeeRequests('emp-123', {
                type: 'time_correction',
                status: 'pending',
                limit: 10,
                offset: 0
            });
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0]).toEqual({
                id: 'req-123',
                type: 'time_correction',
                status: 'pending',
                date: '2024-01-15',
                reason: 'Forgot to clock out',
                createdAt: '2024-01-15T10:00:00Z'
            });
        });
    });
    describe('getRequestStats', () => {
        const mockStats = {
            total_requests: 10,
            pending_requests: 3,
            approved_requests: 6,
            rejected_requests: 1,
            time_corrections: 5,
            overtime_requests: 3,
            leave_requests: 2
        };
        it('should return request stats successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [mockStats] });
            // Act
            const result = await employeeService.getRequestStats('emp-123');
            // Assert
            expect(result).toEqual({
                totalRequests: 10,
                pendingRequests: 3,
                approvedRequests: 6,
                rejectedRequests: 1,
                timeCorrections: 5,
                overtimeRequests: 3,
                leaveRequests: 2
            });
        });
    });
    describe('getLatestPaystub', () => {
        const mockPaystub = {
            id: 'paystub-123',
            payroll_period_id: 'period-123',
            period_name: 'January 2024',
            employee_id: 'emp-123',
            employee_name: 'John Doe',
            base_salary: 5000,
            total_hours: 160,
            gross_pay: 5000,
            total_deductions: 1000,
            total_benefits: 500,
            net_pay: 4500,
            status: 'processed',
            created_at: '2024-01-31T10:00:00Z'
        };
        it('should return latest paystub successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [mockPaystub] });
            // Act
            const result = await employeeService.getLatestPaystub('emp-123');
            // Assert
            expect(result).toEqual({
                id: 'paystub-123',
                payrollPeriodId: 'period-123',
                periodName: 'January 2024',
                employeeId: 'emp-123',
                employeeName: 'John Doe',
                baseSalary: 5000,
                totalHours: 160,
                grossPay: 5000,
                totalDeductions: 1000,
                totalBenefits: 500,
                netPay: 4500,
                status: 'processed',
                createdAt: '2024-01-31T10:00:00Z'
            });
        });
        it('should return null if no paystub found', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act
            const result = await employeeService.getLatestPaystub('emp-123');
            // Assert
            expect(result).toBeNull();
        });
    });
    describe('getEmployeePaystubs', () => {
        const mockPaystubs = [
            {
                id: 'paystub-123',
                payroll_period_id: 'period-123',
                period_name: 'January 2024',
                employee_id: 'emp-123',
                employee_name: 'John Doe',
                base_salary: 5000,
                total_hours: 160,
                gross_pay: 5000,
                total_deductions: 1000,
                total_benefits: 500,
                net_pay: 4500,
                status: 'processed',
                created_at: '2024-01-31T10:00:00Z'
            }
        ];
        it('should return employee paystubs successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: mockPaystubs }) // get paystubs
                .mockResolvedValueOnce({ rows: [{ count: '12' }] }); // get total count
            // Act
            const result = await employeeService.getEmployeePaystubs('emp-123', {
                page: 1,
                limit: 10,
                year: 2024
            });
            // Assert
            expect(result).toHaveLength(1);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUva2ltL3RpdG8vc2VydmVyL3Rlc3RzL3VuaXQvc2VydmljZXMvZW1wbG95ZWVTZXJ2aWNlLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFHQSx3QkFBd0I7QUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBSjFDLG9GQUFpRjtBQUNqRiwyREFBdUQ7QUFLdkQsTUFBTSxXQUFXLEdBQUcsa0JBQThDLENBQUM7QUFFbkUsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLGVBQWdDLENBQUM7SUFDckMsSUFBSSxRQUFhLENBQUM7SUFFbEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLGVBQWUsR0FBRyxJQUFJLGlDQUFlLEVBQUUsQ0FBQztRQUN4QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFFckIscUJBQXFCO1FBQ3JCLFFBQVEsR0FBRztZQUNULEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1NBQ2pCLENBQUM7UUFDRixXQUFXLENBQUMsZUFBZSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3hDLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtRQUNyQyxFQUFFLENBQUMsNkNBQTZDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDM0QsVUFBVTtZQUNWLFFBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUM7Z0JBQy9CLElBQUksRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxDQUFDO2FBQ25DLENBQUMsQ0FBQztZQUVILE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxNQUFNLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxVQUFVLENBQUMsQ0FBQztZQUV2RSxTQUFTO1lBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUMvQixNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLG9CQUFvQixDQUN6QyxzREFBc0QsRUFDdEQsQ0FBQyxVQUFVLENBQUMsQ0FDYixDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsMENBQTBDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDeEQsVUFBVTtZQUNWLFFBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUUvQyxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsTUFBTSxlQUFlLENBQUMscUJBQXFCLENBQUMsVUFBVSxDQUFDLENBQUM7WUFFdkUsU0FBUztZQUNULE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUM1QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGNBQWMsRUFBRSxHQUFHLEVBQUU7UUFDNUIsTUFBTSxnQkFBZ0IsR0FBRztZQUN2QixFQUFFLEVBQUUsU0FBUztZQUNiLElBQUksRUFBRSxVQUFVO1lBQ2hCLFdBQVcsRUFBRSxRQUFRO1lBQ3JCLFVBQVUsRUFBRSxhQUFhO1lBQ3ZCLFFBQVEsRUFBRSxvQkFBb0I7WUFDaEMsU0FBUyxFQUFFLFlBQVk7WUFDdkIsZUFBZSxFQUFFLGFBQWE7U0FDL0IsQ0FBQztRQUVGLE1BQU0sbUJBQW1CLEdBQUc7WUFDMUIsWUFBWSxFQUFFLFNBQVM7WUFDdkIsYUFBYSxFQUFFLFVBQVU7WUFDekIsY0FBYyxFQUFFLFVBQVU7WUFDMUIsV0FBVyxFQUFFLEdBQUc7WUFDaEIsZ0JBQWdCLEVBQUUsVUFBVTtZQUM1QixpQkFBaUIsRUFBRSxVQUFVO1lBQzdCLGtCQUFrQixFQUFFLFVBQVU7WUFDOUIsbUJBQW1CLEVBQUUsVUFBVTtZQUMvQixXQUFXLEVBQUUsVUFBVTtZQUN2QixTQUFTLEVBQUUsVUFBVTtTQUN0QixDQUFDO1FBRUYsTUFBTSxnQkFBZ0IsR0FBRztZQUN2QixlQUFlLEVBQUUsRUFBRTtZQUNuQixjQUFjLEVBQUUsQ0FBQztZQUNqQixZQUFZLEVBQUUsQ0FBQztTQUNoQixDQUFDO1FBRUYsTUFBTSxnQkFBZ0IsR0FBRztZQUN2QixRQUFRLEVBQUUsRUFBRTtZQUNaLElBQUksRUFBRSxDQUFDO1lBQ1AsU0FBUyxFQUFFLENBQUM7WUFDWixLQUFLLEVBQUUsQ0FBQztTQUNULENBQUM7UUFFRixNQUFNLGtCQUFrQixHQUFHO1lBQ3pCO2dCQUNFLEVBQUUsRUFBRSxTQUFTO2dCQUNiLElBQUksRUFBRSxVQUFVO2dCQUNoQixXQUFXLEVBQUUscUJBQXFCO2dCQUNsQyxTQUFTLEVBQUUsc0JBQXNCO2dCQUNqQyxNQUFNLEVBQUUsU0FBUzthQUNsQjtTQUNGLENBQUM7UUFFRixFQUFFLENBQUMsK0NBQStDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDN0QsVUFBVTtZQUNWLFFBQVEsQ0FBQyxLQUFLO2lCQUNYLHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLENBQUMsa0JBQWtCO2lCQUN0RSxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLG1CQUFtQixDQUFDLEVBQUUsQ0FBQyxDQUFDLDJCQUEyQjtpQkFDbEYscUJBQXFCLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFLENBQUMsQ0FBQyw0QkFBNEI7aUJBQ2hGLHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsZ0JBQWdCLENBQUMsRUFBRSxDQUFDLENBQUMsa0JBQWtCO2lCQUN0RSxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxrQkFBa0IsRUFBRSxDQUFDLENBQUMsb0JBQW9CO2lCQUN4RSxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLDBCQUEwQjtpQkFDNUUscUJBQXFCLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLG9CQUFvQjtZQUU1RCxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsTUFBTSxlQUFlLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRTdELFNBQVM7WUFDVCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDO2dCQUNyQixRQUFRLEVBQUU7b0JBQ1IsRUFBRSxFQUFFLFNBQVM7b0JBQ2IsSUFBSSxFQUFFLFVBQVU7b0JBQ2hCLFVBQVUsRUFBRSxRQUFRO29CQUNwQixVQUFVLEVBQUUsYUFBYTtvQkFDekIsUUFBUSxFQUFFLG9CQUFvQjtvQkFDOUIsUUFBUSxFQUFFLFlBQVk7b0JBQ3RCLGNBQWMsRUFBRSxhQUFhO2lCQUM5QjtnQkFDRCxVQUFVLEVBQUU7b0JBQ1YsV0FBVyxFQUFFLFNBQVM7b0JBQ3RCLFdBQVcsRUFBRSxVQUFVO29CQUN2QixZQUFZLEVBQUUsVUFBVTtvQkFDeEIsVUFBVSxFQUFFLEdBQUc7b0JBQ2YsY0FBYyxFQUFFLFVBQVU7b0JBQzFCLGVBQWUsRUFBRSxVQUFVO29CQUMzQixnQkFBZ0IsRUFBRSxVQUFVO29CQUM1QixpQkFBaUIsRUFBRSxVQUFVO29CQUM3QixVQUFVLEVBQUUsVUFBVTtvQkFDdEIsUUFBUSxFQUFFLFVBQVU7b0JBQ3BCLGNBQWMsRUFBRSxFQUFFO29CQUNsQixhQUFhLEVBQUUsQ0FBQztvQkFDaEIsV0FBVyxFQUFFLENBQUM7aUJBQ2Y7Z0JBQ0QsWUFBWSxFQUFFO29CQUNaLFFBQVEsRUFBRSxFQUFFO29CQUNaLElBQUksRUFBRSxDQUFDO29CQUNQLFNBQVMsRUFBRSxDQUFDO29CQUNaLEtBQUssRUFBRSxDQUFDO2lCQUNUO2dCQUNELGNBQWMsRUFBRTtvQkFDZDt3QkFDRSxFQUFFLEVBQUUsU0FBUzt3QkFDYixJQUFJLEVBQUUsVUFBVTt3QkFDaEIsV0FBVyxFQUFFLHFCQUFxQjt3QkFDbEMsU0FBUyxFQUFFLHNCQUFzQjt3QkFDakMsTUFBTSxFQUFFLFNBQVM7cUJBQ2xCO2lCQUNGO2dCQUNELGVBQWUsRUFBRSxDQUFDO2dCQUNsQixjQUFjLEVBQUUsRUFBRTthQUNuQixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnREFBZ0QsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5RCxVQUFVO1lBQ1YsUUFBUSxDQUFDLEtBQUs7aUJBQ1gscUJBQXFCLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxrQkFBa0I7aUJBQ3RELHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsMkJBQTJCO2lCQUMvRCxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDLDRCQUE0QjtpQkFDaEUscUJBQXFCLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxrQkFBa0I7aUJBQ3RELHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsb0JBQW9CO2lCQUN4RCxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLDBCQUEwQjtpQkFDNUUscUJBQXFCLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLG9CQUFvQjtZQUU1RCxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsTUFBTSxlQUFlLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRTdELFNBQVM7WUFDVCxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQztnQkFDOUIsRUFBRSxFQUFFLEVBQUU7Z0JBQ04sSUFBSSxFQUFFLEVBQUU7Z0JBQ1IsVUFBVSxFQUFFLEVBQUU7Z0JBQ2QsVUFBVSxFQUFFLEVBQUU7Z0JBQ2QsUUFBUSxFQUFFLEVBQUU7Z0JBQ1osUUFBUSxFQUFFLEVBQUU7Z0JBQ1osY0FBYyxFQUFFLFNBQVM7YUFDMUIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxvQkFBb0IsRUFBRSxHQUFHLEVBQUU7UUFDbEMsTUFBTSxXQUFXLEdBQUc7WUFDbEIsRUFBRSxFQUFFLFNBQVM7WUFDYixXQUFXLEVBQUUsUUFBUTtZQUNyQixPQUFPLEVBQUUsVUFBVTtZQUNuQixRQUFRLEVBQUUsb0JBQW9CO1lBQzlCLGFBQWEsRUFBRSxVQUFVO1lBQ3pCLGVBQWUsRUFBRSxhQUFhO1lBQzlCLGVBQWUsRUFBRSxTQUFTO1lBQzFCLFNBQVMsRUFBRSxZQUFZO1lBQ3ZCLFdBQVcsRUFBRSxLQUFLO1lBQ2xCLE1BQU0sRUFBRSxRQUFRO1lBQ2hCLFVBQVUsRUFBRSxNQUFNO1lBQ2xCLFNBQVMsRUFBRSxLQUFLO1lBQ2hCLEtBQUssRUFBRSxzQkFBc0I7WUFDN0IsS0FBSyxFQUFFLGFBQWE7WUFDcEIsT0FBTyxFQUFFLGFBQWE7WUFDdEIsaUJBQWlCLEVBQUUsVUFBVTtZQUM3QixlQUFlLEVBQUUsYUFBYTtTQUMvQixDQUFDO1FBRUYsRUFBRSxDQUFDLDZDQUE2QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzNELFVBQVU7WUFDVixRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTFELE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxNQUFNLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVuRSxTQUFTO1lBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQztnQkFDckIsRUFBRSxFQUFFLFNBQVM7Z0JBQ2IsVUFBVSxFQUFFLFFBQVE7Z0JBQ3BCLE1BQU0sRUFBRSxVQUFVO2dCQUNsQixRQUFRLEVBQUUsb0JBQW9CO2dCQUM5QixZQUFZLEVBQUUsVUFBVTtnQkFDeEIsY0FBYyxFQUFFLGFBQWE7Z0JBQzdCLGNBQWMsRUFBRSxTQUFTO2dCQUN6QixRQUFRLEVBQUUsWUFBWTtnQkFDdEIsVUFBVSxFQUFFLEtBQUs7Z0JBQ2pCLE1BQU0sRUFBRSxRQUFRO2dCQUNoQixZQUFZLEVBQUU7b0JBQ1osU0FBUyxFQUFFLE1BQU07b0JBQ2pCLFFBQVEsRUFBRSxLQUFLO29CQUNmLEtBQUssRUFBRSxzQkFBc0I7b0JBQzdCLEtBQUssRUFBRSxhQUFhO29CQUNwQixPQUFPLEVBQUUsYUFBYTtpQkFDdkI7Z0JBQ0QsZ0JBQWdCLEVBQUU7b0JBQ2hCLElBQUksRUFBRSxVQUFVO29CQUNoQixLQUFLLEVBQUUsYUFBYTtpQkFDckI7YUFDRixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywwQ0FBMEMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN4RCxVQUFVO1lBQ1YsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRS9DLGVBQWU7WUFDZixNQUFNLE1BQU0sQ0FBQyxlQUFlLENBQUMsa0JBQWtCLENBQUMsU0FBUyxDQUFDLENBQUM7aUJBQ3hELE9BQU8sQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHVCQUF1QixFQUFFLEdBQUcsRUFBRTtRQUNyQyxNQUFNLFVBQVUsR0FBRztZQUNqQixLQUFLLEVBQUUsYUFBYTtZQUNwQixPQUFPLEVBQUUsYUFBYTtZQUN0QixvQkFBb0IsRUFBRSxVQUFVO1lBQ2hDLHFCQUFxQixFQUFFLGFBQWE7U0FDckMsQ0FBQztRQUVGLEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMzRCxVQUFVO1lBQ1YsUUFBUSxDQUFDLEtBQUs7aUJBQ1gscUJBQXFCLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxTQUFTLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyx3QkFBd0I7aUJBQzdFLHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxpQkFBaUI7WUFFekQsTUFBTTtZQUNOLE1BQU0sZUFBZSxDQUFDLHFCQUFxQixDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUVuRSxTQUFTO1lBQ1QsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLHVCQUF1QixDQUFDLENBQUMsRUFDOUMsTUFBTSxDQUFDLGdCQUFnQixDQUFDLHNCQUFzQixDQUFDLEVBQy9DLE1BQU0sQ0FBQyxlQUFlLENBQUMsQ0FBQyxhQUFhLEVBQUUsYUFBYSxFQUFFLFVBQVUsRUFBRSxhQUFhLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FDN0YsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3hELFVBQVU7WUFDVixRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFFL0MsZUFBZTtZQUNmLE1BQU0sTUFBTSxDQUFDLGVBQWUsQ0FBQyxxQkFBcUIsQ0FBQyxTQUFTLEVBQUUsVUFBVSxDQUFDLENBQUM7aUJBQ3ZFLE9BQU8sQ0FBQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUMzQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtRQUNwQyxNQUFNLHFCQUFxQixHQUFHO1lBQzVCO2dCQUNFLEVBQUUsRUFBRSxTQUFTO2dCQUNiLElBQUksRUFBRSxZQUFZO2dCQUNsQixhQUFhLEVBQUUsVUFBVTtnQkFDekIsY0FBYyxFQUFFLFVBQVU7Z0JBQzFCLFdBQVcsRUFBRSxHQUFHO2dCQUNoQixNQUFNLEVBQUUsU0FBUztnQkFDakIsZ0JBQWdCLEVBQUUsVUFBVTtnQkFDNUIsaUJBQWlCLEVBQUUsVUFBVTtnQkFDN0Isa0JBQWtCLEVBQUUsVUFBVTtnQkFDOUIsbUJBQW1CLEVBQUUsVUFBVTthQUNoQztTQUNGLENBQUM7UUFFRixFQUFFLENBQUMsK0NBQStDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDN0QsVUFBVTtZQUNWLFFBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsRUFBRSxJQUFJLEVBQUUscUJBQXFCLEVBQUUsQ0FBQyxDQUFDO1lBRWxFLE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxNQUFNLGVBQWUsQ0FBQyxvQkFBb0IsQ0FBQyxTQUFTLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFFaEYsU0FBUztZQUNULE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztnQkFDeEIsRUFBRSxFQUFFLFNBQVM7Z0JBQ2IsSUFBSSxFQUFFLFlBQVk7Z0JBQ2xCLFdBQVcsRUFBRSxVQUFVO2dCQUN2QixZQUFZLEVBQUUsVUFBVTtnQkFDeEIsVUFBVSxFQUFFLEdBQUc7Z0JBQ2YsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLGNBQWMsRUFBRSxVQUFVO2dCQUMxQixlQUFlLEVBQUUsVUFBVTtnQkFDM0IsZ0JBQWdCLEVBQUUsVUFBVTtnQkFDNUIsaUJBQWlCLEVBQUUsVUFBVTthQUM5QixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnREFBZ0QsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5RCxVQUFVO1lBQ1YsTUFBTSxZQUFZLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsaUJBQWlCO1lBQzVFLFFBQVEsQ0FBQyxLQUFLLENBQUMsaUJBQWlCLENBQUMsRUFBRSxJQUFJLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUUvQyxNQUFNO1lBQ04sTUFBTSxlQUFlLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFdEQsU0FBUztZQUNULE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsb0JBQW9CLENBQ3pDLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyx1Q0FBdUMsQ0FBQyxFQUNoRSxDQUFDLFNBQVMsRUFBRSxZQUFZLENBQUMsQ0FDMUIsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsc0JBQXNCLEVBQUUsR0FBRyxFQUFFO1FBQ3BDLE1BQU0sV0FBVyxHQUFHO1lBQ2xCLFVBQVUsRUFBRSxFQUFFO1lBQ2QsWUFBWSxFQUFFLEVBQUU7WUFDaEIsV0FBVyxFQUFFLENBQUM7WUFDZCxTQUFTLEVBQUUsQ0FBQztZQUNaLFdBQVcsRUFBRSxHQUFHO1lBQ2hCLHFCQUFxQixFQUFFLEdBQUc7WUFDMUIsZUFBZSxFQUFFLElBQUk7U0FDdEIsQ0FBQztRQUVGLEVBQUUsQ0FBQywrQ0FBK0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM3RCxVQUFVO1lBQ1YsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUUxRCxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsTUFBTSxlQUFlLENBQUMsb0JBQW9CLENBQUMsU0FBUyxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBRWhGLFNBQVM7WUFDVCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDO2dCQUNyQixTQUFTLEVBQUUsRUFBRTtnQkFDYixXQUFXLEVBQUUsRUFBRTtnQkFDZixVQUFVLEVBQUUsQ0FBQztnQkFDYixRQUFRLEVBQUUsQ0FBQztnQkFDWCxVQUFVLEVBQUUsR0FBRztnQkFDZixrQkFBa0IsRUFBRSxHQUFHO2dCQUN2QixjQUFjLEVBQUUsSUFBSTthQUNyQixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHFCQUFxQixFQUFFLEdBQUcsRUFBRTtRQUNuQyxNQUFNLFlBQVksR0FBRztZQUNuQjtnQkFDRSxFQUFFLEVBQUUsU0FBUztnQkFDYixJQUFJLEVBQUUsaUJBQWlCO2dCQUN2QixNQUFNLEVBQUUsU0FBUztnQkFDakIsSUFBSSxFQUFFLFlBQVk7Z0JBQ2xCLE1BQU0sRUFBRSxxQkFBcUI7Z0JBQzdCLFVBQVUsRUFBRSxzQkFBc0I7YUFDbkM7U0FDRixDQUFDO1FBRUYsRUFBRSxDQUFDLDhDQUE4QyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzVELFVBQVU7WUFDVixRQUFRLENBQUMsS0FBSztpQkFDWCxxQkFBcUIsQ0FBQyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsQ0FBQyxDQUFDLGVBQWU7aUJBQzdELHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxrQkFBa0I7WUFFeEUsTUFBTTtZQUNOLE1BQU0sTUFBTSxHQUFHLE1BQU0sZUFBZSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsRUFBRTtnQkFDbEUsSUFBSSxFQUFFLGlCQUFpQjtnQkFDdkIsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLEtBQUssRUFBRSxFQUFFO2dCQUNULE1BQU0sRUFBRSxDQUFDO2FBQ1YsQ0FBQyxDQUFDO1lBRUgsU0FBUztZQUNULE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDL0IsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQztnQkFDeEIsRUFBRSxFQUFFLFNBQVM7Z0JBQ2IsSUFBSSxFQUFFLGlCQUFpQjtnQkFDdkIsTUFBTSxFQUFFLFNBQVM7Z0JBQ2pCLElBQUksRUFBRSxZQUFZO2dCQUNsQixNQUFNLEVBQUUscUJBQXFCO2dCQUM3QixTQUFTLEVBQUUsc0JBQXNCO2FBQ2xDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsaUJBQWlCLEVBQUUsR0FBRyxFQUFFO1FBQy9CLE1BQU0sU0FBUyxHQUFHO1lBQ2hCLGNBQWMsRUFBRSxFQUFFO1lBQ2xCLGdCQUFnQixFQUFFLENBQUM7WUFDbkIsaUJBQWlCLEVBQUUsQ0FBQztZQUNwQixpQkFBaUIsRUFBRSxDQUFDO1lBQ3BCLGdCQUFnQixFQUFFLENBQUM7WUFDbkIsaUJBQWlCLEVBQUUsQ0FBQztZQUNwQixjQUFjLEVBQUUsQ0FBQztTQUNsQixDQUFDO1FBRUYsRUFBRSxDQUFDLDBDQUEwQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3hELFVBQVU7WUFDVixRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsU0FBUyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRXhELE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxNQUFNLGVBQWUsQ0FBQyxlQUFlLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFaEUsU0FBUztZQUNULE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUM7Z0JBQ3JCLGFBQWEsRUFBRSxFQUFFO2dCQUNqQixlQUFlLEVBQUUsQ0FBQztnQkFDbEIsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDbkIsZ0JBQWdCLEVBQUUsQ0FBQztnQkFDbkIsZUFBZSxFQUFFLENBQUM7Z0JBQ2xCLGdCQUFnQixFQUFFLENBQUM7Z0JBQ25CLGFBQWEsRUFBRSxDQUFDO2FBQ2pCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsa0JBQWtCLEVBQUUsR0FBRyxFQUFFO1FBQ2hDLE1BQU0sV0FBVyxHQUFHO1lBQ2xCLEVBQUUsRUFBRSxhQUFhO1lBQ2pCLGlCQUFpQixFQUFFLFlBQVk7WUFDL0IsV0FBVyxFQUFFLGNBQWM7WUFDM0IsV0FBVyxFQUFFLFNBQVM7WUFDdEIsYUFBYSxFQUFFLFVBQVU7WUFDekIsV0FBVyxFQUFFLElBQUk7WUFDakIsV0FBVyxFQUFFLEdBQUc7WUFDaEIsU0FBUyxFQUFFLElBQUk7WUFDZixnQkFBZ0IsRUFBRSxJQUFJO1lBQ3RCLGNBQWMsRUFBRSxHQUFHO1lBQ25CLE9BQU8sRUFBRSxJQUFJO1lBQ2IsTUFBTSxFQUFFLFdBQVc7WUFDbkIsVUFBVSxFQUFFLHNCQUFzQjtTQUNuQyxDQUFDO1FBRUYsRUFBRSxDQUFDLDJDQUEyQyxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQ3pELFVBQVU7WUFDVixRQUFRLENBQUMsS0FBSyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBRTFELE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxNQUFNLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVqRSxTQUFTO1lBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQztnQkFDckIsRUFBRSxFQUFFLGFBQWE7Z0JBQ2pCLGVBQWUsRUFBRSxZQUFZO2dCQUM3QixVQUFVLEVBQUUsY0FBYztnQkFDMUIsVUFBVSxFQUFFLFNBQVM7Z0JBQ3JCLFlBQVksRUFBRSxVQUFVO2dCQUN4QixVQUFVLEVBQUUsSUFBSTtnQkFDaEIsVUFBVSxFQUFFLEdBQUc7Z0JBQ2YsUUFBUSxFQUFFLElBQUk7Z0JBQ2QsZUFBZSxFQUFFLElBQUk7Z0JBQ3JCLGFBQWEsRUFBRSxHQUFHO2dCQUNsQixNQUFNLEVBQUUsSUFBSTtnQkFDWixNQUFNLEVBQUUsV0FBVztnQkFDbkIsU0FBUyxFQUFFLHNCQUFzQjthQUNsQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyx3Q0FBd0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUN0RCxVQUFVO1lBQ1YsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1lBRS9DLE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxNQUFNLGVBQWUsQ0FBQyxnQkFBZ0IsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVqRSxTQUFTO1lBQ1QsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQzVCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMscUJBQXFCLEVBQUUsR0FBRyxFQUFFO1FBQ25DLE1BQU0sWUFBWSxHQUFHO1lBQ25CO2dCQUNFLEVBQUUsRUFBRSxhQUFhO2dCQUNqQixpQkFBaUIsRUFBRSxZQUFZO2dCQUMvQixXQUFXLEVBQUUsY0FBYztnQkFDM0IsV0FBVyxFQUFFLFNBQVM7Z0JBQ3RCLGFBQWEsRUFBRSxVQUFVO2dCQUN6QixXQUFXLEVBQUUsSUFBSTtnQkFDakIsV0FBVyxFQUFFLEdBQUc7Z0JBQ2hCLFNBQVMsRUFBRSxJQUFJO2dCQUNmLGdCQUFnQixFQUFFLElBQUk7Z0JBQ3RCLGNBQWMsRUFBRSxHQUFHO2dCQUNuQixPQUFPLEVBQUUsSUFBSTtnQkFDYixNQUFNLEVBQUUsV0FBVztnQkFDbkIsVUFBVSxFQUFFLHNCQUFzQjthQUNuQztTQUNGLENBQUM7UUFFRixFQUFFLENBQUMsOENBQThDLEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDNUQsVUFBVTtZQUNWLFFBQVEsQ0FBQyxLQUFLO2lCQUNYLHFCQUFxQixDQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUMsZUFBZTtpQkFDN0QscUJBQXFCLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGtCQUFrQjtZQUV6RSxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsTUFBTSxlQUFlLENBQUMsbUJBQW1CLENBQUMsU0FBUyxFQUFFO2dCQUNsRSxJQUFJLEVBQUUsQ0FBQztnQkFDUCxLQUFLLEVBQUUsRUFBRTtnQkFDVCxJQUFJLEVBQUUsSUFBSTthQUNYLENBQUMsQ0FBQztZQUVILFNBQVM7WUFDVCxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9raW0vdGl0by9zZXJ2ZXIvdGVzdHMvdW5pdC9zZXJ2aWNlcy9lbXBsb3llZVNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFbXBsb3llZVNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zcmMvc2VydmljZXMvZW1wbG95ZWUvZW1wbG95ZWVTZXJ2aWNlJztcbmltcG9ydCB7IGdldFBvb2wgfSBmcm9tICcuLi8uLi8uLi9zcmMvY29uZmlnL2RhdGFiYXNlJztcblxuLy8gTW9jayB0aGUgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NyYy9jb25maWcvZGF0YWJhc2UnKTtcblxuY29uc3QgbW9ja0dldFBvb2wgPSBnZXRQb29sIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGdldFBvb2w+O1xuXG5kZXNjcmliZSgnRW1wbG95ZWVTZXJ2aWNlJywgKCkgPT4ge1xuICBsZXQgZW1wbG95ZWVTZXJ2aWNlOiBFbXBsb3llZVNlcnZpY2U7XG4gIGxldCBtb2NrUG9vbDogYW55O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGVtcGxveWVlU2VydmljZSA9IG5ldyBFbXBsb3llZVNlcnZpY2UoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIE1vY2sgZGF0YWJhc2UgcG9vbFxuICAgIG1vY2tQb29sID0ge1xuICAgICAgcXVlcnk6IGplc3QuZm4oKVxuICAgIH07XG4gICAgbW9ja0dldFBvb2wubW9ja1JldHVyblZhbHVlKG1vY2tQb29sKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEVtcGxveWVlSWRCeVVzZXJJZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXBsb3llZSBJRCBmb3IgdmFsaWQgdXNlciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgcm93czogW3sgZW1wbG95ZWVfaWQ6ICdlbXAtMTIzJyB9XVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldEVtcGxveWVlSWRCeVVzZXJJZCgndXNlci0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdlbXAtMTIzJyk7XG4gICAgICBleHBlY3QobW9ja1Bvb2wucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnU0VMRUNUIGVtcGxveWVlX2lkIEZST00gZW1wbG95ZWVzIFdIRVJFIHVzZXJfaWQgPSAkMScsXG4gICAgICAgIFsndXNlci0xMjMnXVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIG51bGwgaWYgZW1wbG95ZWUgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbXSB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbXBsb3llZVNlcnZpY2UuZ2V0RW1wbG95ZWVJZEJ5VXNlcklkKCd1c2VyLTEyMycpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXREYXNoYm9hcmQnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja0VtcGxveWVlSW5mbyA9IHtcbiAgICAgIGlkOiAnZW1wLTEyMycsXG4gICAgICBuYW1lOiAnSm9obiBEb2UnLFxuICAgICAgZW1wbG95ZWVfaWQ6ICdFTVAwMDEnLFxuICAgICAgZGVwYXJ0bWVudDogJ0VuZ2luZWVyaW5nJyxcbiAgICAgICAgcG9zaXRpb246ICdTb2Z0d2FyZSBEZXZlbG9wZXInLFxuICAgICAgaGlyZV9kYXRlOiAnMjAyMy0wMS0wMScsXG4gICAgICBwcm9maWxlX3BpY3R1cmU6ICdwcm9maWxlLmpwZydcbiAgICB9O1xuXG4gICAgY29uc3QgbW9ja1RvZGF5QXR0ZW5kYW5jZSA9IHtcbiAgICAgIHRvZGF5X3N0YXR1czogJ3ByZXNlbnQnLFxuICAgICAgY2xvY2tfaW5fdGltZTogJzA4OjMwOjAwJyxcbiAgICAgIGNsb2NrX291dF90aW1lOiAnMTc6MzA6MDAnLFxuICAgICAgdG90YWxfaG91cnM6IDguNSxcbiAgICAgIG1vcm5pbmdfY2xvY2tfaW46ICcwODozMDowMCcsXG4gICAgICBtb3JuaW5nX2Nsb2NrX291dDogJzEyOjAwOjAwJyxcbiAgICAgIGFmdGVybm9vbl9jbG9ja19pbjogJzEzOjAwOjAwJyxcbiAgICAgIGFmdGVybm9vbl9jbG9ja19vdXQ6ICcxNzozMDowMCcsXG4gICAgICBicmVha19zdGFydDogJzEyOjAwOjAwJyxcbiAgICAgIGJyZWFrX2VuZDogJzEzOjAwOjAwJ1xuICAgIH07XG5cbiAgICBjb25zdCBtb2NrTW9udGhseVN0YXRzID0ge1xuICAgICAgbW9udGhseV9wcmVzZW50OiAyMCxcbiAgICAgIG1vbnRobHlfYWJzZW50OiAyLFxuICAgICAgbW9udGhseV9sYXRlOiAzXG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tMZWF2ZUJhbGFuY2UgPSB7XG4gICAgICB2YWNhdGlvbjogMTAsXG4gICAgICBzaWNrOiA4LFxuICAgICAgbWF0ZXJuaXR5OiAwLFxuICAgICAgb3RoZXI6IDJcbiAgICB9O1xuXG4gICAgY29uc3QgbW9ja1JlY2VudEFjdGl2aXR5ID0gW1xuICAgICAge1xuICAgICAgICBpZDogJ2FjdC0xMjMnLFxuICAgICAgICB0eXBlOiAnY2xvY2tfaW4nLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Nsb2NrZWQgaW4gYXQgMDg6MzAnLFxuICAgICAgICB0aW1lc3RhbXA6ICcyMDI0LTAxLTE1VDA4OjMwOjAwWicsXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnXG4gICAgICB9XG4gICAgXTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcGxveWVlIGRhc2hib2FyZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW21vY2tFbXBsb3llZUluZm9dIH0pIC8vIGdldEVtcGxveWVlSW5mb1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW21vY2tUb2RheUF0dGVuZGFuY2VdIH0pIC8vIGdldFRvZGF5QXR0ZW5kYW5jZVN0YXR1c1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW21vY2tNb250aGx5U3RhdHNdIH0pIC8vIGdldE1vbnRobHlBdHRlbmRhbmNlU3RhdHNcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFttb2NrTGVhdmVCYWxhbmNlXSB9KSAvLyBnZXRMZWF2ZUJhbGFuY2VcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IG1vY2tSZWNlbnRBY3Rpdml0eSB9KSAvLyBnZXRSZWNlbnRBY3Rpdml0eVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW3sgY291bnQ6ICczJyB9XSB9KSAvLyBnZXRQZW5kaW5nUmVxdWVzdHNDb3VudFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSk7IC8vIGdldFVwY29taW5nRXZlbnRzXG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldERhc2hib2FyZCgnZW1wLTEyMycpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBlbXBsb3llZToge1xuICAgICAgICAgIGlkOiAnZW1wLTEyMycsXG4gICAgICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgICBlbXBsb3llZUlkOiAnRU1QMDAxJyxcbiAgICAgICAgICBkZXBhcnRtZW50OiAnRW5naW5lZXJpbmcnLFxuICAgICAgICAgIHBvc2l0aW9uOiAnU29mdHdhcmUgRGV2ZWxvcGVyJyxcbiAgICAgICAgICBoaXJlRGF0ZTogJzIwMjMtMDEtMDEnLFxuICAgICAgICAgIHByb2ZpbGVQaWN0dXJlOiAncHJvZmlsZS5qcGcnXG4gICAgICAgIH0sXG4gICAgICAgIGF0dGVuZGFuY2U6IHtcbiAgICAgICAgICB0b2RheVN0YXR1czogJ3ByZXNlbnQnLFxuICAgICAgICAgIGNsb2NrSW5UaW1lOiAnMDg6MzA6MDAnLFxuICAgICAgICAgIGNsb2NrT3V0VGltZTogJzE3OjMwOjAwJyxcbiAgICAgICAgICB0b3RhbEhvdXJzOiA4LjUsXG4gICAgICAgICAgbW9ybmluZ0Nsb2NrSW46ICcwODozMDowMCcsXG4gICAgICAgICAgbW9ybmluZ0Nsb2NrT3V0OiAnMTI6MDA6MDAnLFxuICAgICAgICAgIGFmdGVybm9vbkNsb2NrSW46ICcxMzowMDowMCcsXG4gICAgICAgICAgYWZ0ZXJub29uQ2xvY2tPdXQ6ICcxNzozMDowMCcsXG4gICAgICAgICAgYnJlYWtTdGFydDogJzEyOjAwOjAwJyxcbiAgICAgICAgICBicmVha0VuZDogJzEzOjAwOjAwJyxcbiAgICAgICAgICBtb250aGx5UHJlc2VudDogMjAsXG4gICAgICAgICAgbW9udGhseUFic2VudDogMixcbiAgICAgICAgICBtb250aGx5TGF0ZTogM1xuICAgICAgICB9LFxuICAgICAgICBsZWF2ZUJhbGFuY2U6IHtcbiAgICAgICAgICB2YWNhdGlvbjogMTAsXG4gICAgICAgICAgc2ljazogOCxcbiAgICAgICAgICBtYXRlcm5pdHk6IDAsXG4gICAgICAgICAgb3RoZXI6IDJcbiAgICAgICAgfSxcbiAgICAgICAgcmVjZW50QWN0aXZpdHk6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ2FjdC0xMjMnLFxuICAgICAgICAgICAgdHlwZTogJ2Nsb2NrX2luJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ2xvY2tlZCBpbiBhdCAwODozMCcsXG4gICAgICAgICAgICB0aW1lc3RhbXA6ICcyMDI0LTAxLTE1VDA4OjMwOjAwWicsXG4gICAgICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJ1xuICAgICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgcGVuZGluZ1JlcXVlc3RzOiAzLFxuICAgICAgICB1cGNvbWluZ0V2ZW50czogW11cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBlbXBsb3llZSBpbmZvIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSkgLy8gZ2V0RW1wbG95ZWVJbmZvXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyByb3dzOiBbXSB9KSAvLyBnZXRUb2RheUF0dGVuZGFuY2VTdGF0dXNcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pIC8vIGdldE1vbnRobHlBdHRlbmRhbmNlU3RhdHNcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pIC8vIGdldExlYXZlQmFsYW5jZVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSkgLy8gZ2V0UmVjZW50QWN0aXZpdHlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFt7IGNvdW50OiAnMCcgfV0gfSkgLy8gZ2V0UGVuZGluZ1JlcXVlc3RzQ291bnRcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pOyAvLyBnZXRVcGNvbWluZ0V2ZW50c1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXREYXNoYm9hcmQoJ2VtcC0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0LmVtcGxveWVlKS50b0VxdWFsKHtcbiAgICAgICAgaWQ6ICcnLFxuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgZW1wbG95ZWVJZDogJycsXG4gICAgICAgIGRlcGFydG1lbnQ6ICcnLFxuICAgICAgICBwb3NpdGlvbjogJycsXG4gICAgICAgIGhpcmVEYXRlOiAnJyxcbiAgICAgICAgcHJvZmlsZVBpY3R1cmU6IHVuZGVmaW5lZFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRFbXBsb3llZVByb2ZpbGUnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1Byb2ZpbGUgPSB7XG4gICAgICBpZDogJ2VtcC0xMjMnLFxuICAgICAgZW1wbG95ZWVfaWQ6ICdFTVAwMDEnLFxuICAgICAgdXNlcl9pZDogJ3VzZXItMTIzJyxcbiAgICAgIHBvc2l0aW9uOiAnU29mdHdhcmUgRGV2ZWxvcGVyJyxcbiAgICAgIGRlcGFydG1lbnRfaWQ6ICdkZXB0LTEyMycsXG4gICAgICBkZXBhcnRtZW50X25hbWU6ICdFbmdpbmVlcmluZycsXG4gICAgICBlbXBsb3ltZW50X3R5cGU6ICdyZWd1bGFyJyxcbiAgICAgIGhpcmVfZGF0ZTogJzIwMjMtMDEtMDEnLFxuICAgICAgYmFzZV9zYWxhcnk6IDUwMDAwLFxuICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgIGZpcnN0X25hbWU6ICdKb2huJyxcbiAgICAgIGxhc3RfbmFtZTogJ0RvZScsXG4gICAgICBlbWFpbDogJ2pvaG4uZG9lQGNvbXBhbnkuY29tJyxcbiAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgYWRkcmVzczogJzEyMyBNYWluIFN0JyxcbiAgICAgIGVtZXJnZW5jeV9jb250YWN0OiAnSmFuZSBEb2UnLFxuICAgICAgZW1lcmdlbmN5X3Bob25lOiAnKzA5ODc2NTQzMjEnXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcGxveWVlIHByb2ZpbGUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbbW9ja1Byb2ZpbGVdIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRFbXBsb3llZVByb2ZpbGUoJ2VtcC0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaWQ6ICdlbXAtMTIzJyxcbiAgICAgICAgZW1wbG95ZWVJZDogJ0VNUDAwMScsXG4gICAgICAgIHVzZXJJZDogJ3VzZXItMTIzJyxcbiAgICAgICAgcG9zaXRpb246ICdTb2Z0d2FyZSBEZXZlbG9wZXInLFxuICAgICAgICBkZXBhcnRtZW50SWQ6ICdkZXB0LTEyMycsXG4gICAgICAgIGRlcGFydG1lbnROYW1lOiAnRW5naW5lZXJpbmcnLFxuICAgICAgICBlbXBsb3ltZW50VHlwZTogJ3JlZ3VsYXInLFxuICAgICAgICBoaXJlRGF0ZTogJzIwMjMtMDEtMDEnLFxuICAgICAgICBiYXNlU2FsYXJ5OiA1MDAwMCxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgICAgcGVyc29uYWxJbmZvOiB7XG4gICAgICAgICAgZmlyc3ROYW1lOiAnSm9obicsXG4gICAgICAgICAgbGFzdE5hbWU6ICdEb2UnLFxuICAgICAgICAgIGVtYWlsOiAnam9obi5kb2VAY29tcGFueS5jb20nLFxuICAgICAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgICAgIGFkZHJlc3M6ICcxMjMgTWFpbiBTdCdcbiAgICAgICAgfSxcbiAgICAgICAgZW1lcmdlbmN5Q29udGFjdDoge1xuICAgICAgICAgIG5hbWU6ICdKYW5lIERvZScsXG4gICAgICAgICAgcGhvbmU6ICcrMDk4NzY1NDMyMSdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGlmIGVtcGxveWVlIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKHsgcm93czogW10gfSk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGVtcGxveWVlU2VydmljZS5nZXRFbXBsb3llZVByb2ZpbGUoJ2VtcC0xMjMnKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnRW1wbG95ZWUgbm90IGZvdW5kJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGRhdGVFbXBsb3llZVByb2ZpbGUnLCAoKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgYWRkcmVzczogJzEyMyBNYWluIFN0JyxcbiAgICAgIGVtZXJnZW5jeUNvbnRhY3ROYW1lOiAnSmFuZSBEb2UnLFxuICAgICAgZW1lcmdlbmN5Q29udGFjdFBob25lOiAnKzA5ODc2NTQzMjEnXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgdXBkYXRlIGVtcGxveWVlIHByb2ZpbGUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFt7IGlkOiAnZW1wLTEyMycgfV0gfSkgLy8gY2hlY2sgZW1wbG95ZWUgZXhpc3RzXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyByb3dzOiBbXSB9KTsgLy8gdXBkYXRlIHByb2ZpbGVcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBlbXBsb3llZVNlcnZpY2UudXBkYXRlRW1wbG95ZWVQcm9maWxlKCdlbXAtMTIzJywgdXBkYXRlRGF0YSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tQb29sLnF1ZXJ5KS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMik7XG4gICAgICBleHBlY3QobW9ja1Bvb2wucXVlcnkpLnRvSGF2ZUJlZW5OdGhDYWxsZWRXaXRoKDIsXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdVUERBVEUgZW1wbG95ZWVzIFNFVCcpLFxuICAgICAgICBleHBlY3QuYXJyYXlDb250YWluaW5nKFsnKzEyMzQ1Njc4OTAnLCAnMTIzIE1haW4gU3QnLCAnSmFuZSBEb2UnLCAnKzA5ODc2NTQzMjEnLCAnZW1wLTEyMyddKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgaWYgZW1wbG95ZWUgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbXSB9KTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoZW1wbG95ZWVTZXJ2aWNlLnVwZGF0ZUVtcGxveWVlUHJvZmlsZSgnZW1wLTEyMycsIHVwZGF0ZURhdGEpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdFbXBsb3llZSBub3QgZm91bmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEF0dGVuZGFuY2VIaXN0b3J5JywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tBdHRlbmRhbmNlSGlzdG9yeSA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdhdHQtMTIzJyxcbiAgICAgICAgZGF0ZTogJzIwMjQtMDEtMTUnLFxuICAgICAgICBjbG9ja19pbl90aW1lOiAnMDg6MzA6MDAnLFxuICAgICAgICBjbG9ja19vdXRfdGltZTogJzE3OjMwOjAwJyxcbiAgICAgICAgdG90YWxfaG91cnM6IDguNSxcbiAgICAgICAgc3RhdHVzOiAncHJlc2VudCcsXG4gICAgICAgIG1vcm5pbmdfY2xvY2tfaW46ICcwODozMDowMCcsXG4gICAgICAgIG1vcm5pbmdfY2xvY2tfb3V0OiAnMTI6MDA6MDAnLFxuICAgICAgICBhZnRlcm5vb25fY2xvY2tfaW46ICcxMzowMDowMCcsXG4gICAgICAgIGFmdGVybm9vbl9jbG9ja19vdXQ6ICcxNzozMDowMCdcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gYXR0ZW5kYW5jZSBoaXN0b3J5IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKHsgcm93czogbW9ja0F0dGVuZGFuY2VIaXN0b3J5IH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRBdHRlbmRhbmNlSGlzdG9yeSgnZW1wLTEyMycsICcyMDI0LTAxJyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXSkudG9FcXVhbCh7XG4gICAgICAgIGlkOiAnYXR0LTEyMycsXG4gICAgICAgIGRhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICAgICAgY2xvY2tJblRpbWU6ICcwODozMDowMCcsXG4gICAgICAgIGNsb2NrT3V0VGltZTogJzE3OjMwOjAwJyxcbiAgICAgICAgdG90YWxIb3VyczogOC41LFxuICAgICAgICBzdGF0dXM6ICdwcmVzZW50JyxcbiAgICAgICAgbW9ybmluZ0Nsb2NrSW46ICcwODozMDowMCcsXG4gICAgICAgIG1vcm5pbmdDbG9ja091dDogJzEyOjAwOjAwJyxcbiAgICAgICAgYWZ0ZXJub29uQ2xvY2tJbjogJzEzOjAwOjAwJyxcbiAgICAgICAgYWZ0ZXJub29uQ2xvY2tPdXQ6ICcxNzozMDowMCdcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgY3VycmVudCBtb250aCBpZiBtb250aCBub3QgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBjdXJyZW50TW9udGggPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgNyk7IC8vIFlZWVktTU0gZm9ybWF0XG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHJvd3M6IFtdIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRBdHRlbmRhbmNlSGlzdG9yeSgnZW1wLTEyMycpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUG9vbC5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdXSEVSRSBlbXBsb3llZV9pZCA9ICQxIEFORCBEQVRFX1RSVU5DJyksXG4gICAgICAgIFsnZW1wLTEyMycsIGN1cnJlbnRNb250aF1cbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRBdHRlbmRhbmNlU3VtbWFyeScsICgpID0+IHtcbiAgICBjb25zdCBtb2NrU3VtbWFyeSA9IHtcbiAgICAgIHRvdGFsX2RheXM6IDIyLFxuICAgICAgcHJlc2VudF9kYXlzOiAyMCxcbiAgICAgIGFic2VudF9kYXlzOiAxLFxuICAgICAgbGF0ZV9kYXlzOiAxLFxuICAgICAgdG90YWxfaG91cnM6IDE2MCxcbiAgICAgIGF2ZXJhZ2VfaG91cnNfcGVyX2RheTogOC4wLFxuICAgICAgYXR0ZW5kYW5jZV9yYXRlOiA5MC45XG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGF0dGVuZGFuY2Ugc3VtbWFyeSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHJvd3M6IFttb2NrU3VtbWFyeV0gfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldEF0dGVuZGFuY2VTdW1tYXJ5KCdlbXAtMTIzJywgJzIwMjQtMDEnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdG90YWxEYXlzOiAyMixcbiAgICAgICAgcHJlc2VudERheXM6IDIwLFxuICAgICAgICBhYnNlbnREYXlzOiAxLFxuICAgICAgICBsYXRlRGF5czogMSxcbiAgICAgICAgdG90YWxIb3VyczogMTYwLFxuICAgICAgICBhdmVyYWdlSG91cnNQZXJEYXk6IDguMCxcbiAgICAgICAgYXR0ZW5kYW5jZVJhdGU6IDkwLjlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0RW1wbG95ZWVSZXF1ZXN0cycsICgpID0+IHtcbiAgICBjb25zdCBtb2NrUmVxdWVzdHMgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAncmVxLTEyMycsXG4gICAgICAgIHR5cGU6ICd0aW1lX2NvcnJlY3Rpb24nLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgZGF0ZTogJzIwMjQtMDEtMTUnLFxuICAgICAgICByZWFzb246ICdGb3Jnb3QgdG8gY2xvY2sgb3V0JyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJ1xuICAgICAgfVxuICAgIF07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXBsb3llZSByZXF1ZXN0cyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogbW9ja1JlcXVlc3RzIH0pIC8vIGdldCByZXF1ZXN0c1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW3sgY291bnQ6ICc1JyB9XSB9KTsgLy8gZ2V0IHRvdGFsIGNvdW50XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldEVtcGxveWVlUmVxdWVzdHMoJ2VtcC0xMjMnLCB7XG4gICAgICAgIHR5cGU6ICd0aW1lX2NvcnJlY3Rpb24nLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBvZmZzZXQ6IDBcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0pLnRvRXF1YWwoe1xuICAgICAgICBpZDogJ3JlcS0xMjMnLFxuICAgICAgICB0eXBlOiAndGltZV9jb3JyZWN0aW9uJyxcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgIGRhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICAgICAgcmVhc29uOiAnRm9yZ290IHRvIGNsb2NrIG91dCcsXG4gICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMTVUMTA6MDA6MDBaJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRSZXF1ZXN0U3RhdHMnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1N0YXRzID0ge1xuICAgICAgdG90YWxfcmVxdWVzdHM6IDEwLFxuICAgICAgcGVuZGluZ19yZXF1ZXN0czogMyxcbiAgICAgIGFwcHJvdmVkX3JlcXVlc3RzOiA2LFxuICAgICAgcmVqZWN0ZWRfcmVxdWVzdHM6IDEsXG4gICAgICB0aW1lX2NvcnJlY3Rpb25zOiA1LFxuICAgICAgb3ZlcnRpbWVfcmVxdWVzdHM6IDMsXG4gICAgICBsZWF2ZV9yZXF1ZXN0czogMlxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiByZXF1ZXN0IHN0YXRzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKHsgcm93czogW21vY2tTdGF0c10gfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldFJlcXVlc3RTdGF0cygnZW1wLTEyMycpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICB0b3RhbFJlcXVlc3RzOiAxMCxcbiAgICAgICAgcGVuZGluZ1JlcXVlc3RzOiAzLFxuICAgICAgICBhcHByb3ZlZFJlcXVlc3RzOiA2LFxuICAgICAgICByZWplY3RlZFJlcXVlc3RzOiAxLFxuICAgICAgICB0aW1lQ29ycmVjdGlvbnM6IDUsXG4gICAgICAgIG92ZXJ0aW1lUmVxdWVzdHM6IDMsXG4gICAgICAgIGxlYXZlUmVxdWVzdHM6IDJcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0TGF0ZXN0UGF5c3R1YicsICgpID0+IHtcbiAgICBjb25zdCBtb2NrUGF5c3R1YiA9IHtcbiAgICAgIGlkOiAncGF5c3R1Yi0xMjMnLFxuICAgICAgcGF5cm9sbF9wZXJpb2RfaWQ6ICdwZXJpb2QtMTIzJyxcbiAgICAgIHBlcmlvZF9uYW1lOiAnSmFudWFyeSAyMDI0JyxcbiAgICAgIGVtcGxveWVlX2lkOiAnZW1wLTEyMycsXG4gICAgICBlbXBsb3llZV9uYW1lOiAnSm9obiBEb2UnLFxuICAgICAgYmFzZV9zYWxhcnk6IDUwMDAsXG4gICAgICB0b3RhbF9ob3VyczogMTYwLFxuICAgICAgZ3Jvc3NfcGF5OiA1MDAwLFxuICAgICAgdG90YWxfZGVkdWN0aW9uczogMTAwMCxcbiAgICAgIHRvdGFsX2JlbmVmaXRzOiA1MDAsXG4gICAgICBuZXRfcGF5OiA0NTAwLFxuICAgICAgc3RhdHVzOiAncHJvY2Vzc2VkJyxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTMxVDEwOjAwOjAwWidcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbGF0ZXN0IHBheXN0dWIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbbW9ja1BheXN0dWJdIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRMYXRlc3RQYXlzdHViKCdlbXAtMTIzJyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIGlkOiAncGF5c3R1Yi0xMjMnLFxuICAgICAgICBwYXlyb2xsUGVyaW9kSWQ6ICdwZXJpb2QtMTIzJyxcbiAgICAgICAgcGVyaW9kTmFtZTogJ0phbnVhcnkgMjAyNCcsXG4gICAgICAgIGVtcGxveWVlSWQ6ICdlbXAtMTIzJyxcbiAgICAgICAgZW1wbG95ZWVOYW1lOiAnSm9obiBEb2UnLFxuICAgICAgICBiYXNlU2FsYXJ5OiA1MDAwLFxuICAgICAgICB0b3RhbEhvdXJzOiAxNjAsXG4gICAgICAgIGdyb3NzUGF5OiA1MDAwLFxuICAgICAgICB0b3RhbERlZHVjdGlvbnM6IDEwMDAsXG4gICAgICAgIHRvdGFsQmVuZWZpdHM6IDUwMCxcbiAgICAgICAgbmV0UGF5OiA0NTAwLFxuICAgICAgICBzdGF0dXM6ICdwcm9jZXNzZWQnLFxuICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTMxVDEwOjAwOjAwWidcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbnVsbCBpZiBubyBwYXlzdHViIGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbXSB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbXBsb3llZVNlcnZpY2UuZ2V0TGF0ZXN0UGF5c3R1YignZW1wLTEyMycpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRFbXBsb3llZVBheXN0dWJzJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tQYXlzdHVicyA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdwYXlzdHViLTEyMycsXG4gICAgICAgIHBheXJvbGxfcGVyaW9kX2lkOiAncGVyaW9kLTEyMycsXG4gICAgICAgIHBlcmlvZF9uYW1lOiAnSmFudWFyeSAyMDI0JyxcbiAgICAgICAgZW1wbG95ZWVfaWQ6ICdlbXAtMTIzJyxcbiAgICAgICAgZW1wbG95ZWVfbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgYmFzZV9zYWxhcnk6IDUwMDAsXG4gICAgICAgIHRvdGFsX2hvdXJzOiAxNjAsXG4gICAgICAgIGdyb3NzX3BheTogNTAwMCxcbiAgICAgICAgdG90YWxfZGVkdWN0aW9uczogMTAwMCxcbiAgICAgICAgdG90YWxfYmVuZWZpdHM6IDUwMCxcbiAgICAgICAgbmV0X3BheTogNDUwMCxcbiAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2VkJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMzFUMTA6MDA6MDBaJ1xuICAgICAgfVxuICAgIF07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXBsb3llZSBwYXlzdHVicyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogbW9ja1BheXN0dWJzIH0pIC8vIGdldCBwYXlzdHVic1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW3sgY291bnQ6ICcxMicgfV0gfSk7IC8vIGdldCB0b3RhbCBjb3VudFxuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRFbXBsb3llZVBheXN0dWJzKCdlbXAtMTIzJywge1xuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgIHllYXI6IDIwMjRcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=