{"version":3,"names":["cov_2hktmh3hxi","actualCoverage","joi_1","s","__importDefault","require","exports","createPayrollPeriodSchema","default","object","period_name","string","required","min","max","start_date","date","end_date","greater","ref","status","valid","optional","updatePayrollPeriodSchema","payrollPeriodQuerySchema","page","number","integer","limit","startDate","endDate","updatePayrollRecordSchema","base_salary","positive","regular_hours","hourly_rate","regular_pay","overtime_hours","overtime_pay","total_pay","net_pay","payrollRecordQuerySchema","payroll_period_id","uuid","employee_id","createDeductionTypeSchema","name","description","allow","percentage","fixed_amount","is_active","boolean","custom","value","helpers","f","b","error","messages","updateDeductionTypeSchema","deductionTypeQuerySchema","calculatePayrollSchema","deductions","array","items","type","amount","approvePayrollSchema","comments","payrollSummaryQuerySchema","include_details","group_by_department"],"sources":["/home/kim/tito/server/src/middleware/validation/schemas/payrollSchemas.ts"],"sourcesContent":["import Joi from 'joi';\n\n// Payroll Period Schemas\nexport const createPayrollPeriodSchema = Joi.object({\n  period_name: Joi.string().required().min(1).max(100),\n  start_date: Joi.date().required(),\n  end_date: Joi.date().required().greater(Joi.ref('start_date')),\n  status: Joi.string().valid('draft', 'processing', 'sent_for_review', 'completed').optional()\n});\n\nexport const updatePayrollPeriodSchema = Joi.object({\n  period_name: Joi.string().min(1).max(100).optional(),\n  start_date: Joi.date().optional(),\n  end_date: Joi.date().optional(),\n  status: Joi.string().valid('draft', 'processing', 'sent_for_review', 'completed').optional()\n});\n\nexport const payrollPeriodQuerySchema = Joi.object({\n  page: Joi.number().integer().min(1).optional(),\n  limit: Joi.number().integer().min(1).max(100).optional(),\n  status: Joi.string().valid('draft', 'processing', 'sent_for_review', 'completed').optional(),\n  startDate: Joi.date().optional(),\n  endDate: Joi.date().optional()\n});\n\n// Payroll Record Schemas\nexport const updatePayrollRecordSchema = Joi.object({\n  base_salary: Joi.number().positive().optional(),\n  regular_hours: Joi.number().positive().optional(),\n  hourly_rate: Joi.number().positive().optional(),\n  regular_pay: Joi.number().min(0).optional(),\n  overtime_hours: Joi.number().min(0).optional(),\n  overtime_pay: Joi.number().min(0).optional(),\n  total_pay: Joi.number().min(0).optional(),\n  net_pay: Joi.number().min(0).optional(),\n  status: Joi.string().valid('draft', 'processed', 'paid').optional()\n});\n\nexport const payrollRecordQuerySchema = Joi.object({\n  page: Joi.number().integer().min(1).optional(),\n  limit: Joi.number().integer().min(1).max(100).optional(),\n  payroll_period_id: Joi.string().uuid().optional(),\n  employee_id: Joi.string().uuid().optional(),\n  status: Joi.string().valid('draft', 'processed', 'paid').optional()\n});\n\n// Deduction Type Schemas\nexport const createDeductionTypeSchema = Joi.object({\n  name: Joi.string().required().min(1).max(100),\n  description: Joi.string().max(500).optional().allow(null),\n  percentage: Joi.number().min(0).max(100).optional().allow(null),\n  fixed_amount: Joi.number().min(0).optional().allow(null),\n  is_active: Joi.boolean().optional()\n}).custom((value, helpers) => {\n  // Either percentage or fixed_amount must be provided, but not both\n  if (!value.percentage && !value.fixed_amount) {\n    return helpers.error('custom.eitherPercentageOrFixed');\n  }\n  if (value.percentage && value.fixed_amount) {\n    return helpers.error('custom.notBothPercentageAndFixed');\n  }\n  return value;\n}).messages({\n  'custom.eitherPercentageOrFixed': 'Either percentage or fixed amount must be provided',\n  'custom.notBothPercentageAndFixed': 'Cannot specify both percentage and fixed amount'\n});\n\nexport const updateDeductionTypeSchema = Joi.object({\n  name: Joi.string().min(1).max(100).optional(),\n  description: Joi.string().max(500).optional().allow(null),\n  percentage: Joi.number().min(0).max(100).optional().allow(null),\n  fixed_amount: Joi.number().min(0).optional().allow(null),\n  is_active: Joi.boolean().optional()\n});\n\nexport const deductionTypeQuerySchema = Joi.object({\n  page: Joi.number().integer().min(1).optional(),\n  limit: Joi.number().integer().min(1).max(100).optional(),\n  is_active: Joi.boolean().optional()\n});\n\n// Payroll Calculation Schemas\nexport const calculatePayrollSchema = Joi.object({\n  employee_id: Joi.string().uuid().required(),\n  payroll_period_id: Joi.string().uuid().required(),\n  base_salary: Joi.number().positive().required(),\n  regular_hours: Joi.number().min(0).required(),\n  overtime_hours: Joi.number().min(0).required(),\n  deductions: Joi.array().items(\n    Joi.object({\n      type: Joi.string().required(),\n      amount: Joi.number().min(0).required(),\n      percentage: Joi.number().min(0).max(100).optional()\n    })\n  ).optional()\n});\n\n// Payroll Approval Schemas\nexport const approvePayrollSchema = Joi.object({\n  comments: Joi.string().max(500).optional()\n});\n\n// Payroll Summary Query Schema\nexport const payrollSummaryQuerySchema = Joi.object({\n  include_details: Joi.boolean().optional(),\n  group_by_department: Joi.boolean().optional()\n});"],"mappings":"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","ignoreList":[]}