0e5d0d65d999dfbd05d1f83e5f6d3e45
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock the dependencies
jest.mock('../../../src/config/database');
const employeeService_1 = require("../../../src/services/employee/employeeService");
const database_1 = require("../../../src/config/database");
const mockGetPool = database_1.getPool;
describe('EmployeeService', () => {
    let employeeService;
    let mockPool;
    beforeEach(() => {
        employeeService = new employeeService_1.EmployeeService();
        jest.clearAllMocks();
        // Mock database pool
        mockPool = {
            query: jest.fn(),
            connect: jest.fn().mockResolvedValue({
                query: jest.fn(),
                release: jest.fn()
            })
        };
        mockGetPool.mockReturnValue(mockPool);
    });
    describe('getEmployeeIdByUserId', () => {
        it('should return employee ID for valid user ID', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({
                rows: [{ id: 'emp-123' }]
            });
            // Act
            const result = await employeeService.getEmployeeIdByUserId('user-123');
            // Assert
            expect(result).toBe('emp-123');
            expect(mockPool.query).toHaveBeenCalledWith(expect.stringMatching(/SELECT\s+id\s+FROM\s+employees\s+WHERE\s+user_id\s+=\s+\$1/), ['user-123']);
        });
        it('should return null if employee not found', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act
            const result = await employeeService.getEmployeeIdByUserId('user-123');
            // Assert
            expect(result).toBeNull();
        });
    });
    describe('getDashboard', () => {
        const mockEmployeeInfo = {
            id: 'emp-123',
            name: 'John Doe',
            employee_id: 'EMP001',
            department: 'Engineering',
            position: 'Software Developer',
            hire_date: '2023-01-01',
            profile_picture: 'profile.jpg'
        };
        const mockTodayAttendance = {
            today_status: 'present',
            clock_in_time: '08:30:00',
            clock_out_time: '17:30:00',
            total_hours: 8.5,
            morning_clock_in: '08:30:00',
            morning_clock_out: '12:00:00',
            afternoon_clock_in: '13:00:00',
            afternoon_clock_out: '17:30:00',
            break_start: '12:00:00',
            break_end: '13:00:00'
        };
        const mockMonthlyStats = {
            monthly_present: 20,
            monthly_absent: 2,
            monthly_late: 3
        };
        const mockLeaveBalance = {
            vacation: 10,
            sick: 8,
            maternity: 0,
            other: 2
        };
        const mockRecentActivity = [
            {
                id: 'act-123',
                type: 'clock_in',
                description: 'Clocked in at 08:30',
                timestamp: '2024-01-15T08:30:00Z',
                status: 'success'
            }
        ];
        it('should return employee dashboard successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: [mockEmployeeInfo] }) // getEmployeeInfo
                .mockResolvedValueOnce({ rows: [mockTodayAttendance] }) // getTodayAttendanceStatus
                .mockResolvedValueOnce({ rows: [mockMonthlyStats] }) // getMonthlyAttendanceStats
                .mockResolvedValueOnce({ rows: [mockLeaveBalance] }) // getLeaveBalance
                .mockResolvedValueOnce({ rows: mockRecentActivity }) // getRecentActivity
                .mockResolvedValueOnce({ rows: [{ total: '3' }] }) // getPendingRequestsCount
                .mockResolvedValueOnce({ rows: [] }); // getUpcomingEvents
            // Act
            const result = await employeeService.getDashboard('emp-123');
            // Assert
            expect(result).toEqual({
                employee: {
                    id: 'emp-123',
                    name: 'John Doe',
                    employeeId: 'EMP001',
                    department: 'Engineering',
                    position: 'Software Developer',
                    hireDate: '2023-01-01',
                    profilePicture: 'profile.jpg'
                },
                attendance: {
                    todayStatus: 'present',
                    clockInTime: '08:30:00',
                    clockOutTime: '17:30:00',
                    totalHours: 8.5,
                    morningClockIn: '08:30:00',
                    morningClockOut: '12:00:00',
                    afternoonClockIn: '13:00:00',
                    afternoonClockOut: '17:30:00',
                    breakStart: '12:00:00',
                    breakEnd: '13:00:00',
                    monthlyPresent: 20,
                    monthlyAbsent: 2,
                    monthlyLate: 3
                },
                leaveBalance: {
                    vacation: 10,
                    sick: 8,
                    maternity: 0,
                    other: 2
                },
                recentActivity: [
                    {
                        id: 'act-123',
                        type: 'clock_in',
                        description: 'Clocked in at 08:30',
                        timestamp: '2024-01-15T08:30:00Z',
                        status: 'success'
                    }
                ],
                pendingRequests: 3,
                upcomingEvents: []
            });
        });
        it('should handle missing employee info gracefully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: [] }) // getEmployeeInfo - no employee found
                .mockResolvedValueOnce({ rows: [] }) // getTodayAttendanceStatus
                .mockResolvedValueOnce({ rows: [] }) // getMonthlyAttendanceStats
                .mockResolvedValueOnce({ rows: [] }) // getLeaveBalance
                .mockResolvedValueOnce({ rows: [] }) // getRecentActivity
                .mockResolvedValueOnce({ rows: [{ total: '0' }] }) // getPendingRequestsCount
                .mockResolvedValueOnce({ rows: [] }); // getUpcomingEvents
            // Mock the combined query for getPendingRequestsCount
            mockPool.query.mockResolvedValueOnce({ rows: [{ total: '0' }] }); // getPendingRequestsCount combined query
            // Act & Assert - should throw error for missing employee
            await expect(employeeService.getDashboard('emp-123'))
                .rejects.toThrow('Employee not found');
        });
    });
    describe('getEmployeeProfile', () => {
        const mockProfile = {
            id: 'emp-123',
            employeeId: 'EMP001',
            firstName: 'John',
            lastName: 'Doe',
            email: 'john.doe@company.com',
            phone: '+1234567890',
            address: '123 Main St',
            department: 'Engineering',
            position: 'Software Developer',
            employmentType: 'regular',
            hireDate: '2023-01-01',
            baseSalary: 50000,
            status: 'active'
        };
        it('should return employee profile successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [mockProfile] });
            // Act
            const result = await employeeService.getEmployeeProfile('emp-123');
            // Assert
            expect(result).toEqual({
                id: 'emp-123',
                employeeId: 'EMP001',
                firstName: 'John',
                lastName: 'Doe',
                email: 'john.doe@company.com',
                phone: '+1234567890',
                address: '123 Main St',
                department: 'Engineering',
                position: 'Software Developer',
                employmentType: 'regular',
                hireDate: '2023-01-01',
                baseSalary: 50000,
                status: 'active'
            });
        });
        it('should throw error if employee not found', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act & Assert
            await expect(employeeService.getEmployeeProfile('emp-123'))
                .rejects.toThrow('Employee not found');
        });
    });
    describe('updateEmployeeProfile', () => {
        const updateData = {
            phone: '+1234567890',
            address: '123 Main St'
        };
        it('should update employee profile successfully', async () => {
            // Arrange
            const mockClient = {
                query: jest.fn()
                    .mockResolvedValueOnce({ rows: [{ id: 'emp-123' }] }) // check employee exists
                    .mockResolvedValueOnce({ rows: [] }) // update user table
                    .mockResolvedValueOnce(undefined) // COMMIT
                    .mockResolvedValueOnce({ rows: [{ id: 'emp-123', first_name: 'John', last_name: 'Doe', email: 'john.doe@company.com', phone: '+1234567890', address: '123 Main St' }] }), // get updated profile
                release: jest.fn()
            };
            mockPool.connect.mockResolvedValue(mockClient);
            mockPool.query.mockResolvedValueOnce({ rows: [{ id: 'emp-123', first_name: 'John', last_name: 'Doe', email: 'john.doe@company.com', phone: '+1234567890', address: '123 Main St' }] }); // getEmployeeProfile call
            // Act
            const result = await employeeService.updateEmployeeProfile('emp-123', updateData);
            // Assert
            expect(result).toBeDefined();
            expect(mockClient.query).toHaveBeenCalledWith('BEGIN');
            expect(mockClient.query).toHaveBeenCalledWith('COMMIT');
            expect(mockClient.release).toHaveBeenCalled();
        });
        it('should throw error if employee not found', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act & Assert
            await expect(employeeService.updateEmployeeProfile('emp-123', updateData))
                .rejects.toThrow('Employee not found');
        });
    });
    describe('getAttendanceHistory', () => {
        const mockAttendanceHistory = [
            {
                id: 'att-123',
                date: '2024-01-15',
                clockIn: '08:30:00',
                clockOut: '17:30:00',
                totalHours: 8.5,
                status: 'present',
                overtimeHours: 0,
                notes: ''
            }
        ];
        it('should return attendance history successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: mockAttendanceHistory });
            // Act
            const result = await employeeService.getAttendanceHistory('emp-123', '2024-01');
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0]).toEqual({
                id: 'att-123',
                date: '2024-01-15',
                clockIn: '08:30:00',
                clockOut: '17:30:00',
                totalHours: 8.5,
                status: 'present',
                overtimeHours: 0,
                notes: ''
            });
        });
        it('should use current month if month not provided', async () => {
            // Arrange
            // const currentMonth = new Date().toISOString().slice(0, 7); // YYYY-MM format
            mockPool.query.mockResolvedValue({ rows: [] });
            // Act
            await employeeService.getAttendanceHistory('emp-123');
            // Assert
            expect(mockPool.query).toHaveBeenCalledWith(expect.stringContaining('WHERE ar.employee_id = $1'), ['emp-123']);
        });
    });
    describe('getAttendanceSummary', () => {
        const mockSummary = {
            total_days: 22,
            present_days: 20,
            absent_days: 1,
            late_days: 1,
            total_hours: 160,
            average_hours: 8.0,
            overtime_hours: 0
        };
        it('should return attendance summary successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [mockSummary] });
            // Act
            const result = await employeeService.getAttendanceSummary('emp-123', '2024-01');
            // Assert
            expect(result).toEqual({
                totalDays: 22,
                presentDays: 20,
                absentDays: 1,
                lateDays: 1,
                totalHours: 160,
                averageHours: 8.0,
                overtimeHours: 0
            });
        });
    });
    describe('getEmployeeRequests', () => {
        const mockRequests = [
            {
                id: 'req-123',
                type: 'time_correction',
                status: 'pending',
                submittedAt: '2024-01-15T10:00:00Z',
                approverName: null,
                approvedAt: null,
                rejectionReason: '',
                details: {
                    date: '2024-01-15',
                    reason: 'Forgot to clock out'
                }
            }
        ];
        it('should return employee requests successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: [] }) // leave requests
                .mockResolvedValueOnce({ rows: mockRequests }) // time correction requests
                .mockResolvedValueOnce({ rows: [] }); // overtime requests
            // Act
            const result = await employeeService.getEmployeeRequests('emp-123', {
                type: 'time_correction',
                status: 'pending',
                limit: 10,
                offset: 0
            });
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0]).toEqual({
                id: 'req-123',
                type: 'time_correction',
                status: 'pending',
                submittedAt: '2024-01-15T10:00:00Z',
                approverName: null,
                approvedAt: null,
                rejectionReason: '',
                details: {
                    date: '2024-01-15',
                    reason: 'Forgot to clock out'
                }
            });
        });
    });
    describe('getRequestStats', () => {
        const mockStats = {
            total: 10,
            pending: 3,
            approved: 6,
            rejected: 1
        };
        it('should return request stats successfully', async () => {
            // Arrange
            mockPool.query.mockResolvedValue({ rows: [mockStats] });
            // Act
            const result = await employeeService.getRequestStats('emp-123');
            // Assert
            expect(result).toEqual({
                total: 10,
                pending: 3,
                approved: 6,
                rejected: 1
            });
        });
    });
    describe('getLatestPaystub', () => {
        const mockPaystub = {
            id: 'paystub-123',
            payroll_period_id: 'period-123',
            period_name: 'January 2024',
            employee_id: 'emp-123',
            employee_name: 'John Doe',
            position: 'Software Developer',
            department_name: 'Engineering',
            base_salary: 5000,
            total_regular_hours: 160,
            total_overtime_hours: 0,
            total_late_hours: 0,
            paid_leave_hours: 0,
            gross_pay: 5000,
            total_deductions: 1000,
            total_benefits: 500,
            net_pay: 4500,
            late_deductions: 0,
            status: 'processed',
            created_at: '2024-01-31T10:00:00Z'
        };
        it('should return latest paystub successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: [mockPaystub] }) // main payroll record
                .mockResolvedValueOnce({ rows: [] }) // deductions
                .mockResolvedValueOnce({ rows: [] }); // benefits
            // Act
            const result = await employeeService.getLatestPaystub('emp-123');
            // Assert
            expect(result).toEqual({
                id: 'paystub-123',
                periodName: 'January 2024',
                periodStartDate: undefined,
                periodEndDate: undefined,
                employeeId: 'emp-123',
                employeeName: 'John Doe',
                position: 'Software Developer',
                department: 'Engineering',
                baseSalary: 5000,
                totalRegularHours: 160,
                totalOvertimeHours: 0,
                paidLeaveHours: 0,
                grossPay: 5000,
                totalDeductions: 1000,
                totalBenefits: 500,
                netPay: 4500,
                lateDeductions: 0,
                deductions: [],
                benefits: [],
                createdAt: '2024-01-31T10:00:00Z'
            });
        });
    });
    describe('getEmployeePaystubs', () => {
        const mockPaystubs = [
            {
                id: 'paystub-123',
                payroll_period_id: 'period-123',
                period_name: 'January 2024',
                period_start_date: '2024-01-01',
                period_end_date: '2024-01-31',
                employee_id: 'emp-123',
                employee_name: 'John Doe',
                position: 'Software Developer',
                department_id: 'dept-123',
                department_name: 'Engineering',
                base_salary: 5000,
                total_regular_hours: 160,
                total_overtime_hours: 0,
                total_late_hours: 0,
                paid_leave_hours: 0,
                gross_pay: 5000,
                total_deductions: 1000,
                total_benefits: 500,
                net_pay: 4500,
                late_deductions: 0,
                status: 'processed',
                created_at: '2024-01-31T10:00:00Z',
                updated_at: '2024-01-31T10:00:00Z'
            }
        ];
        it('should return employee paystubs successfully', async () => {
            // Arrange
            mockPool.query
                .mockResolvedValueOnce({ rows: mockPaystubs }) // get paystubs
                .mockResolvedValueOnce({ rows: [] }) // deductions for first paystub
                .mockResolvedValueOnce({ rows: [] }); // benefits for first paystub
            // Act
            const result = await employeeService.getEmployeePaystubs('emp-123', {
                page: 1,
                limit: 10,
                year: 2024
            });
            // Assert
            expect(result).toHaveLength(1);
            expect(result[0]).toEqual({
                id: 'paystub-123',
                periodName: 'January 2024',
                periodStartDate: '2024-01-01',
                periodEndDate: '2024-01-31',
                employeeId: 'emp-123',
                employeeName: 'John Doe',
                position: 'Software Developer',
                department: 'Engineering',
                baseSalary: 5000,
                totalRegularHours: 160,
                totalOvertimeHours: 0,
                paidLeaveHours: 0,
                grossPay: 5000,
                totalDeductions: 1000,
                totalBenefits: 500,
                netPay: 4500,
                lateDeductions: 0,
                deductions: [],
                benefits: [],
                createdAt: '2024-01-31T10:00:00Z'
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUva2ltL3RpdG8vc2VydmVyL3Rlc3RzL3VuaXQvc2VydmljZXMvZW1wbG95ZWVTZXJ2aWNlLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFHQSx3QkFBd0I7QUFDeEIsSUFBSSxDQUFDLElBQUksQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBSjFDLG9GQUFpRjtBQUNqRiwyREFBdUQ7QUFLdkQsTUFBTSxXQUFXLEdBQUcsa0JBQThDLENBQUM7QUFFbkUsUUFBUSxDQUFDLGlCQUFpQixFQUFFLEdBQUcsRUFBRTtJQUMvQixJQUFJLGVBQWdDLENBQUM7SUFDckMsSUFBSSxRQUFhLENBQUM7SUFFbEIsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLGVBQWUsR0FBRyxJQUFJLGlDQUFlLEVBQUUsQ0FBQztRQUN4QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFFckIscUJBQXFCO1FBQ3JCLFFBQVEsR0FBRztZQUNULEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2hCLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUM7Z0JBQ25DLEtBQUssRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO2dCQUNoQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTthQUNuQixDQUFDO1NBQ0gsQ0FBQztRQUNGLFdBQVcsQ0FBQyxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDeEMsQ0FBQyxDQUFDLENBQUM7SUFFSCxRQUFRLENBQUMsdUJBQXVCLEVBQUUsR0FBRyxFQUFFO1FBQ3JDLEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxLQUFLLElBQUksRUFBRTtZQUMzRCxVQUFVO1lBQ1YsUUFBUSxDQUFDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQztnQkFDL0IsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLENBQUM7YUFDMUIsQ0FBQyxDQUFDO1lBRUgsTUFBTTtZQUNOLE1BQU0sTUFBTSxHQUFHLE1BQU0sZUFBZSxDQUFDLHFCQUFxQixD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UztnQkFDckIsWUFBWSxFQUFFLFVBQVU7Z0JBQ3hCLFFBQVEsRUFBRSxvQkFBb0I7Z0JBQzlCLFVBQVUsRUFBRSxhQUFhO2dCQUN6QixVQUFVLEVBQUUsSUFBSTtnQkFDaEIsaUJBQWlCLEVBQUUsR0FBRztnQkFDdEIsa0JBQWtCLEVBQUUsQ0FBQztnQkFDckIsY0FBYyxFQUFFLENBQUM7Z0JBQ2pCLFFBQVEsRUFBRSxJQUFJO2dCQUNkLGVBQWUsRUFBRSxJQUFJO2dCQUNyQixhQUFhLEVBQUUsR0FBRztnQkFDbEIsTUFBTSxFQUFFLElBQUk7Z0JBQ1osY0FBYyxFQUFFLENBQUM7Z0JBQ2pCLFVBQVUsRUFBRSxFQUFFO2dCQUNkLFFBQVEsRUFBRSxFQUFFO2dCQUNaLFNBQVMsRUFBRSxzQkFBc0I7YUFDbEMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL2tpbS90aXRvL3NlcnZlci90ZXN0cy91bml0L3NlcnZpY2VzL2VtcGxveWVlU2VydmljZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVtcGxveWVlU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9lbXBsb3llZS9lbXBsb3llZVNlcnZpY2UnO1xuaW1wb3J0IHsgZ2V0UG9vbCB9IGZyb20gJy4uLy4uLy4uL3NyYy9jb25maWcvZGF0YWJhc2UnO1xuXG4vLyBNb2NrIHRoZSBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnLi4vLi4vLi4vc3JjL2NvbmZpZy9kYXRhYmFzZScpO1xuXG5jb25zdCBtb2NrR2V0UG9vbCA9IGdldFBvb2wgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgZ2V0UG9vbD47XG5cbmRlc2NyaWJlKCdFbXBsb3llZVNlcnZpY2UnLCAoKSA9PiB7XG4gIGxldCBlbXBsb3llZVNlcnZpY2U6IEVtcGxveWVlU2VydmljZTtcbiAgbGV0IG1vY2tQb29sOiBhbnk7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgZW1wbG95ZWVTZXJ2aWNlID0gbmV3IEVtcGxveWVlU2VydmljZSgpO1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuXG4gICAgLy8gTW9jayBkYXRhYmFzZSBwb29sXG4gICAgbW9ja1Bvb2wgPSB7XG4gICAgICBxdWVyeTogamVzdC5mbigpLFxuICAgICAgY29ubmVjdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgcXVlcnk6IGplc3QuZm4oKSxcbiAgICAgICAgcmVsZWFzZTogamVzdC5mbigpXG4gICAgICB9KVxuICAgIH07XG4gICAgbW9ja0dldFBvb2wubW9ja1JldHVyblZhbHVlKG1vY2tQb29sKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEVtcGxveWVlSWRCeVVzZXJJZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXBsb3llZSBJRCBmb3IgdmFsaWQgdXNlciBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgcm93czogW3sgaWQ6ICdlbXAtMTIzJyB9XVxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldEVtcGxveWVlSWRCeVVzZXJJZCgndXNlci0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdlbXAtMTIzJyk7XG4gICAgICBleHBlY3QobW9ja1Bvb2wucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Quc3RyaW5nTWF0Y2hpbmcoL1NFTEVDVFxccytpZFxccytGUk9NXFxzK2VtcGxveWVlc1xccytXSEVSRVxccyt1c2VyX2lkXFxzKz1cXHMrXFwkMS8pLFxuICAgICAgICBbJ3VzZXItMTIzJ11cbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBudWxsIGlmIGVtcGxveWVlIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKHsgcm93czogW10gfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldEVtcGxveWVlSWRCeVVzZXJJZCgndXNlci0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0RGFzaGJvYXJkJywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tFbXBsb3llZUluZm8gPSB7XG4gICAgICBpZDogJ2VtcC0xMjMnLFxuICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgIGVtcGxveWVlX2lkOiAnRU1QMDAxJyxcbiAgICAgIGRlcGFydG1lbnQ6ICdFbmdpbmVlcmluZycsXG4gICAgICAgIHBvc2l0aW9uOiAnU29mdHdhcmUgRGV2ZWxvcGVyJyxcbiAgICAgIGhpcmVfZGF0ZTogJzIwMjMtMDEtMDEnLFxuICAgICAgcHJvZmlsZV9waWN0dXJlOiAncHJvZmlsZS5qcGcnXG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tUb2RheUF0dGVuZGFuY2UgPSB7XG4gICAgICB0b2RheV9zdGF0dXM6ICdwcmVzZW50JyxcbiAgICAgIGNsb2NrX2luX3RpbWU6ICcwODozMDowMCcsXG4gICAgICBjbG9ja19vdXRfdGltZTogJzE3OjMwOjAwJyxcbiAgICAgIHRvdGFsX2hvdXJzOiA4LjUsXG4gICAgICBtb3JuaW5nX2Nsb2NrX2luOiAnMDg6MzA6MDAnLFxuICAgICAgbW9ybmluZ19jbG9ja19vdXQ6ICcxMjowMDowMCcsXG4gICAgICBhZnRlcm5vb25fY2xvY2tfaW46ICcxMzowMDowMCcsXG4gICAgICBhZnRlcm5vb25fY2xvY2tfb3V0OiAnMTc6MzA6MDAnLFxuICAgICAgYnJlYWtfc3RhcnQ6ICcxMjowMDowMCcsXG4gICAgICBicmVha19lbmQ6ICcxMzowMDowMCdcbiAgICB9O1xuXG4gICAgY29uc3QgbW9ja01vbnRobHlTdGF0cyA9IHtcbiAgICAgIG1vbnRobHlfcHJlc2VudDogMjAsXG4gICAgICBtb250aGx5X2Fic2VudDogMixcbiAgICAgIG1vbnRobHlfbGF0ZTogM1xuICAgIH07XG5cbiAgICBjb25zdCBtb2NrTGVhdmVCYWxhbmNlID0ge1xuICAgICAgdmFjYXRpb246IDEwLFxuICAgICAgc2ljazogOCxcbiAgICAgIG1hdGVybml0eTogMCxcbiAgICAgIG90aGVyOiAyXG4gICAgfTtcblxuICAgIGNvbnN0IG1vY2tSZWNlbnRBY3Rpdml0eSA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdhY3QtMTIzJyxcbiAgICAgICAgdHlwZTogJ2Nsb2NrX2luJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdDbG9ja2VkIGluIGF0IDA4OjMwJyxcbiAgICAgICAgdGltZXN0YW1wOiAnMjAyNC0wMS0xNVQwODozMDowMFonLFxuICAgICAgICBzdGF0dXM6ICdzdWNjZXNzJ1xuICAgICAgfVxuICAgIF07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXBsb3llZSBkYXNoYm9hcmQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFttb2NrRW1wbG95ZWVJbmZvXSB9KSAvLyBnZXRFbXBsb3llZUluZm9cbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFttb2NrVG9kYXlBdHRlbmRhbmNlXSB9KSAvLyBnZXRUb2RheUF0dGVuZGFuY2VTdGF0dXNcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFttb2NrTW9udGhseVN0YXRzXSB9KSAvLyBnZXRNb250aGx5QXR0ZW5kYW5jZVN0YXRzXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyByb3dzOiBbbW9ja0xlYXZlQmFsYW5jZV0gfSkgLy8gZ2V0TGVhdmVCYWxhbmNlXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyByb3dzOiBtb2NrUmVjZW50QWN0aXZpdHkgfSkgLy8gZ2V0UmVjZW50QWN0aXZpdHlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFt7IHRvdGFsOiAnMycgfV0gfSkgLy8gZ2V0UGVuZGluZ1JlcXVlc3RzQ291bnRcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pOyAvLyBnZXRVcGNvbWluZ0V2ZW50c1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXREYXNoYm9hcmQoJ2VtcC0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgZW1wbG95ZWU6IHtcbiAgICAgICAgICBpZDogJ2VtcC0xMjMnLFxuICAgICAgICAgIG5hbWU6ICdKb2huIERvZScsXG4gICAgICAgICAgZW1wbG95ZWVJZDogJ0VNUDAwMScsXG4gICAgICAgICAgZGVwYXJ0bWVudDogJ0VuZ2luZWVyaW5nJyxcbiAgICAgICAgICBwb3NpdGlvbjogJ1NvZnR3YXJlIERldmVsb3BlcicsXG4gICAgICAgICAgaGlyZURhdGU6ICcyMDIzLTAxLTAxJyxcbiAgICAgICAgICBwcm9maWxlUGljdHVyZTogJ3Byb2ZpbGUuanBnJ1xuICAgICAgICB9LFxuICAgICAgICBhdHRlbmRhbmNlOiB7XG4gICAgICAgICAgdG9kYXlTdGF0dXM6ICdwcmVzZW50JyxcbiAgICAgICAgICBjbG9ja0luVGltZTogJzA4OjMwOjAwJyxcbiAgICAgICAgICBjbG9ja091dFRpbWU6ICcxNzozMDowMCcsXG4gICAgICAgICAgdG90YWxIb3VyczogOC41LFxuICAgICAgICAgIG1vcm5pbmdDbG9ja0luOiAnMDg6MzA6MDAnLFxuICAgICAgICAgIG1vcm5pbmdDbG9ja091dDogJzEyOjAwOjAwJyxcbiAgICAgICAgICBhZnRlcm5vb25DbG9ja0luOiAnMTM6MDA6MDAnLFxuICAgICAgICAgIGFmdGVybm9vbkNsb2NrT3V0OiAnMTc6MzA6MDAnLFxuICAgICAgICAgIGJyZWFrU3RhcnQ6ICcxMjowMDowMCcsXG4gICAgICAgICAgYnJlYWtFbmQ6ICcxMzowMDowMCcsXG4gICAgICAgICAgbW9udGhseVByZXNlbnQ6IDIwLFxuICAgICAgICAgIG1vbnRobHlBYnNlbnQ6IDIsXG4gICAgICAgICAgbW9udGhseUxhdGU6IDNcbiAgICAgICAgfSxcbiAgICAgICAgbGVhdmVCYWxhbmNlOiB7XG4gICAgICAgICAgdmFjYXRpb246IDEwLFxuICAgICAgICAgIHNpY2s6IDgsXG4gICAgICAgICAgbWF0ZXJuaXR5OiAwLFxuICAgICAgICAgIG90aGVyOiAyXG4gICAgICAgIH0sXG4gICAgICAgIHJlY2VudEFjdGl2aXR5OiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdhY3QtMTIzJyxcbiAgICAgICAgICAgIHR5cGU6ICdjbG9ja19pbicsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0Nsb2NrZWQgaW4gYXQgMDg6MzAnLFxuICAgICAgICAgICAgdGltZXN0YW1wOiAnMjAyNC0wMS0xNVQwODozMDowMFonLFxuICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcydcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHBlbmRpbmdSZXF1ZXN0czogMyxcbiAgICAgICAgdXBjb21pbmdFdmVudHM6IFtdXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG1pc3NpbmcgZW1wbG95ZWUgaW5mbyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pIC8vIGdldEVtcGxveWVlSW5mbyAtIG5vIGVtcGxveWVlIGZvdW5kXG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyByb3dzOiBbXSB9KSAvLyBnZXRUb2RheUF0dGVuZGFuY2VTdGF0dXNcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pIC8vIGdldE1vbnRobHlBdHRlbmRhbmNlU3RhdHNcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pIC8vIGdldExlYXZlQmFsYW5jZVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSkgLy8gZ2V0UmVjZW50QWN0aXZpdHlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFt7IHRvdGFsOiAnMCcgfV0gfSkgLy8gZ2V0UGVuZGluZ1JlcXVlc3RzQ291bnRcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFtdIH0pOyAvLyBnZXRVcGNvbWluZ0V2ZW50c1xuXG4gICAgICAvLyBNb2NrIHRoZSBjb21iaW5lZCBxdWVyeSBmb3IgZ2V0UGVuZGluZ1JlcXVlc3RzQ291bnRcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFt7IHRvdGFsOiAnMCcgfV0gfSk7IC8vIGdldFBlbmRpbmdSZXF1ZXN0c0NvdW50IGNvbWJpbmVkIHF1ZXJ5XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydCAtIHNob3VsZCB0aHJvdyBlcnJvciBmb3IgbWlzc2luZyBlbXBsb3llZVxuICAgICAgYXdhaXQgZXhwZWN0KGVtcGxveWVlU2VydmljZS5nZXREYXNoYm9hcmQoJ2VtcC0xMjMnKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnRW1wbG95ZWUgbm90IGZvdW5kJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRFbXBsb3llZVByb2ZpbGUnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1Byb2ZpbGUgPSB7XG4gICAgICBpZDogJ2VtcC0xMjMnLFxuICAgICAgZW1wbG95ZWVJZDogJ0VNUDAwMScsXG4gICAgICBmaXJzdE5hbWU6ICdKb2huJyxcbiAgICAgIGxhc3ROYW1lOiAnRG9lJyxcbiAgICAgIGVtYWlsOiAnam9obi5kb2VAY29tcGFueS5jb20nLFxuICAgICAgcGhvbmU6ICcrMTIzNDU2Nzg5MCcsXG4gICAgICBhZGRyZXNzOiAnMTIzIE1haW4gU3QnLFxuICAgICAgZGVwYXJ0bWVudDogJ0VuZ2luZWVyaW5nJyxcbiAgICAgIHBvc2l0aW9uOiAnU29mdHdhcmUgRGV2ZWxvcGVyJyxcbiAgICAgIGVtcGxveW1lbnRUeXBlOiAncmVndWxhcicsXG4gICAgICBoaXJlRGF0ZTogJzIwMjMtMDEtMDEnLFxuICAgICAgYmFzZVNhbGFyeTogNTAwMDAsXG4gICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgfTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcGxveWVlIHByb2ZpbGUgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbbW9ja1Byb2ZpbGVdIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRFbXBsb3llZVByb2ZpbGUoJ2VtcC0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaWQ6ICdlbXAtMTIzJyxcbiAgICAgICAgZW1wbG95ZWVJZDogJ0VNUDAwMScsXG4gICAgICAgIGZpcnN0TmFtZTogJ0pvaG4nLFxuICAgICAgICBsYXN0TmFtZTogJ0RvZScsXG4gICAgICAgIGVtYWlsOiAnam9obi5kb2VAY29tcGFueS5jb20nLFxuICAgICAgICBwaG9uZTogJysxMjM0NTY3ODkwJyxcbiAgICAgICAgYWRkcmVzczogJzEyMyBNYWluIFN0JyxcbiAgICAgICAgZGVwYXJ0bWVudDogJ0VuZ2luZWVyaW5nJyxcbiAgICAgICAgcG9zaXRpb246ICdTb2Z0d2FyZSBEZXZlbG9wZXInLFxuICAgICAgICBlbXBsb3ltZW50VHlwZTogJ3JlZ3VsYXInLFxuICAgICAgICBoaXJlRGF0ZTogJzIwMjMtMDEtMDEnLFxuICAgICAgICBiYXNlU2FsYXJ5OiA1MDAwMCxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGlmIGVtcGxveWVlIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKHsgcm93czogW10gfSk7XG5cbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgYXdhaXQgZXhwZWN0KGVtcGxveWVlU2VydmljZS5nZXRFbXBsb3llZVByb2ZpbGUoJ2VtcC0xMjMnKSlcbiAgICAgICAgLnJlamVjdHMudG9UaHJvdygnRW1wbG95ZWUgbm90IGZvdW5kJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCd1cGRhdGVFbXBsb3llZVByb2ZpbGUnLCAoKSA9PiB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHtcbiAgICAgIHBob25lOiAnKzEyMzQ1Njc4OTAnLFxuICAgICAgYWRkcmVzczogJzEyMyBNYWluIFN0J1xuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBlbXBsb3llZSBwcm9maWxlIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSB7XG4gICAgICAgIHF1ZXJ5OiBqZXN0LmZuKClcbiAgICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW3sgaWQ6ICdlbXAtMTIzJyB9XSB9KSAvLyBjaGVjayBlbXBsb3llZSBleGlzdHNcbiAgICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSkgLy8gdXBkYXRlIHVzZXIgdGFibGVcbiAgICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHVuZGVmaW5lZCkgLy8gQ09NTUlUXG4gICAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFt7IGlkOiAnZW1wLTEyMycsIGZpcnN0X25hbWU6ICdKb2huJywgbGFzdF9uYW1lOiAnRG9lJywgZW1haWw6ICdqb2huLmRvZUBjb21wYW55LmNvbScsIHBob25lOiAnKzEyMzQ1Njc4OTAnLCBhZGRyZXNzOiAnMTIzIE1haW4gU3QnIH1dIH0pLCAvLyBnZXQgdXBkYXRlZCBwcm9maWxlXG4gICAgICAgIHJlbGVhc2U6IGplc3QuZm4oKVxuICAgICAgfTtcblxuICAgICAgbW9ja1Bvb2wuY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xpZW50KTtcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFt7IGlkOiAnZW1wLTEyMycsIGZpcnN0X25hbWU6ICdKb2huJywgbGFzdF9uYW1lOiAnRG9lJywgZW1haWw6ICdqb2huLmRvZUBjb21wYW55LmNvbScsIHBob25lOiAnKzEyMzQ1Njc4OTAnLCBhZGRyZXNzOiAnMTIzIE1haW4gU3QnIH1dIH0pOyAvLyBnZXRFbXBsb3llZVByb2ZpbGUgY2FsbFxuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS51cGRhdGVFbXBsb3llZVByb2ZpbGUoJ2VtcC0xMjMnLCB1cGRhdGVEYXRhKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1vY2tDbGllbnQucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdCRUdJTicpO1xuICAgICAgZXhwZWN0KG1vY2tDbGllbnQucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdDT01NSVQnKTtcbiAgICAgIGV4cGVjdChtb2NrQ2xpZW50LnJlbGVhc2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgaWYgZW1wbG95ZWUgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbXSB9KTtcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBhd2FpdCBleHBlY3QoZW1wbG95ZWVTZXJ2aWNlLnVwZGF0ZUVtcGxveWVlUHJvZmlsZSgnZW1wLTEyMycsIHVwZGF0ZURhdGEpKVxuICAgICAgICAucmVqZWN0cy50b1Rocm93KCdFbXBsb3llZSBub3QgZm91bmQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldEF0dGVuZGFuY2VIaXN0b3J5JywgKCkgPT4ge1xuICAgIGNvbnN0IG1vY2tBdHRlbmRhbmNlSGlzdG9yeSA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICdhdHQtMTIzJyxcbiAgICAgICAgZGF0ZTogJzIwMjQtMDEtMTUnLFxuICAgICAgICBjbG9ja0luOiAnMDg6MzA6MDAnLFxuICAgICAgICBjbG9ja091dDogJzE3OjMwOjAwJyxcbiAgICAgICAgdG90YWxIb3VyczogOC41LFxuICAgICAgICBzdGF0dXM6ICdwcmVzZW50JyxcbiAgICAgICAgb3ZlcnRpbWVIb3VyczogMCxcbiAgICAgICAgbm90ZXM6ICcnXG4gICAgICB9XG4gICAgXTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGF0dGVuZGFuY2UgaGlzdG9yeSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHJvd3M6IG1vY2tBdHRlbmRhbmNlSGlzdG9yeSB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBlbXBsb3llZVNlcnZpY2UuZ2V0QXR0ZW5kYW5jZUhpc3RvcnkoJ2VtcC0xMjMnLCAnMjAyNC0wMScpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0pLnRvRXF1YWwoe1xuICAgICAgICBpZDogJ2F0dC0xMjMnLFxuICAgICAgICBkYXRlOiAnMjAyNC0wMS0xNScsXG4gICAgICAgIGNsb2NrSW46ICcwODozMDowMCcsXG4gICAgICAgIGNsb2NrT3V0OiAnMTc6MzA6MDAnLFxuICAgICAgICB0b3RhbEhvdXJzOiA4LjUsXG4gICAgICAgIHN0YXR1czogJ3ByZXNlbnQnLFxuICAgICAgICBvdmVydGltZUhvdXJzOiAwLFxuICAgICAgICBub3RlczogJydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB1c2UgY3VycmVudCBtb250aCBpZiBtb250aCBub3QgcHJvdmlkZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICAvLyBjb25zdCBjdXJyZW50TW9udGggPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgNyk7IC8vIFlZWVktTU0gZm9ybWF0XG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHJvd3M6IFtdIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRBdHRlbmRhbmNlSGlzdG9yeSgnZW1wLTEyMycpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUG9vbC5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5zdHJpbmdDb250YWluaW5nKCdXSEVSRSBhci5lbXBsb3llZV9pZCA9ICQxJyksXG4gICAgICAgIFsnZW1wLTEyMyddXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0QXR0ZW5kYW5jZVN1bW1hcnknLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1N1bW1hcnkgPSB7XG4gICAgICB0b3RhbF9kYXlzOiAyMixcbiAgICAgIHByZXNlbnRfZGF5czogMjAsXG4gICAgICBhYnNlbnRfZGF5czogMSxcbiAgICAgIGxhdGVfZGF5czogMSxcbiAgICAgIHRvdGFsX2hvdXJzOiAxNjAsXG4gICAgICBhdmVyYWdlX2hvdXJzOiA4LjAsXG4gICAgICBvdmVydGltZV9ob3VyczogMFxuICAgIH07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBhdHRlbmRhbmNlIHN1bW1hcnkgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1Jlc29sdmVkVmFsdWUoeyByb3dzOiBbbW9ja1N1bW1hcnldIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRBdHRlbmRhbmNlU3VtbWFyeSgnZW1wLTEyMycsICcyMDI0LTAxJyk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHRvdGFsRGF5czogMjIsXG4gICAgICAgIHByZXNlbnREYXlzOiAyMCxcbiAgICAgICAgYWJzZW50RGF5czogMSxcbiAgICAgICAgbGF0ZURheXM6IDEsXG4gICAgICAgIHRvdGFsSG91cnM6IDE2MCxcbiAgICAgICAgYXZlcmFnZUhvdXJzOiA4LjAsXG4gICAgICAgIG92ZXJ0aW1lSG91cnM6IDBcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0RW1wbG95ZWVSZXF1ZXN0cycsICgpID0+IHtcbiAgICBjb25zdCBtb2NrUmVxdWVzdHMgPSBbXG4gICAgICB7XG4gICAgICAgIGlkOiAncmVxLTEyMycsXG4gICAgICAgIHR5cGU6ICd0aW1lX2NvcnJlY3Rpb24nLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgc3VibWl0dGVkQXQ6ICcyMDI0LTAxLTE1VDEwOjAwOjAwWicsXG4gICAgICAgIGFwcHJvdmVyTmFtZTogbnVsbCxcbiAgICAgICAgYXBwcm92ZWRBdDogbnVsbCxcbiAgICAgICAgcmVqZWN0aW9uUmVhc29uOiAnJyxcbiAgICAgICAgZGV0YWlsczoge1xuICAgICAgICAgIGRhdGU6ICcyMDI0LTAxLTE1JyxcbiAgICAgICAgICByZWFzb246ICdGb3Jnb3QgdG8gY2xvY2sgb3V0J1xuICAgICAgICB9XG4gICAgICB9XG4gICAgXTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGVtcGxveWVlIHJlcXVlc3RzIHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tQb29sLnF1ZXJ5XG4gICAgICAgIC5tb2NrUmVzb2x2ZWRWYWx1ZU9uY2UoeyByb3dzOiBbXSB9KSAvLyBsZWF2ZSByZXF1ZXN0c1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogbW9ja1JlcXVlc3RzIH0pIC8vIHRpbWUgY29ycmVjdGlvbiByZXF1ZXN0c1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSk7IC8vIG92ZXJ0aW1lIHJlcXVlc3RzXG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldEVtcGxveWVlUmVxdWVzdHMoJ2VtcC0xMjMnLCB7XG4gICAgICAgIHR5cGU6ICd0aW1lX2NvcnJlY3Rpb24nLFxuICAgICAgICBzdGF0dXM6ICdwZW5kaW5nJyxcbiAgICAgICAgbGltaXQ6IDEwLFxuICAgICAgICBvZmZzZXQ6IDBcbiAgICAgIH0pO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChyZXN1bHRbMF0pLnRvRXF1YWwoe1xuICAgICAgICBpZDogJ3JlcS0xMjMnLFxuICAgICAgICB0eXBlOiAndGltZV9jb3JyZWN0aW9uJyxcbiAgICAgICAgc3RhdHVzOiAncGVuZGluZycsXG4gICAgICAgIHN1Ym1pdHRlZEF0OiAnMjAyNC0wMS0xNVQxMDowMDowMFonLFxuICAgICAgICBhcHByb3Zlck5hbWU6IG51bGwsXG4gICAgICAgIGFwcHJvdmVkQXQ6IG51bGwsXG4gICAgICAgIHJlamVjdGlvblJlYXNvbjogJycsXG4gICAgICAgIGRldGFpbHM6IHtcbiAgICAgICAgICBkYXRlOiAnMjAyNC0wMS0xNScsXG4gICAgICAgICAgcmVhc29uOiAnRm9yZ290IHRvIGNsb2NrIG91dCdcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRSZXF1ZXN0U3RhdHMnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1N0YXRzID0ge1xuICAgICAgdG90YWw6IDEwLFxuICAgICAgcGVuZGluZzogMyxcbiAgICAgIGFwcHJvdmVkOiA2LFxuICAgICAgcmVqZWN0ZWQ6IDFcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gcmVxdWVzdCBzdGF0cyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHJvd3M6IFttb2NrU3RhdHNdIH0pO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGVtcGxveWVlU2VydmljZS5nZXRSZXF1ZXN0U3RhdHMoJ2VtcC0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdG90YWw6IDEwLFxuICAgICAgICBwZW5kaW5nOiAzLFxuICAgICAgICBhcHByb3ZlZDogNixcbiAgICAgICAgcmVqZWN0ZWQ6IDFcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0TGF0ZXN0UGF5c3R1YicsICgpID0+IHtcbiAgICBjb25zdCBtb2NrUGF5c3R1YiA9IHtcbiAgICAgIGlkOiAncGF5c3R1Yi0xMjMnLFxuICAgICAgcGF5cm9sbF9wZXJpb2RfaWQ6ICdwZXJpb2QtMTIzJyxcbiAgICAgIHBlcmlvZF9uYW1lOiAnSmFudWFyeSAyMDI0JyxcbiAgICAgIGVtcGxveWVlX2lkOiAnZW1wLTEyMycsXG4gICAgICBlbXBsb3llZV9uYW1lOiAnSm9obiBEb2UnLFxuICAgICAgcG9zaXRpb246ICdTb2Z0d2FyZSBEZXZlbG9wZXInLFxuICAgICAgZGVwYXJ0bWVudF9uYW1lOiAnRW5naW5lZXJpbmcnLFxuICAgICAgYmFzZV9zYWxhcnk6IDUwMDAsXG4gICAgICB0b3RhbF9yZWd1bGFyX2hvdXJzOiAxNjAsXG4gICAgICB0b3RhbF9vdmVydGltZV9ob3VyczogMCxcbiAgICAgIHRvdGFsX2xhdGVfaG91cnM6IDAsXG4gICAgICBwYWlkX2xlYXZlX2hvdXJzOiAwLFxuICAgICAgZ3Jvc3NfcGF5OiA1MDAwLFxuICAgICAgdG90YWxfZGVkdWN0aW9uczogMTAwMCxcbiAgICAgIHRvdGFsX2JlbmVmaXRzOiA1MDAsXG4gICAgICBuZXRfcGF5OiA0NTAwLFxuICAgICAgbGF0ZV9kZWR1Y3Rpb25zOiAwLFxuICAgICAgc3RhdHVzOiAncHJvY2Vzc2VkJyxcbiAgICAgIGNyZWF0ZWRfYXQ6ICcyMDI0LTAxLTMxVDEwOjAwOjAwWidcbiAgICB9O1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gbGF0ZXN0IHBheXN0dWIgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1Bvb2wucXVlcnlcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlT25jZSh7IHJvd3M6IFttb2NrUGF5c3R1Yl0gfSkgLy8gbWFpbiBwYXlyb2xsIHJlY29yZFxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSkgLy8gZGVkdWN0aW9uc1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSk7IC8vIGJlbmVmaXRzXG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldExhdGVzdFBheXN0dWIoJ2VtcC0xMjMnKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgaWQ6ICdwYXlzdHViLTEyMycsXG4gICAgICAgIHBlcmlvZE5hbWU6ICdKYW51YXJ5IDIwMjQnLFxuICAgICAgICBwZXJpb2RTdGFydERhdGU6IHVuZGVmaW5lZCxcbiAgICAgICAgcGVyaW9kRW5kRGF0ZTogdW5kZWZpbmVkLFxuICAgICAgICBlbXBsb3llZUlkOiAnZW1wLTEyMycsXG4gICAgICAgIGVtcGxveWVlTmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgcG9zaXRpb246ICdTb2Z0d2FyZSBEZXZlbG9wZXInLFxuICAgICAgICBkZXBhcnRtZW50OiAnRW5naW5lZXJpbmcnLFxuICAgICAgICBiYXNlU2FsYXJ5OiA1MDAwLFxuICAgICAgICB0b3RhbFJlZ3VsYXJIb3VyczogMTYwLFxuICAgICAgICB0b3RhbE92ZXJ0aW1lSG91cnM6IDAsXG4gICAgICAgIHBhaWRMZWF2ZUhvdXJzOiAwLFxuICAgICAgICBncm9zc1BheTogNTAwMCxcbiAgICAgICAgdG90YWxEZWR1Y3Rpb25zOiAxMDAwLFxuICAgICAgICB0b3RhbEJlbmVmaXRzOiA1MDAsXG4gICAgICAgIG5ldFBheTogNDUwMCxcbiAgICAgICAgbGF0ZURlZHVjdGlvbnM6IDAsXG4gICAgICAgIGRlZHVjdGlvbnM6IFtdLFxuICAgICAgICBiZW5lZml0czogW10sXG4gICAgICAgIGNyZWF0ZWRBdDogJzIwMjQtMDEtMzFUMTA6MDA6MDBaJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG5cbiAgZGVzY3JpYmUoJ2dldEVtcGxveWVlUGF5c3R1YnMnLCAoKSA9PiB7XG4gICAgY29uc3QgbW9ja1BheXN0dWJzID0gW1xuICAgICAge1xuICAgICAgICBpZDogJ3BheXN0dWItMTIzJyxcbiAgICAgICAgcGF5cm9sbF9wZXJpb2RfaWQ6ICdwZXJpb2QtMTIzJyxcbiAgICAgICAgcGVyaW9kX25hbWU6ICdKYW51YXJ5IDIwMjQnLFxuICAgICAgICBwZXJpb2Rfc3RhcnRfZGF0ZTogJzIwMjQtMDEtMDEnLFxuICAgICAgICBwZXJpb2RfZW5kX2RhdGU6ICcyMDI0LTAxLTMxJyxcbiAgICAgICAgZW1wbG95ZWVfaWQ6ICdlbXAtMTIzJyxcbiAgICAgICAgZW1wbG95ZWVfbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgcG9zaXRpb246ICdTb2Z0d2FyZSBEZXZlbG9wZXInLFxuICAgICAgICBkZXBhcnRtZW50X2lkOiAnZGVwdC0xMjMnLFxuICAgICAgICBkZXBhcnRtZW50X25hbWU6ICdFbmdpbmVlcmluZycsXG4gICAgICAgIGJhc2Vfc2FsYXJ5OiA1MDAwLFxuICAgICAgICB0b3RhbF9yZWd1bGFyX2hvdXJzOiAxNjAsXG4gICAgICAgIHRvdGFsX292ZXJ0aW1lX2hvdXJzOiAwLFxuICAgICAgICB0b3RhbF9sYXRlX2hvdXJzOiAwLFxuICAgICAgICBwYWlkX2xlYXZlX2hvdXJzOiAwLFxuICAgICAgICBncm9zc19wYXk6IDUwMDAsXG4gICAgICAgIHRvdGFsX2RlZHVjdGlvbnM6IDEwMDAsXG4gICAgICAgIHRvdGFsX2JlbmVmaXRzOiA1MDAsXG4gICAgICAgIG5ldF9wYXk6IDQ1MDAsXG4gICAgICAgIGxhdGVfZGVkdWN0aW9uczogMCxcbiAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2VkJyxcbiAgICAgICAgY3JlYXRlZF9hdDogJzIwMjQtMDEtMzFUMTA6MDA6MDBaJyxcbiAgICAgICAgdXBkYXRlZF9hdDogJzIwMjQtMDEtMzFUMTA6MDA6MDBaJ1xuICAgICAgfVxuICAgIF07XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBlbXBsb3llZSBwYXlzdHVicyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUG9vbC5xdWVyeVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogbW9ja1BheXN0dWJzIH0pIC8vIGdldCBwYXlzdHVic1xuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSkgLy8gZGVkdWN0aW9ucyBmb3IgZmlyc3QgcGF5c3R1YlxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWVPbmNlKHsgcm93czogW10gfSk7IC8vIGJlbmVmaXRzIGZvciBmaXJzdCBwYXlzdHViXG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZW1wbG95ZWVTZXJ2aWNlLmdldEVtcGxveWVlUGF5c3R1YnMoJ2VtcC0xMjMnLCB7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgeWVhcjogMjAyNFxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHJlc3VsdFswXSkudG9FcXVhbCh7XG4gICAgICAgIGlkOiAncGF5c3R1Yi0xMjMnLFxuICAgICAgICBwZXJpb2ROYW1lOiAnSmFudWFyeSAyMDI0JyxcbiAgICAgICAgcGVyaW9kU3RhcnREYXRlOiAnMjAyNC0wMS0wMScsXG4gICAgICAgIHBlcmlvZEVuZERhdGU6ICcyMDI0LTAxLTMxJyxcbiAgICAgICAgZW1wbG95ZWVJZDogJ2VtcC0xMjMnLFxuICAgICAgICBlbXBsb3llZU5hbWU6ICdKb2huIERvZScsXG4gICAgICAgIHBvc2l0aW9uOiAnU29mdHdhcmUgRGV2ZWxvcGVyJyxcbiAgICAgICAgZGVwYXJ0bWVudDogJ0VuZ2luZWVyaW5nJyxcbiAgICAgICAgYmFzZVNhbGFyeTogNTAwMCxcbiAgICAgICAgdG90YWxSZWd1bGFySG91cnM6IDE2MCxcbiAgICAgICAgdG90YWxPdmVydGltZUhvdXJzOiAwLFxuICAgICAgICBwYWlkTGVhdmVIb3VyczogMCxcbiAgICAgICAgZ3Jvc3NQYXk6IDUwMDAsXG4gICAgICAgIHRvdGFsRGVkdWN0aW9uczogMTAwMCxcbiAgICAgICAgdG90YWxCZW5lZml0czogNTAwLFxuICAgICAgICBuZXRQYXk6IDQ1MDAsXG4gICAgICAgIGxhdGVEZWR1Y3Rpb25zOiAwLFxuICAgICAgICBkZWR1Y3Rpb25zOiBbXSxcbiAgICAgICAgYmVuZWZpdHM6IFtdLFxuICAgICAgICBjcmVhdGVkQXQ6ICcyMDI0LTAxLTMxVDEwOjAwOjAwWidcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==