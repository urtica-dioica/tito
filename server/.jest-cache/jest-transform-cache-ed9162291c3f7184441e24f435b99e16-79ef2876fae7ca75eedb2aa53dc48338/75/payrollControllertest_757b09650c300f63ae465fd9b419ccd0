30efff416c2c0b112da53d53c491166c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock the dependencies
jest.mock('../../../src/services/payroll/payrollService');
jest.mock('../../../src/services/payroll/autoPayrollService');
jest.mock('../../../src/utils/types/express');
const payrollController_1 = require("../../../src/controllers/payroll/payrollController");
const payrollService_1 = require("../../../src/services/payroll/payrollService");
const express_1 = require("../../../src/utils/types/express");
const mockPayrollService = payrollService_1.payrollService;
const mockGetRequestId = express_1.getRequestId;
describe('PayrollController', () => {
    let payrollController;
    let mockRequest;
    let mockResponse;
    beforeEach(() => {
        payrollController = new payrollController_1.PayrollController();
        jest.clearAllMocks();
        // Mock request object
        mockRequest = {
            body: {},
            params: {},
            query: {},
            user: {
                userId: 'hr-user-123',
                email: 'hr@example.com',
                role: 'hr',
                tokenVersion: 1
            }
        };
        // Mock response object
        mockResponse = {
            status: jest.fn().mockReturnThis(),
            json: jest.fn().mockReturnThis(),
            download: jest.fn().mockReturnThis()
        };
        // Mock getRequestId
        mockGetRequestId.mockReturnValue('test-request-123');
    });
    describe('createPayrollPeriod', () => {
        it('should create payroll period successfully', async () => {
            // Arrange
            mockRequest.body = {
                period_name: 'January 2024',
                start_date: '2024-01-01',
                end_date: '2024-01-31',
                status: 'draft'
            };
            const mockPayrollPeriod = {
                id: 'period-123',
                period_name: 'January 2024',
                start_date: new Date('2024-01-01'),
                end_date: new Date('2024-01-31'),
                status: 'draft',
                created_at: new Date(),
                updated_at: new Date()
            };
            mockPayrollService.createPayrollPeriod.mockResolvedValue(mockPayrollPeriod);
            // Act
            await payrollController.createPayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.createPayrollPeriod).toHaveBeenCalledWith({
                period_name: 'January 2024',
                start_date: new Date('2024-01-01'),
                end_date: new Date('2024-01-31'),
                status: 'draft'
            });
            expect(mockResponse.status).toHaveBeenCalledWith(201);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll period created successfully',
                data: mockPayrollPeriod,
                requestId: 'test-request-123'
            });
        });
        it('should return 400 for missing required fields', async () => {
            // Arrange
            mockRequest.body = {
                period_name: 'January 2024'
                // start_date and end_date missing
            };
            // Act
            await payrollController.createPayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(400);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Period name, start date, and end date are required',
                requestId: 'test-request-123'
            });
            expect(mockPayrollService.createPayrollPeriod).not.toHaveBeenCalled();
        });
        it('should handle service errors', async () => {
            // Arrange
            mockRequest.body = {
                period_name: 'January 2024',
                start_date: '2024-01-01',
                end_date: '2024-01-31'
            };
            mockPayrollService.createPayrollPeriod.mockRejectedValue(new Error('Database error'));
            // Act
            await payrollController.createPayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(500);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Failed to create payroll period',
                requestId: 'test-request-123'
            });
        });
    });
    describe('getPayrollPeriods', () => {
        it('should get payroll periods successfully', async () => {
            // Arrange
            mockRequest.query = {
                page: '1',
                limit: '10',
                status: 'active'
            };
            const mockPeriods = [
                {
                    id: 'period-1',
                    period_name: 'January 2024',
                    start_date: new Date('2024-01-01'),
                    end_date: new Date('2024-01-31'),
                    status: 'processing',
                    created_at: new Date(),
                    updated_at: new Date()
                },
                {
                    id: 'period-2',
                    period_name: 'February 2024',
                    start_date: new Date('2024-02-01'),
                    end_date: new Date('2024-02-29'),
                    status: 'processing',
                    created_at: new Date(),
                    updated_at: new Date()
                }
            ];
            mockPayrollService.getPayrollPeriods.mockResolvedValue({
                periods: mockPeriods,
                total: 2
            });
            // Act
            await payrollController.getPayrollPeriods(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.getPayrollPeriods).toHaveBeenCalledWith({
                page: 1,
                limit: 10,
                status: 'active'
            });
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll periods retrieved successfully',
                data: {
                    periods: mockPeriods,
                    pagination: {
                        page: 1,
                        limit: 10,
                        total: 2,
                        totalPages: 1
                    }
                },
                requestId: 'test-request-123'
            });
        });
        it('should handle service errors', async () => {
            // Arrange
            mockRequest.query = {};
            mockPayrollService.getPayrollPeriods.mockRejectedValue(new Error('Database error'));
            // Act
            await payrollController.getPayrollPeriods(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(500);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Failed to retrieve payroll periods',
                requestId: 'test-request-123'
            });
        });
    });
    describe('getPayrollPeriod', () => {
        it('should get payroll period successfully', async () => {
            // Arrange
            mockRequest.params = {
                id: 'period-123'
            };
            const mockPeriod = {
                id: 'period-123',
                period_name: 'January 2024',
                start_date: new Date('2024-01-01'),
                end_date: new Date('2024-01-31'),
                status: 'processing',
                created_at: new Date(),
                updated_at: new Date()
            };
            mockPayrollService.getPayrollPeriod.mockResolvedValue(mockPeriod);
            // Act
            await payrollController.getPayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.getPayrollPeriod).toHaveBeenCalledWith('period-123');
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll period retrieved successfully',
                data: mockPeriod,
                requestId: 'test-request-123'
            });
        });
        it('should return 404 if period not found', async () => {
            // Arrange
            mockRequest.params = {
                id: 'nonexistent-period'
            };
            mockPayrollService.getPayrollPeriod.mockResolvedValue(null);
            // Act
            await payrollController.getPayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(404);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Payroll period not found',
                requestId: 'test-request-123'
            });
        });
    });
    describe('updatePayrollPeriod', () => {
        it('should update payroll period successfully', async () => {
            // Arrange
            mockRequest.params = {
                id: 'period-123'
            };
            mockRequest.body = {
                period_name: 'Updated January 2024',
                status: 'active'
            };
            const mockUpdatedPeriod = {
                id: 'period-123',
                period_name: 'Updated January 2024',
                start_date: new Date('2024-01-01'),
                end_date: new Date('2024-01-31'),
                status: 'processing',
                created_at: new Date(),
                updated_at: new Date()
            };
            mockPayrollService.updatePayrollPeriod.mockResolvedValue(mockUpdatedPeriod);
            // Act
            await payrollController.updatePayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.updatePayrollPeriod).toHaveBeenCalledWith('period-123', {
                period_name: 'Updated January 2024',
                status: 'active'
            });
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll period updated successfully',
                data: mockUpdatedPeriod,
                requestId: 'test-request-123'
            });
        });
        it('should return 404 if period not found', async () => {
            // Arrange
            mockRequest.params = {
                id: 'nonexistent-period'
            };
            mockRequest.body = {
                period_name: 'Updated Period'
            };
            mockPayrollService.updatePayrollPeriod.mockResolvedValue(null);
            // Act
            await payrollController.updatePayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(404);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Payroll period not found',
                requestId: 'test-request-123'
            });
        });
    });
    describe('deletePayrollPeriod', () => {
        it('should delete payroll period successfully', async () => {
            // Arrange
            mockRequest.params = {
                id: 'period-123'
            };
            mockPayrollService.deletePayrollPeriod.mockResolvedValue(true);
            // Act
            await payrollController.deletePayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.deletePayrollPeriod).toHaveBeenCalledWith('period-123');
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll period deleted successfully',
                requestId: 'test-request-123'
            });
        });
        it('should return 404 if period not found', async () => {
            // Arrange
            mockRequest.params = {
                id: 'nonexistent-period'
            };
            mockPayrollService.deletePayrollPeriod.mockResolvedValue(false);
            // Act
            await payrollController.deletePayrollPeriod(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(404);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Payroll period not found',
                requestId: 'test-request-123'
            });
        });
    });
    describe('generatePayrollRecords', () => {
        it('should generate payroll records successfully', async () => {
            // Arrange
            mockRequest.params = {
                periodId: 'period-123'
            };
            const mockResult = [
                {
                    id: 'record-1',
                    payroll_period_id: 'period-123',
                    employee_id: 'emp-1',
                    base_salary: 50000,
                    total_worked_hours: 160,
                    hourly_rate: 312.5,
                    total_regular_hours: 160,
                    total_overtime_hours: 0,
                    total_late_hours: 0,
                    late_deductions: 0,
                    paid_leave_hours: 0,
                    gross_pay: 50000,
                    net_pay: 45000,
                    total_deductions: 5000,
                    total_benefits: 0,
                    status: 'draft',
                    created_at: new Date(),
                    updated_at: new Date()
                }
            ];
            mockPayrollService.generatePayrollRecords.mockResolvedValue(mockResult);
            // Act
            await payrollController.generatePayrollRecords(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.generatePayrollRecords).toHaveBeenCalledWith('period-123');
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll records generated successfully',
                data: mockResult,
                requestId: 'test-request-123'
            });
        });
        it('should handle generation errors', async () => {
            // Arrange
            mockRequest.params = {
                periodId: 'period-123'
            };
            const mockResult = [];
            mockPayrollService.generatePayrollRecords.mockResolvedValue(mockResult);
            // Act
            await payrollController.generatePayrollRecords(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(400);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Failed to generate payroll records',
                data: mockResult,
                requestId: 'test-request-123'
            });
        });
    });
    describe('getPayrollSummary', () => {
        it('should get payroll summary successfully', async () => {
            // Arrange
            mockRequest.params = {
                periodId: 'period-123'
            };
            const mockSummary = {
                period: {
                    id: 'period-123',
                    period_name: 'January 2024',
                    start_date: new Date('2024-01-01'),
                    end_date: new Date('2024-01-31'),
                    status: 'processing',
                    created_at: new Date(),
                    updated_at: new Date()
                },
                totalEmployees: 25,
                totalGrossPay: 125000,
                totalDeductions: 25000,
                totalNetPay: 100000,
                processedRecords: 25,
                pendingRecords: 0
            };
            mockPayrollService.getPayrollSummary.mockResolvedValue(mockSummary);
            // Act
            await payrollController.getPayrollSummary(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.getPayrollSummary).toHaveBeenCalledWith('period-123');
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll summary retrieved successfully',
                data: mockSummary,
                requestId: 'test-request-123'
            });
        });
        it('should handle service errors', async () => {
            // Arrange
            mockRequest.params = {
                periodId: 'period-123'
            };
            mockPayrollService.getPayrollSummary.mockRejectedValue(new Error('Database error'));
            // Act
            await payrollController.getPayrollSummary(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(500);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Failed to retrieve payroll summary',
                requestId: 'test-request-123'
            });
        });
    });
    describe('getPayrollRecords', () => {
        it('should get payroll records successfully', async () => {
            // Arrange
            mockRequest.params = {
                periodId: 'period-123'
            };
            mockRequest.query = {
                page: '1',
                limit: '10',
                status: 'processed'
            };
            const mockRecords = [
                {
                    id: 'record-1',
                    payroll_period_id: 'period-123',
                    employee_id: 'emp-1',
                    base_salary: 50000,
                    total_worked_hours: 160,
                    hourly_rate: 312.5,
                    total_regular_hours: 160,
                    total_overtime_hours: 0,
                    total_late_hours: 0,
                    late_deductions: 0,
                    paid_leave_hours: 0,
                    gross_pay: 5000,
                    net_pay: 4000,
                    total_deductions: 1000,
                    total_benefits: 0,
                    status: 'processed',
                    created_at: new Date(),
                    updated_at: new Date(),
                    employee: {
                        employee_id: 'emp-1',
                        user: {
                            first_name: 'John',
                            last_name: 'Doe'
                        },
                        department: {
                            id: 'dept-1',
                            name: 'Engineering'
                        }
                    }
                },
                {
                    id: 'record-2',
                    payroll_period_id: 'period-123',
                    employee_id: 'emp-2',
                    base_salary: 60000,
                    total_worked_hours: 160,
                    hourly_rate: 375,
                    total_regular_hours: 160,
                    total_overtime_hours: 0,
                    total_late_hours: 0,
                    late_deductions: 0,
                    paid_leave_hours: 0,
                    gross_pay: 6000,
                    net_pay: 4800,
                    total_deductions: 1200,
                    total_benefits: 0,
                    status: 'processed',
                    created_at: new Date(),
                    updated_at: new Date(),
                    employee: {
                        employee_id: 'emp-2',
                        user: {
                            first_name: 'Jane',
                            last_name: 'Smith'
                        },
                        department: {
                            id: 'dept-1',
                            name: 'Engineering'
                        }
                    }
                }
            ];
            mockPayrollService.getPayrollRecords.mockResolvedValue({
                records: mockRecords,
                total: 2
            });
            // Act
            await payrollController.getPayrollRecords(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.getPayrollRecords).toHaveBeenCalledWith('period-123', {
                page: 1,
                limit: 10,
                status: 'processed'
            });
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll records retrieved successfully',
                data: {
                    records: mockRecords,
                    pagination: {
                        page: 1,
                        limit: 10,
                        total: 2,
                        totalPages: 1
                    }
                },
                requestId: 'test-request-123'
            });
        });
    });
    describe('getPayrollRecord', () => {
        it('should get payroll record successfully', async () => {
            // Arrange
            mockRequest.params = {
                id: 'record-123'
            };
            const mockRecord = {
                id: 'record-123',
                payroll_period_id: 'period-123',
                employee_id: 'emp-123',
                base_salary: 50000,
                total_worked_hours: 160,
                hourly_rate: 312.5,
                total_regular_hours: 160,
                total_overtime_hours: 0,
                total_late_hours: 0,
                late_deductions: 0,
                paid_leave_hours: 0,
                gross_pay: 5000,
                net_pay: 4000,
                total_deductions: 1000,
                total_benefits: 0,
                status: 'processed',
                created_at: new Date(),
                updated_at: new Date()
            };
            mockPayrollService.getPayrollRecord.mockResolvedValue(mockRecord);
            // Act
            await payrollController.getPayrollRecord(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.getPayrollRecord).toHaveBeenCalledWith('record-123');
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll record retrieved successfully',
                data: mockRecord,
                requestId: 'test-request-123'
            });
        });
        it('should return 404 if record not found', async () => {
            // Arrange
            mockRequest.params = {
                id: 'nonexistent-record'
            };
            mockPayrollService.getPayrollRecord.mockResolvedValue(null);
            // Act
            await payrollController.getPayrollRecord(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(404);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Payroll record not found',
                requestId: 'test-request-123'
            });
        });
    });
    describe('updatePayrollRecord', () => {
        it('should update payroll record successfully', async () => {
            // Arrange
            mockRequest.params = {
                id: 'record-123'
            };
            mockRequest.body = {
                gross_pay: 5500,
                total_deductions: 1100,
                net_pay: 4400
            };
            const mockUpdatedRecord = {
                id: 'record-123',
                payroll_period_id: 'period-123',
                employee_id: 'emp-123',
                base_salary: 50000,
                total_worked_hours: 160,
                hourly_rate: 312.5,
                total_regular_hours: 160,
                total_overtime_hours: 0,
                total_late_hours: 0,
                late_deductions: 0,
                paid_leave_hours: 0,
                gross_pay: 5500,
                net_pay: 4400,
                total_deductions: 1100,
                total_benefits: 0,
                status: 'processed',
                created_at: new Date(),
                updated_at: new Date()
            };
            mockPayrollService.updatePayrollRecord.mockResolvedValue(mockUpdatedRecord);
            // Act
            await payrollController.updatePayrollRecord(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.updatePayrollRecord).toHaveBeenCalledWith('record-123', {
                gross_pay: 5500,
                total_deductions: 1100,
                net_pay: 4400
            });
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll record updated successfully',
                data: mockUpdatedRecord,
                requestId: 'test-request-123'
            });
        });
        it('should return 404 if record not found', async () => {
            // Arrange
            mockRequest.params = {
                id: 'nonexistent-record'
            };
            mockRequest.body = {
                gross_pay: 5500
            };
            mockPayrollService.updatePayrollRecord.mockResolvedValue(null);
            // Act
            await payrollController.updatePayrollRecord(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(404);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Payroll record not found',
                requestId: 'test-request-123'
            });
        });
    });
    describe('approvePayrollRecord', () => {
        it('should approve payroll record successfully', async () => {
            // Arrange
            mockRequest.params = {
                id: 'record-123'
            };
            mockRequest.body = {
                comments: 'Approved for payment'
            };
            const mockApprovedRecord = {
                id: 'record-123',
                payroll_period_id: 'period-123',
                employee_id: 'emp-123',
                base_salary: 50000,
                total_worked_hours: 160,
                hourly_rate: 312.5,
                total_regular_hours: 160,
                total_overtime_hours: 0,
                total_late_hours: 0,
                late_deductions: 0,
                paid_leave_hours: 0,
                gross_pay: 50000,
                net_pay: 45000,
                total_deductions: 5000,
                total_benefits: 0,
                status: 'processed',
                created_at: new Date(),
                updated_at: new Date()
            };
            mockPayrollService.approvePayrollRecord.mockResolvedValue(mockApprovedRecord);
            // Act
            await payrollController.approvePayrollRecord(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.approvePayrollRecord).toHaveBeenCalledWith('record-123', {
                comments: 'Approved for payment'
            });
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll record approved successfully',
                data: mockApprovedRecord,
                requestId: 'test-request-123'
            });
        });
        it('should return 404 if record not found', async () => {
            // Arrange
            mockRequest.params = {
                id: 'nonexistent-record'
            };
            mockRequest.body = {
                comments: 'Approved'
            };
            mockPayrollService.approvePayrollRecord.mockResolvedValue(null);
            // Act
            await payrollController.approvePayrollRecord(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(404);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Payroll record not found',
                requestId: 'test-request-123'
            });
        });
    });
    describe('markPayrollAsPaid', () => {
        it('should mark payroll as paid successfully', async () => {
            // Arrange
            mockRequest.params = {
                id: 'record-123'
            };
            mockRequest.body = {
                payment_date: '2024-01-31',
                payment_method: 'bank_transfer',
                transaction_id: 'TXN-123456'
            };
            const mockPaidRecord = {
                id: 'record-123',
                payroll_period_id: 'period-123',
                employee_id: 'emp-123',
                base_salary: 50000,
                total_worked_hours: 160,
                hourly_rate: 312.5,
                total_regular_hours: 160,
                total_overtime_hours: 0,
                total_late_hours: 0,
                late_deductions: 0,
                paid_leave_hours: 0,
                gross_pay: 50000,
                net_pay: 45000,
                total_deductions: 5000,
                total_benefits: 0,
                status: 'paid',
                created_at: new Date(),
                updated_at: new Date()
            };
            mockPayrollService.markPayrollAsPaid.mockResolvedValue(mockPaidRecord);
            // Act
            await payrollController.markPayrollAsPaid(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.markPayrollAsPaid).toHaveBeenCalledWith('record-123', {
                payment_date: new Date('2024-01-31'),
                payment_method: 'bank_transfer',
                transaction_id: 'TXN-123456'
            });
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll marked as paid successfully',
                data: mockPaidRecord,
                requestId: 'test-request-123'
            });
        });
        it('should return 400 for missing payment information', async () => {
            // Arrange
            mockRequest.params = {
                id: 'record-123'
            };
            mockRequest.body = {
                payment_date: '2024-01-31'
                // payment_method and transaction_id missing
            };
            // Act
            await payrollController.markPayrollAsPaid(mockRequest, mockResponse);
            // Assert
            expect(mockResponse.status).toHaveBeenCalledWith(400);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: false,
                message: 'Payment date, method, and transaction ID are required',
                requestId: 'test-request-123'
            });
            expect(mockPayrollService.markPayrollAsPaid).not.toHaveBeenCalled();
        });
    });
    describe('getPayrollStats', () => {
        it('should get payroll stats successfully', async () => {
            // Arrange
            mockRequest.query = {
                period: '2024-01'
            };
            const mockStats = {
                totalEmployees: 25,
                totalPayroll: 1500000,
                processedPeriods: 11,
                pendingPeriods: 1
            };
            mockPayrollService.getPayrollStats.mockResolvedValue(mockStats);
            // Act
            await payrollController.getPayrollStats(mockRequest, mockResponse);
            // Assert
            expect(mockPayrollService.getPayrollStats).toHaveBeenCalledWith({
                period: '2024-01'
            });
            expect(mockResponse.status).toHaveBeenCalledWith(200);
            expect(mockResponse.json).toHaveBeenCalledWith({
                success: true,
                message: 'Payroll statistics retrieved successfully',
                data: mockStats,
                requestId: 'test-request-123'
            });
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUva2ltL3RpdG8vc2VydmVyL3Rlc3RzL3VuaXQvY29udHJvbGxlcnMvcGF5cm9sbENvbnRyb2xsZXIudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQU1BLHdCQUF3QjtBQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLDhDQUE4QyxDQUFDLENBQUM7QUFDMUQsSUFBSSxDQUFDLElBQUksQ0FBQyxrREFBa0QsQ0FBQyxDQUFDO0FBQzlELElBQUksQ0FBQyxJQUFJLENBQUMsa0NBQWtDLENBQUMsQ0FBQztBQVI5QywwRkFBdUY7QUFDdkYsaUZBQThFO0FBQzlFLDhEQUFnRTtBQVFoRSxNQUFNLGtCQUFrQixHQUFHLCtCQUFvRCxDQUFDO0FBQ2hGLE1BQU0sZ0JBQWdCLEdBQUcsc0JBQXdELENBQUM7QUFFbEYsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtJQUNqQyxJQUFJLGlCQUFvQyxDQUFDO0lBQ3pDLElBQUksV0FBNkIsQ0FBQztJQUNsQyxJQUFJLFlBQStCLENBQUM7SUFFcEMsVUFBVSxDQUFDLEdBQUcsRUFBRTtRQUNkLGlCQUFpQixHQUFHLElBQUkscUNBQWlCLEVBQUUsQ0FBQztRQUM1QyxJQUFJLENBQUMsYUFBYSxFQUFFLENBQUM7UUFFckIsc0JBQXNCO1FBQ3RCLFdBQVcsR0FBRztZQUNaLElBQUksRUFBRSxFQUFFO1lBQ1IsTUFBTSxFQUFFLEVBQUU7WUFDVixLQUFLLEVBQUUsRUFBRTtZQUNULElBQUksRUFBRTtnQkFDSixNQUFNLEVBQUUsYUFBYTtnQkFDckIsS0FBSyxFQUFFLGdCQUFnQjtnQkFDdkIsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsWUFBWSxFQUFFLENBQUM7YUFDaEI7U0FDRixDQUFDO1FBRUYsdUJBQXVCO1FBQ3ZCLFlBQVksR0FBRztZQUNiLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ2xDLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ2hDLFFBQVEsRUFBRSxJ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QUFrQixDQUFDLGVBQWUsQ0FBQyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVoRSxNQUFNO1lBQ04sTUFBTSxpQkFBaUIsQ0FBQyxlQUFlLENBQUMsV0FBc0IsRUFBRSxZQUF3QixDQUFDLENBQUM7WUFFMUYsU0FBUztZQUNULE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQyxlQUFlLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQztnQkFDOUQsTUFBTSxFQUFFLFNBQVM7YUFDbEIsQ0FBQyxDQUFDO1lBQ0gsTUFBTSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUN0RCxNQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLG9CQUFvQixDQUFDO2dCQUM3QyxPQUFPLEVBQUUsSUFBSTtnQkFDYixPQUFPLEVBQUUsMkNBQTJDO2dCQUNwRCxJQUFJLEVBQUUsU0FBUztnQkFDZixTQUFTLEVBQUUsa0JBQWtCO2FBQzlCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9raW0vdGl0by9zZXJ2ZXIvdGVzdHMvdW5pdC9jb250cm9sbGVycy9wYXlyb2xsQ29udHJvbGxlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlcXVlc3QsIFJlc3BvbnNlIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBQYXlyb2xsQ29udHJvbGxlciB9IGZyb20gJy4uLy4uLy4uL3NyYy9jb250cm9sbGVycy9wYXlyb2xsL3BheXJvbGxDb250cm9sbGVyJztcbmltcG9ydCB7IHBheXJvbGxTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3NlcnZpY2VzL3BheXJvbGwvcGF5cm9sbFNlcnZpY2UnO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdElkIH0gZnJvbSAnLi4vLi4vLi4vc3JjL3V0aWxzL3R5cGVzL2V4cHJlc3MnO1xuaW1wb3J0IHsgUGF5cm9sbFJlY29yZCB9IGZyb20gJy4uLy4uLy4uL3NyYy9tb2RlbHMvcGF5cm9sbC9QYXlyb2xsUmVjb3JkJztcblxuLy8gTW9jayB0aGUgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9wYXlyb2xsL3BheXJvbGxTZXJ2aWNlJyk7XG5qZXN0Lm1vY2soJy4uLy4uLy4uL3NyYy9zZXJ2aWNlcy9wYXlyb2xsL2F1dG9QYXlyb2xsU2VydmljZScpO1xuamVzdC5tb2NrKCcuLi8uLi8uLi9zcmMvdXRpbHMvdHlwZXMvZXhwcmVzcycpO1xuXG5jb25zdCBtb2NrUGF5cm9sbFNlcnZpY2UgPSBwYXlyb2xsU2VydmljZSBhcyBqZXN0Lk1vY2tlZDx0eXBlb2YgcGF5cm9sbFNlcnZpY2U+O1xuY29uc3QgbW9ja0dldFJlcXVlc3RJZCA9IGdldFJlcXVlc3RJZCBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBnZXRSZXF1ZXN0SWQ+O1xuXG5kZXNjcmliZSgnUGF5cm9sbENvbnRyb2xsZXInLCAoKSA9PiB7XG4gIGxldCBwYXlyb2xsQ29udHJvbGxlcjogUGF5cm9sbENvbnRyb2xsZXI7XG4gIGxldCBtb2NrUmVxdWVzdDogUGFydGlhbDxSZXF1ZXN0PjtcbiAgbGV0IG1vY2tSZXNwb25zZTogUGFydGlhbDxSZXNwb25zZT47XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcGF5cm9sbENvbnRyb2xsZXIgPSBuZXcgUGF5cm9sbENvbnRyb2xsZXIoKTtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblxuICAgIC8vIE1vY2sgcmVxdWVzdCBvYmplY3RcbiAgICBtb2NrUmVxdWVzdCA9IHtcbiAgICAgIGJvZHk6IHt9LFxuICAgICAgcGFyYW1zOiB7fSxcbiAgICAgIHF1ZXJ5OiB7fSxcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgdXNlcklkOiAnaHItdXNlci0xMjMnLFxuICAgICAgICBlbWFpbDogJ2hyQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcm9sZTogJ2hyJyxcbiAgICAgICAgdG9rZW5WZXJzaW9uOiAxXG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIE1vY2sgcmVzcG9uc2Ugb2JqZWN0XG4gICAgbW9ja1Jlc3BvbnNlID0ge1xuICAgICAgc3RhdHVzOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGpzb246IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgZG93bmxvYWQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpXG4gICAgfTtcblxuICAgIC8vIE1vY2sgZ2V0UmVxdWVzdElkXG4gICAgbW9ja0dldFJlcXVlc3RJZC5tb2NrUmV0dXJuVmFsdWUoJ3Rlc3QtcmVxdWVzdC0xMjMnKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2NyZWF0ZVBheXJvbGxQZXJpb2QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgcGF5cm9sbCBwZXJpb2Qgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QuYm9keSA9IHtcbiAgICAgICAgcGVyaW9kX25hbWU6ICdKYW51YXJ5IDIwMjQnLFxuICAgICAgICBzdGFydF9kYXRlOiAnMjAyNC0wMS0wMScsXG4gICAgICAgIGVuZF9kYXRlOiAnMjAyNC0wMS0zMScsXG4gICAgICAgIHN0YXR1czogJ2RyYWZ0JyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1BheXJvbGxQZXJpb2QgPSB7XG4gICAgICAgIGlkOiAncGVyaW9kLTEyMycsXG4gICAgICAgIHBlcmlvZF9uYW1lOiAnSmFudWFyeSAyMDI0JyxcbiAgICAgICAgc3RhcnRfZGF0ZTogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgZW5kX2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyksXG4gICAgICAgIHN0YXR1czogJ2RyYWZ0JyBhcyBjb25zdCxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKVxuICAgICAgfTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLmNyZWF0ZVBheXJvbGxQZXJpb2QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1BheXJvbGxQZXJpb2QpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHBheXJvbGxDb250cm9sbGVyLmNyZWF0ZVBheXJvbGxQZXJpb2QobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLmNyZWF0ZVBheXJvbGxQZXJpb2QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgcGVyaW9kX25hbWU6ICdKYW51YXJ5IDIwMjQnLFxuICAgICAgICBzdGFydF9kYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgICBlbmRfZGF0ZTogbmV3IERhdGUoJzIwMjQtMDEtMzEnKSxcbiAgICAgICAgc3RhdHVzOiAnZHJhZnQnIGFzIGNvbnN0XG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgyMDEpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdQYXlyb2xsIHBlcmlvZCBjcmVhdGVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICAgIGRhdGE6IG1vY2tQYXlyb2xsUGVyaW9kLFxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtMTIzJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDAgZm9yIG1pc3NpbmcgcmVxdWlyZWQgZmllbGRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QuYm9keSA9IHtcbiAgICAgICAgcGVyaW9kX25hbWU6ICdKYW51YXJ5IDIwMjQnXG4gICAgICAgIC8vIHN0YXJ0X2RhdGUgYW5kIGVuZF9kYXRlIG1pc3NpbmdcbiAgICAgIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuY3JlYXRlUGF5cm9sbFBlcmlvZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGVyaW9kIG5hbWUsIHN0YXJ0IGRhdGUsIGFuZCBlbmQgZGF0ZSBhcmUgcmVxdWlyZWQnLFxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtMTIzJ1xuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLmNyZWF0ZVBheXJvbGxQZXJpb2QpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBzZXJ2aWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tSZXF1ZXN0LmJvZHkgPSB7XG4gICAgICAgIHBlcmlvZF9uYW1lOiAnSmFudWFyeSAyMDI0JyxcbiAgICAgICAgc3RhcnRfZGF0ZTogJzIwMjQtMDEtMDEnLFxuICAgICAgICBlbmRfZGF0ZTogJzIwMjQtMDEtMzEnXG4gICAgICB9O1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UuY3JlYXRlUGF5cm9sbFBlcmlvZC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0RhdGFiYXNlIGVycm9yJykpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHBheXJvbGxDb250cm9sbGVyLmNyZWF0ZVBheXJvbGxQZXJpb2QobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNTAwKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgcGF5cm9sbCBwZXJpb2QnLFxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtMTIzJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdnZXRQYXlyb2xsUGVyaW9kcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdldCBwYXlyb2xsIHBlcmlvZHMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QucXVlcnkgPSB7XG4gICAgICAgIHBhZ2U6ICcxJyxcbiAgICAgICAgbGltaXQ6ICcxMCcsXG4gICAgICAgIHN0YXR1czogJ2FjdGl2ZSdcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tQZXJpb2RzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdwZXJpb2QtMScsXG4gICAgICAgICAgcGVyaW9kX25hbWU6ICdKYW51YXJ5IDIwMjQnLFxuICAgICAgICAgIHN0YXJ0X2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgZW5kX2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyksXG4gICAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2luZycgYXMgY29uc3QsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3BlcmlvZC0yJyxcbiAgICAgICAgICBwZXJpb2RfbmFtZTogJ0ZlYnJ1YXJ5IDIwMjQnLFxuICAgICAgICAgIHN0YXJ0X2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAyLTAxJyksXG4gICAgICAgICAgZW5kX2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAyLTI5JyksXG4gICAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2luZycgYXMgY29uc3QsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIG1vY2tQYXlyb2xsU2VydmljZS5nZXRQYXlyb2xsUGVyaW9kcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHBlcmlvZHM6IG1vY2tQZXJpb2RzLFxuICAgICAgICB0b3RhbDogMlxuICAgICAgfSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuZ2V0UGF5cm9sbFBlcmlvZHMobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxQZXJpb2RzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHBhZ2U6IDEsXG4gICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJ1xuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCBwZXJpb2RzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgcGVyaW9kczogbW9ja1BlcmlvZHMsXG4gICAgICAgICAgcGFnaW5hdGlvbjoge1xuICAgICAgICAgICAgcGFnZTogMSxcbiAgICAgICAgICAgIGxpbWl0OiAxMCxcbiAgICAgICAgICAgIHRvdGFsOiAyLFxuICAgICAgICAgICAgdG90YWxQYWdlczogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VydmljZSBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5xdWVyeSA9IHt9O1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UuZ2V0UGF5cm9sbFBlcmlvZHMubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5nZXRQYXlyb2xsUGVyaW9kcyhtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg1MDApO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJldHJpZXZlIHBheXJvbGwgcGVyaW9kcycsXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFBheXJvbGxQZXJpb2QnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgcGF5cm9sbCBwZXJpb2Qgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QucGFyYW1zID0ge1xuICAgICAgICBpZDogJ3BlcmlvZC0xMjMnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrUGVyaW9kID0ge1xuICAgICAgICBpZDogJ3BlcmlvZC0xMjMnLFxuICAgICAgICBwZXJpb2RfbmFtZTogJ0phbnVhcnkgMjAyNCcsXG4gICAgICAgIHN0YXJ0X2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgIGVuZF9kYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0zMScpLFxuICAgICAgICBzdGF0dXM6ICdwcm9jZXNzaW5nJyBhcyBjb25zdCxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKVxuICAgICAgfTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxQZXJpb2QubW9ja1Jlc29sdmVkVmFsdWUobW9ja1BlcmlvZCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuZ2V0UGF5cm9sbFBlcmlvZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUGF5cm9sbFNlcnZpY2UuZ2V0UGF5cm9sbFBlcmlvZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BlcmlvZC0xMjMnKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgyMDApO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdQYXlyb2xsIHBlcmlvZCByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogbW9ja1BlcmlvZCxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDA0IGlmIHBlcmlvZCBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAnbm9uZXhpc3RlbnQtcGVyaW9kJ1xuICAgICAgfTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxQZXJpb2QubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuZ2V0UGF5cm9sbFBlcmlvZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCBwZXJpb2Qgbm90IGZvdW5kJyxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBkYXRlUGF5cm9sbFBlcmlvZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBwYXlyb2xsIHBlcmlvZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAncGVyaW9kLTEyMydcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5ib2R5ID0ge1xuICAgICAgICBwZXJpb2RfbmFtZTogJ1VwZGF0ZWQgSmFudWFyeSAyMDI0JyxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJ1xuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1VwZGF0ZWRQZXJpb2QgPSB7XG4gICAgICAgIGlkOiAncGVyaW9kLTEyMycsXG4gICAgICAgIHBlcmlvZF9uYW1lOiAnVXBkYXRlZCBKYW51YXJ5IDIwMjQnLFxuICAgICAgICBzdGFydF9kYXRlOiBuZXcgRGF0ZSgnMjAyNC0wMS0wMScpLFxuICAgICAgICBlbmRfZGF0ZTogbmV3IERhdGUoJzIwMjQtMDEtMzEnKSxcbiAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2luZycgYXMgY29uc3QsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKClcbiAgICAgIH07XG5cbiAgICAgIG1vY2tQYXlyb2xsU2VydmljZS51cGRhdGVQYXlyb2xsUGVyaW9kLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tVcGRhdGVkUGVyaW9kKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci51cGRhdGVQYXlyb2xsUGVyaW9kKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tQYXlyb2xsU2VydmljZS51cGRhdGVQYXlyb2xsUGVyaW9kKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGVyaW9kLTEyMycsIHtcbiAgICAgICAgcGVyaW9kX25hbWU6ICdVcGRhdGVkIEphbnVhcnkgMjAyNCcsXG4gICAgICAgIHN0YXR1czogJ2FjdGl2ZSdcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDIwMCk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1BheXJvbGwgcGVyaW9kIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogbW9ja1VwZGF0ZWRQZXJpb2QsXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBpZiBwZXJpb2Qgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QucGFyYW1zID0ge1xuICAgICAgICBpZDogJ25vbmV4aXN0ZW50LXBlcmlvZCdcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5ib2R5ID0ge1xuICAgICAgICBwZXJpb2RfbmFtZTogJ1VwZGF0ZWQgUGVyaW9kJ1xuICAgICAgfTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLnVwZGF0ZVBheXJvbGxQZXJpb2QubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIudXBkYXRlUGF5cm9sbFBlcmlvZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCBwZXJpb2Qgbm90IGZvdW5kJyxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZGVsZXRlUGF5cm9sbFBlcmlvZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGRlbGV0ZSBwYXlyb2xsIHBlcmlvZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAncGVyaW9kLTEyMydcbiAgICAgIH07XG5cbiAgICAgIG1vY2tQYXlyb2xsU2VydmljZS5kZWxldGVQYXlyb2xsUGVyaW9kLm1vY2tSZXNvbHZlZFZhbHVlKHRydWUpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHBheXJvbGxDb250cm9sbGVyLmRlbGV0ZVBheXJvbGxQZXJpb2QobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLmRlbGV0ZVBheXJvbGxQZXJpb2QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwZXJpb2QtMTIzJyk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCBwZXJpb2QgZGVsZXRlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtMTIzJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDQgaWYgcGVyaW9kIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tSZXF1ZXN0LnBhcmFtcyA9IHtcbiAgICAgICAgaWQ6ICdub25leGlzdGVudC1wZXJpb2QnXG4gICAgICB9O1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UuZGVsZXRlUGF5cm9sbFBlcmlvZC5tb2NrUmVzb2x2ZWRWYWx1ZShmYWxzZSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuZGVsZXRlUGF5cm9sbFBlcmlvZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCBwZXJpb2Qgbm90IGZvdW5kJyxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2VuZXJhdGVQYXlyb2xsUmVjb3JkcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHBheXJvbGwgcmVjb3JkcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIHBlcmlvZElkOiAncGVyaW9kLTEyMydcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQ6IFBheXJvbGxSZWNvcmRbXSA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAncmVjb3JkLTEnLFxuICAgICAgICAgIHBheXJvbGxfcGVyaW9kX2lkOiAncGVyaW9kLTEyMycsXG4gICAgICAgICAgZW1wbG95ZWVfaWQ6ICdlbXAtMScsXG4gICAgICAgICAgYmFzZV9zYWxhcnk6IDUwMDAwLFxuICAgICAgICAgIHRvdGFsX3dvcmtlZF9ob3VyczogMTYwLFxuICAgICAgICAgIGhvdXJseV9yYXRlOiAzMTIuNSxcbiAgICAgICAgICB0b3RhbF9yZWd1bGFyX2hvdXJzOiAxNjAsXG4gICAgICAgICAgdG90YWxfb3ZlcnRpbWVfaG91cnM6IDAsXG4gICAgICAgICAgdG90YWxfbGF0ZV9ob3VyczogMCxcbiAgICAgICAgICBsYXRlX2RlZHVjdGlvbnM6IDAsXG4gICAgICAgICAgcGFpZF9sZWF2ZV9ob3VyczogMCxcbiAgICAgICAgICBncm9zc19wYXk6IDUwMDAwLFxuICAgICAgICAgIG5ldF9wYXk6IDQ1MDAwLFxuICAgICAgICAgIHRvdGFsX2RlZHVjdGlvbnM6IDUwMDAsXG4gICAgICAgICAgdG90YWxfYmVuZWZpdHM6IDAsXG4gICAgICAgICAgc3RhdHVzOiAnZHJhZnQnIGFzIGNvbnN0LFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UuZ2VuZXJhdGVQYXlyb2xsUmVjb3Jkcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzdWx0KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5nZW5lcmF0ZVBheXJvbGxSZWNvcmRzKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tQYXlyb2xsU2VydmljZS5nZW5lcmF0ZVBheXJvbGxSZWNvcmRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGVyaW9kLTEyMycpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDIwMCk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1BheXJvbGwgcmVjb3JkcyBnZW5lcmF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3VsdCxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZ2VuZXJhdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIHBlcmlvZElkOiAncGVyaW9kLTEyMydcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQ6IFBheXJvbGxSZWNvcmRbXSA9IFtdO1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UuZ2VuZXJhdGVQYXlyb2xsUmVjb3Jkcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzdWx0KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5nZW5lcmF0ZVBheXJvbGxSZWNvcmRzKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDQwMCk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdGYWlsZWQgdG8gZ2VuZXJhdGUgcGF5cm9sbCByZWNvcmRzJyxcbiAgICAgICAgZGF0YTogbW9ja1Jlc3VsdCxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UGF5cm9sbFN1bW1hcnknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgcGF5cm9sbCBzdW1tYXJ5IHN1Y2Nlc3NmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tSZXF1ZXN0LnBhcmFtcyA9IHtcbiAgICAgICAgcGVyaW9kSWQ6ICdwZXJpb2QtMTIzJ1xuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1N1bW1hcnkgPSB7XG4gICAgICAgIHBlcmlvZDoge1xuICAgICAgICAgIGlkOiAncGVyaW9kLTEyMycsXG4gICAgICAgICAgcGVyaW9kX25hbWU6ICdKYW51YXJ5IDIwMjQnLFxuICAgICAgICAgIHN0YXJ0X2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTAxJyksXG4gICAgICAgICAgZW5kX2RhdGU6IG5ldyBEYXRlKCcyMDI0LTAxLTMxJyksXG4gICAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2luZycgYXMgY29uc3QsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpXG4gICAgICAgIH0sXG4gICAgICAgIHRvdGFsRW1wbG95ZWVzOiAyNSxcbiAgICAgICAgdG90YWxHcm9zc1BheTogMTI1MDAwLFxuICAgICAgICB0b3RhbERlZHVjdGlvbnM6IDI1MDAwLFxuICAgICAgICB0b3RhbE5ldFBheTogMTAwMDAwLFxuICAgICAgICBwcm9jZXNzZWRSZWNvcmRzOiAyNSxcbiAgICAgICAgcGVuZGluZ1JlY29yZHM6IDBcbiAgICAgIH07XG5cbiAgICAgIG1vY2tQYXlyb2xsU2VydmljZS5nZXRQYXlyb2xsU3VtbWFyeS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU3VtbWFyeSk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuZ2V0UGF5cm9sbFN1bW1hcnkobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxTdW1tYXJ5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgncGVyaW9kLTEyMycpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDIwMCk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1BheXJvbGwgc3VtbWFyeSByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogbW9ja1N1bW1hcnksXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHNlcnZpY2UgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QucGFyYW1zID0ge1xuICAgICAgICBwZXJpb2RJZDogJ3BlcmlvZC0xMjMnXG4gICAgICB9O1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UuZ2V0UGF5cm9sbFN1bW1hcnkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdEYXRhYmFzZSBlcnJvcicpKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5nZXRQYXlyb2xsU3VtbWFyeShtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg1MDApO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHJldHJpZXZlIHBheXJvbGwgc3VtbWFyeScsXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFBheXJvbGxSZWNvcmRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IHBheXJvbGwgcmVjb3JkcyBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIHBlcmlvZElkOiAncGVyaW9kLTEyMydcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5xdWVyeSA9IHtcbiAgICAgICAgcGFnZTogJzEnLFxuICAgICAgICBsaW1pdDogJzEwJyxcbiAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2VkJyBhcyBjb25zdFxuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1JlY29yZHMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ3JlY29yZC0xJyxcbiAgICAgICAgICBwYXlyb2xsX3BlcmlvZF9pZDogJ3BlcmlvZC0xMjMnLFxuICAgICAgICAgIGVtcGxveWVlX2lkOiAnZW1wLTEnLFxuICAgICAgICAgIGJhc2Vfc2FsYXJ5OiA1MDAwMCxcbiAgICAgICAgICB0b3RhbF93b3JrZWRfaG91cnM6IDE2MCxcbiAgICAgICAgICBob3VybHlfcmF0ZTogMzEyLjUsXG4gICAgICAgICAgdG90YWxfcmVndWxhcl9ob3VyczogMTYwLFxuICAgICAgICAgIHRvdGFsX292ZXJ0aW1lX2hvdXJzOiAwLFxuICAgICAgICAgIHRvdGFsX2xhdGVfaG91cnM6IDAsXG4gICAgICAgICAgbGF0ZV9kZWR1Y3Rpb25zOiAwLFxuICAgICAgICAgIHBhaWRfbGVhdmVfaG91cnM6IDAsXG4gICAgICAgICAgZ3Jvc3NfcGF5OiA1MDAwLFxuICAgICAgICAgIG5ldF9wYXk6IDQwMDAsXG4gICAgICAgICAgdG90YWxfZGVkdWN0aW9uczogMTAwMCxcbiAgICAgICAgICB0b3RhbF9iZW5lZml0czogMCxcbiAgICAgICAgICBzdGF0dXM6ICdwcm9jZXNzZWQnIGFzIGNvbnN0LFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgICBlbXBsb3llZToge1xuICAgICAgICAgICAgZW1wbG95ZWVfaWQ6ICdlbXAtMScsXG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIGZpcnN0X25hbWU6ICdKb2huJyxcbiAgICAgICAgICAgICAgbGFzdF9uYW1lOiAnRG9lJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlcGFydG1lbnQ6IHtcbiAgICAgICAgICAgICAgaWQ6ICdkZXB0LTEnLFxuICAgICAgICAgICAgICBuYW1lOiAnRW5naW5lZXJpbmcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdyZWNvcmQtMicsXG4gICAgICAgICAgcGF5cm9sbF9wZXJpb2RfaWQ6ICdwZXJpb2QtMTIzJyxcbiAgICAgICAgICBlbXBsb3llZV9pZDogJ2VtcC0yJyxcbiAgICAgICAgICBiYXNlX3NhbGFyeTogNjAwMDAsXG4gICAgICAgICAgdG90YWxfd29ya2VkX2hvdXJzOiAxNjAsXG4gICAgICAgICAgaG91cmx5X3JhdGU6IDM3NSxcbiAgICAgICAgICB0b3RhbF9yZWd1bGFyX2hvdXJzOiAxNjAsXG4gICAgICAgICAgdG90YWxfb3ZlcnRpbWVfaG91cnM6IDAsXG4gICAgICAgICAgdG90YWxfbGF0ZV9ob3VyczogMCxcbiAgICAgICAgICBsYXRlX2RlZHVjdGlvbnM6IDAsXG4gICAgICAgICAgcGFpZF9sZWF2ZV9ob3VyczogMCxcbiAgICAgICAgICBncm9zc19wYXk6IDYwMDAsXG4gICAgICAgICAgbmV0X3BheTogNDgwMCxcbiAgICAgICAgICB0b3RhbF9kZWR1Y3Rpb25zOiAxMjAwLFxuICAgICAgICAgIHRvdGFsX2JlbmVmaXRzOiAwLFxuICAgICAgICAgIHN0YXR1czogJ3Byb2Nlc3NlZCcgYXMgY29uc3QsXG4gICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICAgIGVtcGxveWVlOiB7XG4gICAgICAgICAgICBlbXBsb3llZV9pZDogJ2VtcC0yJyxcbiAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgZmlyc3RfbmFtZTogJ0phbmUnLFxuICAgICAgICAgICAgICBsYXN0X25hbWU6ICdTbWl0aCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXBhcnRtZW50OiB7XG4gICAgICAgICAgICAgIGlkOiAnZGVwdC0xJyxcbiAgICAgICAgICAgICAgbmFtZTogJ0VuZ2luZWVyaW5nJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxSZWNvcmRzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgcmVjb3JkczogbW9ja1JlY29yZHMsXG4gICAgICAgIHRvdGFsOiAyXG4gICAgICB9KTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5nZXRQYXlyb2xsUmVjb3Jkcyhtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUGF5cm9sbFNlcnZpY2UuZ2V0UGF5cm9sbFJlY29yZHMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwZXJpb2QtMTIzJywge1xuICAgICAgICBwYWdlOiAxLFxuICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgIHN0YXR1czogJ3Byb2Nlc3NlZCcgYXMgY29uc3RcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDIwMCk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1BheXJvbGwgcmVjb3JkcyByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIHJlY29yZHM6IG1vY2tSZWNvcmRzLFxuICAgICAgICAgIHBhZ2luYXRpb246IHtcbiAgICAgICAgICAgIHBhZ2U6IDEsXG4gICAgICAgICAgICBsaW1pdDogMTAsXG4gICAgICAgICAgICB0b3RhbDogMixcbiAgICAgICAgICAgIHRvdGFsUGFnZXM6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2dldFBheXJvbGxSZWNvcmQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBnZXQgcGF5cm9sbCByZWNvcmQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QucGFyYW1zID0ge1xuICAgICAgICBpZDogJ3JlY29yZC0xMjMnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrUmVjb3JkID0ge1xuICAgICAgICBpZDogJ3JlY29yZC0xMjMnLFxuICAgICAgICBwYXlyb2xsX3BlcmlvZF9pZDogJ3BlcmlvZC0xMjMnLFxuICAgICAgICBlbXBsb3llZV9pZDogJ2VtcC0xMjMnLFxuICAgICAgICBiYXNlX3NhbGFyeTogNTAwMDAsXG4gICAgICAgIHRvdGFsX3dvcmtlZF9ob3VyczogMTYwLFxuICAgICAgICBob3VybHlfcmF0ZTogMzEyLjUsXG4gICAgICAgIHRvdGFsX3JlZ3VsYXJfaG91cnM6IDE2MCxcbiAgICAgICAgdG90YWxfb3ZlcnRpbWVfaG91cnM6IDAsXG4gICAgICAgIHRvdGFsX2xhdGVfaG91cnM6IDAsXG4gICAgICAgIGxhdGVfZGVkdWN0aW9uczogMCxcbiAgICAgICAgcGFpZF9sZWF2ZV9ob3VyczogMCxcbiAgICAgICAgZ3Jvc3NfcGF5OiA1MDAwLFxuICAgICAgICBuZXRfcGF5OiA0MDAwLFxuICAgICAgICB0b3RhbF9kZWR1Y3Rpb25zOiAxMDAwLFxuICAgICAgICB0b3RhbF9iZW5lZml0czogMCxcbiAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2VkJyBhcyBjb25zdCxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKVxuICAgICAgfTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxSZWNvcmQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1JlY29yZCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuZ2V0UGF5cm9sbFJlY29yZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUGF5cm9sbFNlcnZpY2UuZ2V0UGF5cm9sbFJlY29yZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3JlY29yZC0xMjMnKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgyMDApO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdQYXlyb2xsIHJlY29yZCByZXRyaWV2ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogbW9ja1JlY29yZCxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDA0IGlmIHJlY29yZCBub3QgZm91bmQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAnbm9uZXhpc3RlbnQtcmVjb3JkJ1xuICAgICAgfTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxSZWNvcmQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgYXdhaXQgcGF5cm9sbENvbnRyb2xsZXIuZ2V0UGF5cm9sbFJlY29yZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCByZWNvcmQgbm90IGZvdW5kJyxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndXBkYXRlUGF5cm9sbFJlY29yZCcsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHVwZGF0ZSBwYXlyb2xsIHJlY29yZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAncmVjb3JkLTEyMydcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5ib2R5ID0ge1xuICAgICAgICBncm9zc19wYXk6IDU1MDAsXG4gICAgICAgIHRvdGFsX2RlZHVjdGlvbnM6IDExMDAsXG4gICAgICAgIG5ldF9wYXk6IDQ0MDBcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG1vY2tVcGRhdGVkUmVjb3JkID0ge1xuICAgICAgICBpZDogJ3JlY29yZC0xMjMnLFxuICAgICAgICBwYXlyb2xsX3BlcmlvZF9pZDogJ3BlcmlvZC0xMjMnLFxuICAgICAgICBlbXBsb3llZV9pZDogJ2VtcC0xMjMnLFxuICAgICAgICBiYXNlX3NhbGFyeTogNTAwMDAsXG4gICAgICAgIHRvdGFsX3dvcmtlZF9ob3VyczogMTYwLFxuICAgICAgICBob3VybHlfcmF0ZTogMzEyLjUsXG4gICAgICAgIHRvdGFsX3JlZ3VsYXJfaG91cnM6IDE2MCxcbiAgICAgICAgdG90YWxfb3ZlcnRpbWVfaG91cnM6IDAsXG4gICAgICAgIHRvdGFsX2xhdGVfaG91cnM6IDAsXG4gICAgICAgIGxhdGVfZGVkdWN0aW9uczogMCxcbiAgICAgICAgcGFpZF9sZWF2ZV9ob3VyczogMCxcbiAgICAgICAgZ3Jvc3NfcGF5OiA1NTAwLFxuICAgICAgICBuZXRfcGF5OiA0NDAwLFxuICAgICAgICB0b3RhbF9kZWR1Y3Rpb25zOiAxMTAwLFxuICAgICAgICB0b3RhbF9iZW5lZml0czogMCxcbiAgICAgICAgc3RhdHVzOiAncHJvY2Vzc2VkJyBhcyBjb25zdCxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKSxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKVxuICAgICAgfTtcblxuICAgICAgbW9ja1BheXJvbGxTZXJ2aWNlLnVwZGF0ZVBheXJvbGxSZWNvcmQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1VwZGF0ZWRSZWNvcmQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHBheXJvbGxDb250cm9sbGVyLnVwZGF0ZVBheXJvbGxSZWNvcmQobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLnVwZGF0ZVBheXJvbGxSZWNvcmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdyZWNvcmQtMTIzJywge1xuICAgICAgICBncm9zc19wYXk6IDU1MDAsXG4gICAgICAgIHRvdGFsX2RlZHVjdGlvbnM6IDExMDAsXG4gICAgICAgIG5ldF9wYXk6IDQ0MDBcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5zdGF0dXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDIwMCk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLmpzb24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogJ1BheXJvbGwgcmVjb3JkIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogbW9ja1VwZGF0ZWRSZWNvcmQsXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIDQwNCBpZiByZWNvcmQgbm90IGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QucGFyYW1zID0ge1xuICAgICAgICBpZDogJ25vbmV4aXN0ZW50LXJlY29yZCdcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5ib2R5ID0ge1xuICAgICAgICBncm9zc19wYXk6IDU1MDBcbiAgICAgIH07XG5cbiAgICAgIG1vY2tQYXlyb2xsU2VydmljZS51cGRhdGVQYXlyb2xsUmVjb3JkLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHBheXJvbGxDb250cm9sbGVyLnVwZGF0ZVBheXJvbGxSZWNvcmQobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoNDA0KTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ1BheXJvbGwgcmVjb3JkIG5vdCBmb3VuZCcsXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2FwcHJvdmVQYXlyb2xsUmVjb3JkJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYXBwcm92ZSBwYXlyb2xsIHJlY29yZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAncmVjb3JkLTEyMydcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5ib2R5ID0ge1xuICAgICAgICBjb21tZW50czogJ0FwcHJvdmVkIGZvciBwYXltZW50J1xuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja0FwcHJvdmVkUmVjb3JkID0ge1xuICAgICAgICBpZDogJ3JlY29yZC0xMjMnLFxuICAgICAgICBwYXlyb2xsX3BlcmlvZF9pZDogJ3BlcmlvZC0xMjMnLFxuICAgICAgICBlbXBsb3llZV9pZDogJ2VtcC0xMjMnLFxuICAgICAgICBiYXNlX3NhbGFyeTogNTAwMDAsXG4gICAgICAgIHRvdGFsX3dvcmtlZF9ob3VyczogMTYwLFxuICAgICAgICBob3VybHlfcmF0ZTogMzEyLjUsXG4gICAgICAgIHRvdGFsX3JlZ3VsYXJfaG91cnM6IDE2MCxcbiAgICAgICAgdG90YWxfb3ZlcnRpbWVfaG91cnM6IDAsXG4gICAgICAgIHRvdGFsX2xhdGVfaG91cnM6IDAsXG4gICAgICAgIGxhdGVfZGVkdWN0aW9uczogMCxcbiAgICAgICAgcGFpZF9sZWF2ZV9ob3VyczogMCxcbiAgICAgICAgZ3Jvc3NfcGF5OiA1MDAwMCxcbiAgICAgICAgbmV0X3BheTogNDUwMDAsXG4gICAgICAgIHRvdGFsX2RlZHVjdGlvbnM6IDUwMDAsXG4gICAgICAgIHRvdGFsX2JlbmVmaXRzOiAwLFxuICAgICAgICBzdGF0dXM6ICdwcm9jZXNzZWQnIGFzIGNvbnN0LFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpXG4gICAgICB9O1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UuYXBwcm92ZVBheXJvbGxSZWNvcmQubW9ja1Jlc29sdmVkVmFsdWUobW9ja0FwcHJvdmVkUmVjb3JkKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5hcHByb3ZlUGF5cm9sbFJlY29yZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUGF5cm9sbFNlcnZpY2UuYXBwcm92ZVBheXJvbGxSZWNvcmQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdyZWNvcmQtMTIzJywge1xuICAgICAgICBjb21tZW50czogJ0FwcHJvdmVkIGZvciBwYXltZW50J1xuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCByZWNvcmQgYXBwcm92ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgZGF0YTogbW9ja0FwcHJvdmVkUmVjb3JkLFxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtMTIzJ1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiA0MDQgaWYgcmVjb3JkIG5vdCBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIG1vY2tSZXF1ZXN0LnBhcmFtcyA9IHtcbiAgICAgICAgaWQ6ICdub25leGlzdGVudC1yZWNvcmQnXG4gICAgICB9O1xuICAgICAgbW9ja1JlcXVlc3QuYm9keSA9IHtcbiAgICAgICAgY29tbWVudHM6ICdBcHByb3ZlZCdcbiAgICAgIH07XG5cbiAgICAgIG1vY2tQYXlyb2xsU2VydmljZS5hcHByb3ZlUGF5cm9sbFJlY29yZC5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5hcHByb3ZlUGF5cm9sbFJlY29yZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDQpO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCByZWNvcmQgbm90IGZvdW5kJyxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnbWFya1BheXJvbGxBc1BhaWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBtYXJrIHBheXJvbGwgYXMgcGFpZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAncmVjb3JkLTEyMydcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5ib2R5ID0ge1xuICAgICAgICBwYXltZW50X2RhdGU6ICcyMDI0LTAxLTMxJyxcbiAgICAgICAgcGF5bWVudF9tZXRob2Q6ICdiYW5rX3RyYW5zZmVyJyxcbiAgICAgICAgdHJhbnNhY3Rpb25faWQ6ICdUWE4tMTIzNDU2J1xuICAgICAgfTtcblxuICAgICAgY29uc3QgbW9ja1BhaWRSZWNvcmQgPSB7XG4gICAgICAgIGlkOiAncmVjb3JkLTEyMycsXG4gICAgICAgIHBheXJvbGxfcGVyaW9kX2lkOiAncGVyaW9kLTEyMycsXG4gICAgICAgIGVtcGxveWVlX2lkOiAnZW1wLTEyMycsXG4gICAgICAgIGJhc2Vfc2FsYXJ5OiA1MDAwMCxcbiAgICAgICAgdG90YWxfd29ya2VkX2hvdXJzOiAxNjAsXG4gICAgICAgIGhvdXJseV9yYXRlOiAzMTIuNSxcbiAgICAgICAgdG90YWxfcmVndWxhcl9ob3VyczogMTYwLFxuICAgICAgICB0b3RhbF9vdmVydGltZV9ob3VyczogMCxcbiAgICAgICAgdG90YWxfbGF0ZV9ob3VyczogMCxcbiAgICAgICAgbGF0ZV9kZWR1Y3Rpb25zOiAwLFxuICAgICAgICBwYWlkX2xlYXZlX2hvdXJzOiAwLFxuICAgICAgICBncm9zc19wYXk6IDUwMDAwLFxuICAgICAgICBuZXRfcGF5OiA0NTAwMCxcbiAgICAgICAgdG90YWxfZGVkdWN0aW9uczogNTAwMCxcbiAgICAgICAgdG90YWxfYmVuZWZpdHM6IDAsXG4gICAgICAgIHN0YXR1czogJ3BhaWQnIGFzIGNvbnN0LFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpXG4gICAgICB9O1xuXG4gICAgICBtb2NrUGF5cm9sbFNlcnZpY2UubWFya1BheXJvbGxBc1BhaWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1BhaWRSZWNvcmQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGF3YWl0IHBheXJvbGxDb250cm9sbGVyLm1hcmtQYXlyb2xsQXNQYWlkKG1vY2tSZXF1ZXN0IGFzIFJlcXVlc3QsIG1vY2tSZXNwb25zZSBhcyBSZXNwb25zZSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KG1vY2tQYXlyb2xsU2VydmljZS5tYXJrUGF5cm9sbEFzUGFpZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3JlY29yZC0xMjMnLCB7XG4gICAgICAgIHBheW1lbnRfZGF0ZTogbmV3IERhdGUoJzIwMjQtMDEtMzEnKSxcbiAgICAgICAgcGF5bWVudF9tZXRob2Q6ICdiYW5rX3RyYW5zZmVyJyxcbiAgICAgICAgdHJhbnNhY3Rpb25faWQ6ICdUWE4tMTIzNDU2J1xuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCBtYXJrZWQgYXMgcGFpZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkYXRhOiBtb2NrUGFpZFJlY29yZCxcbiAgICAgICAgcmVxdWVzdElkOiAndGVzdC1yZXF1ZXN0LTEyMydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gNDAwIGZvciBtaXNzaW5nIHBheW1lbnQgaW5mb3JtYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBtb2NrUmVxdWVzdC5wYXJhbXMgPSB7XG4gICAgICAgIGlkOiAncmVjb3JkLTEyMydcbiAgICAgIH07XG4gICAgICBtb2NrUmVxdWVzdC5ib2R5ID0ge1xuICAgICAgICBwYXltZW50X2RhdGU6ICcyMDI0LTAxLTMxJ1xuICAgICAgICAvLyBwYXltZW50X21ldGhvZCBhbmQgdHJhbnNhY3Rpb25faWQgbWlzc2luZ1xuICAgICAgfTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5tYXJrUGF5cm9sbEFzUGFpZChtb2NrUmVxdWVzdCBhcyBSZXF1ZXN0LCBtb2NrUmVzcG9uc2UgYXMgUmVzcG9uc2UpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2Uuc3RhdHVzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCg0MDApO1xuICAgICAgZXhwZWN0KG1vY2tSZXNwb25zZS5qc29uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5bWVudCBkYXRlLCBtZXRob2QsIGFuZCB0cmFuc2FjdGlvbiBJRCBhcmUgcmVxdWlyZWQnLFxuICAgICAgICByZXF1ZXN0SWQ6ICd0ZXN0LXJlcXVlc3QtMTIzJ1xuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLm1hcmtQYXlyb2xsQXNQYWlkKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnZ2V0UGF5cm9sbFN0YXRzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgZ2V0IHBheXJvbGwgc3RhdHMgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgbW9ja1JlcXVlc3QucXVlcnkgPSB7XG4gICAgICAgIHBlcmlvZDogJzIwMjQtMDEnXG4gICAgICB9O1xuXG4gICAgICBjb25zdCBtb2NrU3RhdHMgPSB7XG4gICAgICAgIHRvdGFsRW1wbG95ZWVzOiAyNSxcbiAgICAgICAgdG90YWxQYXlyb2xsOiAxNTAwMDAwLFxuICAgICAgICBwcm9jZXNzZWRQZXJpb2RzOiAxMSxcbiAgICAgICAgcGVuZGluZ1BlcmlvZHM6IDFcbiAgICAgIH07XG5cbiAgICAgIG1vY2tQYXlyb2xsU2VydmljZS5nZXRQYXlyb2xsU3RhdHMubW9ja1Jlc29sdmVkVmFsdWUobW9ja1N0YXRzKTtcblxuICAgICAgLy8gQWN0XG4gICAgICBhd2FpdCBwYXlyb2xsQ29udHJvbGxlci5nZXRQYXlyb2xsU3RhdHMobW9ja1JlcXVlc3QgYXMgUmVxdWVzdCwgbW9ja1Jlc3BvbnNlIGFzIFJlc3BvbnNlKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QobW9ja1BheXJvbGxTZXJ2aWNlLmdldFBheXJvbGxTdGF0cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBwZXJpb2Q6ICcyMDI0LTAxJ1xuICAgICAgfSk7XG4gICAgICBleHBlY3QobW9ja1Jlc3BvbnNlLnN0YXR1cykudG9IYXZlQmVlbkNhbGxlZFdpdGgoMjAwKTtcbiAgICAgIGV4cGVjdChtb2NrUmVzcG9uc2UuanNvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUGF5cm9sbCBzdGF0aXN0aWNzIHJldHJpZXZlZCBzdWNjZXNzZnVsbHknLFxuICAgICAgICBkYXRhOiBtb2NrU3RhdHMsXG4gICAgICAgIHJlcXVlc3RJZDogJ3Rlc3QtcmVxdWVzdC0xMjMnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==