{"version":3,"names":["PayrollPeriod_1","cov_u5rw4oz9l","s","require","PayrollRecord_1","PayrollDeduction_1","DeductionType_1","EmployeeDeductionBalance_1","BenefitType_1","EmployeeBenefit_1","Employee_1","database_1","leavePolicies_1","AttendanceSession_1","logger_1","__importDefault","attendanceHoursCalculator_1","PayrollService","createPayrollPeriod","data","f","start_date","end_date","b","Error","overlappingPeriods","payrollPeriodModel","findByDateRange","length","period","create","default","info","periodId","id","periodName","period_name","error","message","getPayrollPeriods","params","findAll","getPayrollPeriod","findById","updatePayrollPeriod","update","deletePayrollPeriod","records","payrollRecordModel","findByPayrollPeriod","delete","calculateEmployeePayroll","employeeId","payrollPeriodId","employee","employeeModel","findByIdWithDetails","startDate","Date","endDate","expectedWorkingDays","calculateWorkingDays","expectedHours","attendanceData","calculateAttendanceHours","totalWorkedHours","totalRegularHours","totalOvertimeHours","totalLateHours","paidLeaveHours","getPaidLeaveHours","baseSalary","base_salary","Number","hourlyRate","lateDeductions","employeeDeductionBalances","employeeDeductionBalanceModel","findActiveByEmployee","employeeDeductions","totalEmployeeDeductions","balance","monthlyAmount","monthly_deduction_amount","remainingBalance","remaining_balance","actualDeduction","Math","min","push","type","deduction_type_name","amount","employeeBenefits","employeeBenefitModel","benefits","totalBenefits","benefit","benefitAmount","benefit_type","name","totalPaidHours","grossPay","netPay","payrollData","employee_id","user","first_name","last_name","department","totalDeductions","generatePayrollRecords","departmentId","employees","status","department_id","existingRecord","findByPeriodAndEmployee","updatedRecord","total_worked_hours","hourly_rate","total_regular_hours","total_overtime_hours","total_late_hours","late_deductions","paid_leave_hours","gross_pay","net_pay","total_deductions","total_benefits","newRecord","payroll_period_id","record","payrollDeductionModel","deleteByPayrollRecord","deduction","deductionType","deductionTypeModel","findByName","payroll_record_id","deduction_type_id","findByEmployee","find","is_active","recordCount","getPayrollRecords","findAllWithEmployee","updatePayrollRecordStatus","recordId","completePayrollPeriod","updatedPeriod","bulkUpdatePayrollRecordsToPaid","options","getPool","Promise","resolve","then","__importStar","pool","whereClause","paramIndex","recordIds","updateQuery","result","query","updatedCount","rowCount","checkAndCompletePayrollPeriod","checkQuery","total_records","paid_records","rows","parseInt","bulkUpdatePayrollRecordsStatus","updatedRecords","reprocessPayrollRecords","existingRecords","deletedCount","PayrollApprovalService","payrollApprovalService","resetApprovalStatusForPeriod","newRecords","newRecordCount","getPayrollRecord","updatePayrollRecord","getPayrollSummary","totalEmployees","totalGrossPay","reduce","sum","processedRecords","pendingRecords","deductions","findByPayrollRecord","recordDeductions","totalNetPay","summary","approvePayrollRecord","approverId","markPayrollAsPaid","exportPayrollRecords","format","generateCSV","generatePDF","headers","map","employeeName","hoursWorked","createdAt","toLocaleDateString","csvContent","row","field","join","content","Buffer","from","getPayrollStats","getTotalEmployeeCount","totalPayrollResult","getTotalNetPay","totalPayroll","processedPeriods","countByStatus","pendingPeriods","createDeductionType","getDeductionTypes","updateDeductionType","deleteDeductionType","createBenefitType","benefitTypeModel","getBenefitTypes","updateBenefitType","deleteBenefitType","getEmployeeDeductionBalances","createEmployeeDeductionBalance","updateEmployeeDeductionBalance","deleteEmployeeDeductionBalance","getEmployeeBenefits","createEmployeeBenefit","updateEmployeeBenefit","deleteEmployeeBenefit","uploadEmployeeBenefits","csvData","errors","successData","i","employee_name","benefit_type_name","benefit_type_id","findByEmployeeId","benefitType","findByEmployeeAndBenefitTypeAndDate","benefitData","parseFloat","bulkCreate","success","uploadEmployeeDeductionBalances","findByEmployeeAndDeductionTypeAndDate","balanceData","original_amount","workingDays","currentDate","getDay","setDate","getDate","attendanceQuery","attendanceRecords","totalWorkingDays","sessions","attendanceSessionModel","getSessionsByAttendanceRecord","hoursResult","defaultHoursCalculator","calculateFromSessions","totalHours","date","morningHours","afternoonHours","regularHours","overtimeHours","max","effectiveMorningStart","effectiveAfternoonStart","round","generatePayrollRecordsForAllDepartments","departmentsQuery","departmentsResult","departmentResults","getPayrollRecordsByDepartmentAndPeriod","leaveQuery","leave","leaveType","leave_type","leaveDays","total_days","isLeaveTypePaid","days","paymentPercentage","getLeavePaymentPercentage","maxPaidDaysPerYear","getMaxPaidDaysPerYear","paidDays","requestedDays","paidHours","totalDays","leaveCount","exportPeriodPaystubsPDF","PDFDocument","doc","margin","buffers","on","bind","limit","fontSize","text","align","formatDate","moveDown","addPaystubPage","end","reject","pdfBuffer","concat","exportDepartmentPaystubsPDF","userId","DepartmentHeadService","departmentHeadService","getDepartmentInfo","formatCurrency","undefined","num","isNaN","isFinite","toFixed","addPage","underline","lateHours","leavePay","page","height","toUpperCase","exports","payrollService"],"sources":["/home/kim/tito/server/src/services/payroll/payrollService.ts"],"sourcesContent":["import { payrollPeriodModel, PayrollPeriod, CreatePayrollPeriodData } from '../../models/payroll/PayrollPeriod';\nimport { payrollRecordModel, PayrollRecord, PayrollRecordWithEmployee } from '../../models/payroll/PayrollRecord';\nimport { payrollDeductionModel } from '../../models/payroll/PayrollDeduction';\nimport { deductionTypeModel } from '../../models/payroll/DeductionType';\nimport { employeeDeductionBalanceModel } from '../../models/payroll/EmployeeDeductionBalance';\nimport { benefitTypeModel } from '../../models/payroll/BenefitType';\nimport { employeeBenefitModel } from '../../models/payroll/EmployeeBenefit';\nimport { employeeModel } from '../../models/hr/Employee';\nimport { getPool } from '../../config/database';\nimport { isLeaveTypePaid, getLeavePaymentPercentage, getMaxPaidDaysPerYear } from '../../config/leavePolicies';\n// import { attendanceRecordModel } from '../../models/attendance/AttendanceRecord';\nimport { attendanceSessionModel } from '../../models/attendance/AttendanceSession';\n// import { overtimeRequestModel } from '../../models/attendance/OvertimeRequest';\n// import { systemSettingsModel } from '../../models/hr/SystemSettings'; // Temporarily disabled\nimport logger from '../../utils/logger';\nimport { defaultHoursCalculator } from '../../utils/attendanceHoursCalculator';\n\nexport interface PayrollCalculationData {\n  employeeId: string;\n  payrollPeriodId: string;\n  baseSalary: number;\n  totalWorkedHours: number;\n  totalRegularHours: number;\n  totalOvertimeHours: number;\n  totalLateHours: number;\n  lateDeductions: number;\n  employeeDeductions: Array<{\n    type: string;\n    amount: number;\n    remainingBalance: number;\n  }>;\n  employeeBenefits: Array<{\n    type: string;\n    amount: number;\n  }>;\n}\n\nexport interface PayrollSummary {\n  period: PayrollPeriod;\n  totalEmployees: number;\n  totalGrossPay: number;\n  totalDeductions: number;\n  totalNetPay: number;\n  processedRecords: number;\n  pendingRecords: number;\n}\n\nexport interface EmployeePayrollData {\n  employee: {\n    id: string;\n    employee_id: string;\n    name: string;\n    department: string;\n  };\n  baseSalary: number;\n  totalWorkedHours: number;\n  totalRegularHours: number;\n  totalOvertimeHours: number;\n  totalLateHours: number;\n  lateDeductions: number;\n  hourlyRate: number;\n  grossPay: number;\n  employeeDeductions: Array<{\n    type: string;\n    amount: number;\n    remainingBalance: number;\n  }>;\n  employeeBenefits: Array<{\n    type: string;\n    amount: number;\n  }>;\n  totalDeductions: number;\n  totalBenefits: number;\n  netPay: number;\n  paidLeaveHours: number; // Hours from approved leave days\n}\n\nclass PayrollService {\n  async createPayrollPeriod(data: CreatePayrollPeriodData): Promise<PayrollPeriod> {\n    try {\n      // Validate date range\n      if (data.start_date >= data.end_date) {\n        throw new Error('Start date must be before end date');\n      }\n\n      // Check for overlapping periods\n      const overlappingPeriods = await payrollPeriodModel.findByDateRange(data.start_date, data.end_date);\n      if (overlappingPeriods.length > 0) {\n        throw new Error('Payroll period overlaps with existing period');\n      }\n\n      const period = await payrollPeriodModel.create(data);\n      logger.info('Payroll period created', { periodId: period.id, periodName: period.period_name });\n      return period;\n    } catch (error) {\n      logger.error('Error creating payroll period', { error: (error as Error).message, data });\n      throw error;\n    }\n  }\n\n  async getPayrollPeriods(params: any = {}): Promise<{ periods: PayrollPeriod[]; total: number }> {\n    try {\n      return await payrollPeriodModel.findAll(params);\n    } catch (error) {\n      logger.error('Error getting payroll periods', { error: (error as Error).message, params });\n      throw error;\n    }\n  }\n\n  async getPayrollPeriod(id: string): Promise<PayrollPeriod | null> {\n    try {\n      return await payrollPeriodModel.findById(id);\n    } catch (error) {\n      logger.error('Error getting payroll period', { error: (error as Error).message, id });\n      throw error;\n    }\n  }\n\n  async updatePayrollPeriod(id: string, data: any): Promise<PayrollPeriod | null> {\n    try {\n      return await payrollPeriodModel.update(id, data);\n    } catch (error) {\n      logger.error('Error updating payroll period', { error: (error as Error).message, id, data });\n      throw error;\n    }\n  }\n\n  async deletePayrollPeriod(id: string): Promise<boolean> {\n    try {\n      // Check if period has payroll records\n      const records = await payrollRecordModel.findByPayrollPeriod(id);\n      if (records.length > 0) {\n        throw new Error('Cannot delete payroll period with existing records');\n      }\n\n      return await payrollPeriodModel.delete(id);\n    } catch (error) {\n      logger.error('Error deleting payroll period', { error: (error as Error).message, id });\n      throw error;\n    }\n  }\n\n  async calculateEmployeePayroll(employeeId: string, payrollPeriodId: string): Promise<EmployeePayrollData> {\n    try {\n      // Get employee data\n      const employee = await employeeModel.findByIdWithDetails(employeeId);\n      if (!employee) {\n        throw new Error('Employee not found');\n      }\n\n      // Get payroll period\n      const period = await payrollPeriodModel.findById(payrollPeriodId);\n      if (!period) {\n        throw new Error('Payroll period not found');\n      }\n\n      // Calculate expected working days for the month\n      const startDate = new Date(period.start_date);\n      const endDate = new Date(period.end_date);\n      const expectedWorkingDays = this.calculateWorkingDays(startDate, endDate);\n      const expectedHours = expectedWorkingDays * 8; // 8 hours per working day\n\n      // Get attendance data using the mathematical formulation\n      // This uses grace periods, session caps, and proper morning/afternoon calculations\n      const attendanceData = await this.calculateAttendanceHours(\n        employeeId, \n        period.start_date, \n        period.end_date\n      );\n      \n      const totalWorkedHours = attendanceData.totalWorkedHours;\n      const totalRegularHours = attendanceData.totalRegularHours;\n      const totalOvertimeHours = attendanceData.totalOvertimeHours;\n      const totalLateHours = attendanceData.totalLateHours;\n\n      // Get approved leave days for the payroll period\n      const paidLeaveHours = await this.getPaidLeaveHours(employeeId, startDate, endDate);\n\n      // Debug logging for payroll calculation\n      logger.info('Payroll calculation debug', {\n        employeeId,\n        payrollPeriodId,\n        attendanceData: attendanceData,\n        totalWorkedHours,\n        totalRegularHours,\n        totalOvertimeHours,\n        totalLateHours,\n        expectedHours,\n        baseSalary: employee.base_salary\n      });\n\n      // Parse base salary\n      const baseSalary = Number(employee.base_salary) || 0;\n\n      // Calculate hourly rate\n      const hourlyRate = baseSalary / expectedHours;\n\n      // Calculate late deductions\n      const lateDeductions = totalLateHours * hourlyRate;\n\n      // Get employee-specific deduction balances\n      const employeeDeductionBalances = await employeeDeductionBalanceModel.findActiveByEmployee(employeeId);\n      \n      // Apply employee deductions (until balance reaches zero)\n      const employeeDeductions: Array<{ type: string; amount: number; remainingBalance: number }> = [];\n      let totalEmployeeDeductions = 0;\n\n      for (const balance of employeeDeductionBalances) {\n        // Calculate actual deduction (minimum of monthly amount or remaining balance)\n        const monthlyAmount = Number(balance.monthly_deduction_amount) || 0;\n        const remainingBalance = Number(balance.remaining_balance) || 0;\n        const actualDeduction = Math.min(monthlyAmount, remainingBalance);\n        \n        if (actualDeduction > 0) {\n          employeeDeductions.push({\n            type: balance.deduction_type_name || 'Unknown',\n            amount: actualDeduction,\n            remainingBalance: remainingBalance - actualDeduction\n          });\n          totalEmployeeDeductions += actualDeduction;\n        }\n      }\n\n      // Get employee benefits\n      const employeeBenefits = await employeeBenefitModel.findActiveByEmployee(employeeId);\n      \n      const benefits: Array<{ type: string; amount: number }> = [];\n      let totalBenefits = 0;\n\n      for (const benefit of employeeBenefits) {\n        const benefitAmount = Number(benefit.amount) || 0;\n        benefits.push({\n          type: benefit.benefit_type?.name || 'Unknown',\n          amount: benefitAmount\n        });\n        totalBenefits += benefitAmount;\n      }\n\n      // Calculate gross pay based on worked hours + paid leave hours: (total paid hours / total working hours in month) * base salary\n      // Include approved leave days as paid time\n      const totalPaidHours = totalWorkedHours + paidLeaveHours;\n      const grossPay = expectedHours > 0 ? (totalPaidHours / expectedHours) * baseSalary : 0;\n      \n      // Calculate net pay: gross pay + benefits - deductions\n      const netPay = grossPay + totalBenefits - totalEmployeeDeductions - lateDeductions;\n\n      // Debug logging for gross pay calculation\n      logger.info('Gross pay calculation debug', {\n        employeeId,\n        totalWorkedHours,\n        paidLeaveHours,\n        totalPaidHours,\n        expectedHours,\n        baseSalary,\n        grossPay,\n        totalBenefits,\n        totalEmployeeDeductions,\n        lateDeductions,\n        netPay\n      });\n\n      const payrollData: EmployeePayrollData = {\n        employee: {\n          id: employee.id,\n          employee_id: employee.employee_id,\n          name: `${employee.user.first_name} ${employee.user.last_name}`,\n          department: employee.department?.name || 'N/A'\n        },\n        baseSalary: baseSalary, // Full monthly base salary\n        totalWorkedHours,\n        totalRegularHours,\n        totalOvertimeHours,\n        totalLateHours,\n        lateDeductions,\n        hourlyRate,\n        grossPay,\n        employeeDeductions,\n        employeeBenefits: benefits,\n        totalDeductions: totalEmployeeDeductions,\n        totalBenefits,\n        netPay,\n        paidLeaveHours // Add paid leave hours to the response\n      };\n\n      logger.info('Employee payroll calculated', { \n        employeeId, \n        payrollPeriodId, \n        baseSalary: employee.base_salary,\n        totalDeductions: totalEmployeeDeductions,\n        totalBenefits,\n        netPay \n      });\n\n      return payrollData;\n    } catch (error) {\n      logger.error('Error calculating employee payroll', { \n        error: (error as Error).message, \n        employeeId, \n        payrollPeriodId \n      });\n      throw error;\n    }\n  }\n\n  async generatePayrollRecords(payrollPeriodId: string, departmentId?: string): Promise<PayrollRecord[]> {\n    try {\n      // Get active employees - either all or filtered by department\n      const employees = departmentId \n        ? await employeeModel.findAll({ status: 'active', department_id: departmentId })\n        : await employeeModel.findAll({ status: 'active' });\n      const records: PayrollRecord[] = [];\n\n      for (const employee of employees.employees) {\n        // Calculate payroll for this employee using new logic\n        const payrollData = await this.calculateEmployeePayroll(employee.id, payrollPeriodId);\n\n        // Check if record already exists\n        const existingRecord = await payrollRecordModel.findByPeriodAndEmployee(\n          payrollPeriodId,\n          employee.id\n        );\n\n        if (existingRecord) {\n          // Update existing record\n          const updatedRecord = await payrollRecordModel.update(existingRecord.id, {\n            base_salary: payrollData.baseSalary,\n            total_worked_hours: payrollData.totalWorkedHours,\n            hourly_rate: payrollData.hourlyRate,\n            total_regular_hours: payrollData.totalRegularHours,\n            total_overtime_hours: payrollData.totalOvertimeHours,\n            total_late_hours: payrollData.totalLateHours,\n            late_deductions: payrollData.lateDeductions,\n            paid_leave_hours: payrollData.paidLeaveHours,\n            gross_pay: payrollData.grossPay,\n            net_pay: payrollData.netPay,\n            total_deductions: payrollData.totalDeductions,\n            total_benefits: payrollData.totalBenefits,\n            status: 'draft'\n          });\n\n          if (updatedRecord) {\n            records.push(updatedRecord);\n          }\n        } else {\n          // Create new record\n          const newRecord = await payrollRecordModel.create({\n            payroll_period_id: payrollPeriodId,\n            employee_id: employee.id,\n            base_salary: payrollData.baseSalary,\n            total_worked_hours: payrollData.totalWorkedHours,\n            hourly_rate: payrollData.hourlyRate,\n            total_regular_hours: payrollData.totalRegularHours,\n            total_overtime_hours: payrollData.totalOvertimeHours,\n            total_late_hours: payrollData.totalLateHours,\n            late_deductions: payrollData.lateDeductions,\n            paid_leave_hours: payrollData.paidLeaveHours,\n            gross_pay: payrollData.grossPay,\n            net_pay: payrollData.netPay,\n            total_deductions: payrollData.totalDeductions,\n            total_benefits: payrollData.totalBenefits,\n            status: 'draft'\n          });\n\n          records.push(newRecord);\n        }\n\n        // Create deduction records and update employee deduction balances\n        const record = records[records.length - 1];\n        if (record) {\n          // Delete existing deductions\n          await payrollDeductionModel.deleteByPayrollRecord(record.id);\n\n          // Create new deduction records and update balances\n          for (const deduction of payrollData.employeeDeductions) {\n            // Find the deduction type ID by name\n            const deductionType = await deductionTypeModel.findByName(deduction.type);\n            if (deductionType) {\n              await payrollDeductionModel.create({\n                payroll_record_id: record.id,\n                deduction_type_id: deductionType.id,\n                name: deduction.type,\n                amount: deduction.amount\n              });\n\n              // Update employee deduction balance\n              const employeeDeductionBalances = await employeeDeductionBalanceModel.findByEmployee(employee.id);\n              const balance = employeeDeductionBalances.find(b => b.deduction_type_id === deductionType.id);\n              \n              if (balance) {\n                await employeeDeductionBalanceModel.update(balance.id, {\n                  remaining_balance: deduction.remainingBalance,\n                  is_active: deduction.remainingBalance > 0\n                });\n              }\n            }\n          }\n        }\n      }\n\n      logger.info('Payroll records generated', { \n        payrollPeriodId, \n        recordCount: records.length \n      });\n\n      return records;\n    } catch (error) {\n      logger.error('Error generating payroll records', { \n        error: (error as Error).message, \n        payrollPeriodId \n      });\n      throw error;\n    }\n  }\n\n  async getPayrollRecords(params: any = {}): Promise<{ records: PayrollRecordWithEmployee[]; total: number }> {\n    try {\n      return await payrollRecordModel.findAllWithEmployee(params);\n    } catch (error) {\n      logger.error('Error getting payroll records', { error: (error as Error).message, params });\n      throw error;\n    }\n  }\n\n  /**\n   * Update payroll record status\n   */\n  async updatePayrollRecordStatus(recordId: string, status: 'draft' | 'processed' | 'paid'): Promise<PayrollRecord> {\n    try {\n      const updatedRecord = await payrollRecordModel.update(recordId, { status });\n      if (!updatedRecord) {\n        throw new Error('Payroll record not found');\n      }\n\n      logger.info('Payroll record status updated', {\n        recordId,\n        status,\n        employeeId: updatedRecord.employee_id\n      });\n\n      return updatedRecord;\n    } catch (error) {\n      logger.error('Error updating payroll record status', { \n        error: (error as Error).message, \n        recordId, \n        status \n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Mark payroll period as completed (when all departments have approved)\n   */\n  async completePayrollPeriod(periodId: string): Promise<PayrollPeriod> {\n    try {\n      const updatedPeriod = await payrollPeriodModel.update(periodId, { status: 'completed' });\n      if (!updatedPeriod) {\n        throw new Error('Payroll period not found');\n      }\n\n      logger.info('Payroll period marked as completed', {\n        periodId,\n        periodName: updatedPeriod.period_name\n      });\n\n      return updatedPeriod;\n    } catch (error) {\n      logger.error('Error completing payroll period', { \n        error: (error as Error).message, \n        periodId \n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Bulk update payroll records to paid status\n   */\n  async bulkUpdatePayrollRecordsToPaid(options: {\n    periodId?: string;\n    departmentId?: string;\n    recordIds?: string[];\n  }): Promise<{ updatedCount: number }> {\n    try {\n      const { getPool } = await import('../../config/database');\n      const pool = getPool();\n\n      let whereClause = '';\n      const params: any[] = [];\n      let paramIndex = 1;\n\n      if (options.periodId) {\n        whereClause += ` WHERE payroll_period_id = $${paramIndex}`;\n        params.push(options.periodId);\n        paramIndex++;\n      }\n\n      if (options.departmentId) {\n        whereClause += options.periodId ? ' AND' : ' WHERE';\n        whereClause += ` employee_id IN (SELECT id FROM employees WHERE department_id = $${paramIndex})`;\n        params.push(options.departmentId);\n        paramIndex++;\n      }\n\n      if (options.recordIds && options.recordIds.length > 0) {\n        whereClause += options.periodId || options.departmentId ? ' AND' : ' WHERE';\n        whereClause += ` id = ANY($${paramIndex})`;\n        params.push(options.recordIds);\n        paramIndex++;\n      }\n\n      const updateQuery = `\n        UPDATE payroll_records \n        SET status = 'paid', updated_at = CURRENT_TIMESTAMP\n        ${whereClause}\n      `;\n\n      const result = await pool.query(updateQuery, params);\n\n      logger.info('Bulk updated payroll records to paid', {\n        updatedCount: result.rowCount,\n        options\n      });\n\n      // If updating by periodId, check if all records in the period are now paid\n      if (options.periodId) {\n        await this.checkAndCompletePayrollPeriod(options.periodId);\n      }\n\n      return { updatedCount: result.rowCount || 0 };\n    } catch (error) {\n      logger.error('Error bulk updating payroll records to paid', { \n        error: (error as Error).message, \n        options \n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Check if all payroll records in a period are paid and auto-complete the period\n   */\n  async checkAndCompletePayrollPeriod(periodId: string): Promise<void> {\n    try {\n      const { getPool } = await import('../../config/database');\n      const pool = getPool();\n\n      // Check if all records in the period are paid\n      const checkQuery = `\n        SELECT \n          COUNT(*) as total_records,\n          COUNT(CASE WHEN status = 'paid' THEN 1 END) as paid_records\n        FROM payroll_records \n        WHERE payroll_period_id = $1\n      `;\n      \n      const result = await pool.query(checkQuery, [periodId]);\n      const { total_records, paid_records } = result.rows[0];\n      \n      // If all records are paid, complete the period\n      if (total_records > 0 && parseInt(total_records) === parseInt(paid_records)) {\n        await this.completePayrollPeriod(periodId);\n        logger.info(`Auto-completed payroll period ${periodId} - all records are paid`);\n      }\n    } catch (error) {\n      logger.error('Error checking and completing payroll period', { \n        error: (error as Error).message, \n        periodId \n      });\n    }\n  }\n\n\n\n\n  /**\n   * Bulk update payroll records status for a period\n   */\n  async bulkUpdatePayrollRecordsStatus(\n    payrollPeriodId: string, \n    status: 'draft' | 'processed' | 'paid',\n    departmentId?: string\n  ): Promise<PayrollRecord[]> {\n    try {\n      // Get all records for the period\n      const { records } = await payrollRecordModel.findAllWithEmployee({\n        payroll_period_id: payrollPeriodId,\n        department_id: departmentId\n      });\n\n      // Update each record\n      const updatedRecords: PayrollRecord[] = [];\n      for (const record of records) {\n        const updatedRecord = await payrollRecordModel.update(record.id, { status });\n        if (updatedRecord) {\n          updatedRecords.push(updatedRecord);\n        }\n      }\n\n      logger.info('Bulk payroll records status updated', {\n        payrollPeriodId,\n        status,\n        departmentId,\n        updatedCount: updatedRecords.length\n      });\n\n      return updatedRecords;\n    } catch (error) {\n      logger.error('Error bulk updating payroll records status', { \n        error: (error as Error).message, \n        payrollPeriodId, \n        status,\n        departmentId\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Reprocess payroll records for a period (clears existing records and regenerates)\n   */\n  async reprocessPayrollRecords(payrollPeriodId: string, departmentId?: string): Promise<PayrollRecord[]> {\n    try {\n      logger.info('Starting payroll reprocessing', {\n        payrollPeriodId,\n        departmentId\n      });\n\n      // First, delete existing payroll records for this period\n      const existingRecords = await payrollRecordModel.findAllWithEmployee({\n        payroll_period_id: payrollPeriodId,\n        department_id: departmentId\n      });\n\n      for (const record of existingRecords.records) {\n        // Delete associated payroll deductions first\n        await payrollDeductionModel.deleteByPayrollRecord(record.id);\n        // Delete the payroll record\n        await payrollRecordModel.delete(record.id);\n      }\n\n      logger.info('Cleared existing payroll records', {\n        payrollPeriodId,\n        departmentId,\n        deletedCount: existingRecords.records.length\n      });\n\n      // Reset approval status for this period (if reprocessing all departments)\n      if (!departmentId) {\n        const { PayrollApprovalService } = await import('./payrollApprovalService');\n        const payrollApprovalService = new PayrollApprovalService();\n        await payrollApprovalService.resetApprovalStatusForPeriod(payrollPeriodId);\n        logger.info('Reset approval status for payroll period', { payrollPeriodId });\n      }\n\n      // Now regenerate the payroll records\n      const newRecords = await this.generatePayrollRecords(payrollPeriodId, departmentId);\n\n      logger.info('Payroll reprocessing completed', {\n        payrollPeriodId,\n        departmentId,\n        newRecordCount: newRecords.length\n      });\n\n      return newRecords;\n    } catch (error) {\n      logger.error('Error reprocessing payroll records', { \n        error: (error as Error).message, \n        payrollPeriodId, \n        departmentId\n      });\n      throw error;\n    }\n  }\n\n  async getPayrollRecord(id: string): Promise<PayrollRecord | null> {\n    try {\n      return await payrollRecordModel.findById(id);\n    } catch (error) {\n      logger.error('Error getting payroll record', { error: (error as Error).message, id });\n      throw error;\n    }\n  }\n\n  async updatePayrollRecord(id: string, data: any): Promise<PayrollRecord | null> {\n    try {\n      return await payrollRecordModel.update(id, data);\n    } catch (error) {\n      logger.error('Error updating payroll record', { error: (error as Error).message, id, data });\n      throw error;\n    }\n  }\n\n  async getPayrollSummary(payrollPeriodId: string): Promise<PayrollSummary> {\n    try {\n      const period = await payrollPeriodModel.findById(payrollPeriodId);\n      if (!period) {\n        throw new Error('Payroll period not found');\n      }\n\n      const records = await payrollRecordModel.findByPayrollPeriod(payrollPeriodId);\n      \n      const totalEmployees = records.length;\n      const totalGrossPay = records.reduce((sum, record) => sum + record.gross_pay, 0);\n      \n      let totalDeductions = 0;\n      let processedRecords = 0;\n      let pendingRecords = 0;\n\n      for (const record of records) {\n        const deductions = await payrollDeductionModel.findByPayrollRecord(record.id);\n        const recordDeductions = deductions.reduce((sum, deduction) => sum + deduction.amount, 0);\n        totalDeductions += recordDeductions;\n\n        if (record.status === 'processed' || record.status === 'paid') {\n          processedRecords++;\n        } else {\n          pendingRecords++;\n        }\n      }\n\n      const totalNetPay = totalGrossPay - totalDeductions;\n\n      const summary: PayrollSummary = {\n        period,\n        totalEmployees,\n        totalGrossPay,\n        totalDeductions,\n        totalNetPay,\n        processedRecords,\n        pendingRecords\n      };\n\n      logger.info('Payroll summary generated', { \n        payrollPeriodId, \n        totalEmployees, \n        totalNetPay \n      });\n\n      return summary;\n    } catch (error) {\n      logger.error('Error getting payroll summary', { \n        error: (error as Error).message, \n        payrollPeriodId \n      });\n      throw error;\n    }\n  }\n\n  async approvePayrollRecord(recordId: string, approverId: string): Promise<PayrollRecord | null> {\n    try {\n      const record = await payrollRecordModel.update(recordId, { status: 'processed' });\n      \n      if (record) {\n        logger.info('Payroll record approved', { recordId, approverId });\n      }\n\n      return record;\n    } catch (error) {\n      logger.error('Error approving payroll record', { \n        error: (error as Error).message, \n        recordId, \n        approverId \n      });\n      throw error;\n    }\n  }\n\n  async markPayrollAsPaid(recordId: string): Promise<PayrollRecord | null> {\n    try {\n      const record = await payrollRecordModel.update(recordId, { status: 'paid' });\n      \n      if (record) {\n        logger.info('Payroll record marked as paid', { recordId });\n      }\n\n      return record;\n    } catch (error) {\n      logger.error('Error marking payroll as paid', { \n        error: (error as Error).message, \n        recordId \n      });\n      throw error;\n    }\n  }\n\n  async exportPayrollRecords(format: 'csv' | 'pdf', params: any = {}): Promise<string | Buffer> {\n    try {\n      const records = await payrollRecordModel.findAllWithEmployee(params);\n      \n      if (format === 'csv') {\n        return this.generateCSV(records.records);\n      } else {\n        return this.generatePDF(records.records);\n      }\n    } catch (error) {\n      logger.error('Error exporting payroll records', { \n        error: (error as Error).message, \n        format,\n        params \n      });\n      throw error;\n    }\n  }\n\n  private generateCSV(records: any[]): string {\n    const headers = [\n      'Employee ID',\n      'Employee Name',\n      'Period',\n      'Base Salary',\n      'Hours Worked',\n      'Gross Pay',\n      'Deductions',\n      'Benefits',\n      'Net Pay',\n      'Status',\n      'Created At'\n    ];\n\n    const rows = records.map(record => [\n      record.employeeId,\n      record.employeeName || 'N/A',\n      record.periodName || 'N/A',\n      record.baseSalary || 0,\n      record.hoursWorked || 0,\n      record.grossPay || 0,\n      record.totalDeductions || 0,\n      record.totalBenefits || 0,\n      record.netPay || 0,\n      record.status || 'draft',\n      record.createdAt ? new Date(record.createdAt).toLocaleDateString() : 'N/A'\n    ]);\n\n    const csvContent = [headers, ...rows]\n      .map(row => row.map(field => `\"${field}\"`).join(','))\n      .join('\\n');\n\n    return csvContent;\n  }\n\n  private generatePDF(records: any[]): Buffer {\n    // For now, return a simple text representation\n    // In a real implementation, you would use a PDF library like puppeteer or pdfkit\n    const content = records.map(record => \n      `${record.employeeName || 'N/A'} - ${record.periodName || 'N/A'} - ₱${record.netPay || 0}`\n    ).join('\\n');\n    \n    return Buffer.from(content, 'utf-8');\n  }\n\n  async getPayrollStats(): Promise<{\n    totalEmployees: number;\n    totalPayroll: number;\n    processedPeriods: number;\n    pendingPeriods: number;\n  }> {\n    try {\n      // Get total employees\n      const totalEmployees = await employeeModel.getTotalEmployeeCount();\n      \n      // Get total payroll (sum of all net pay from completed records)\n      const totalPayrollResult = await payrollRecordModel.getTotalNetPay();\n      const totalPayroll = totalPayrollResult || 0;\n      \n      // Get processed periods (completed status)\n      const processedPeriods = await payrollPeriodModel.countByStatus(['completed']);\n      \n      // Get pending periods (draft status)\n      const pendingPeriods = await payrollPeriodModel.countByStatus(['draft']);\n\n      return {\n        totalEmployees,\n        totalPayroll,\n        processedPeriods,\n        pendingPeriods\n      };\n    } catch (error) {\n      logger.error('Error getting payroll statistics', { \n        error: (error as Error).message \n      });\n      throw error;\n    }\n  }\n\n  // New methods for deduction types management\n  async createDeductionType(data: any): Promise<any> {\n    try {\n      return await deductionTypeModel.create(data);\n    } catch (error) {\n      logger.error('Error creating deduction type', { error: (error as Error).message, data });\n      throw error;\n    }\n  }\n\n  async getDeductionTypes(params: any = {}): Promise<{ records: any[]; total: number }> {\n    try {\n      return await deductionTypeModel.findAll(params);\n    } catch (error) {\n      logger.error('Error getting deduction types', { error: (error as Error).message, params });\n      throw error;\n    }\n  }\n\n  async updateDeductionType(id: string, data: any): Promise<any> {\n    try {\n      return await deductionTypeModel.update(id, data);\n    } catch (error) {\n      logger.error('Error updating deduction type', { error: (error as Error).message, id, data });\n      throw error;\n    }\n  }\n\n  async deleteDeductionType(id: string): Promise<boolean> {\n    try {\n      return await deductionTypeModel.delete(id);\n    } catch (error) {\n      logger.error('Error deleting deduction type', { error: (error as Error).message, id });\n      throw error;\n    }\n  }\n\n  // New methods for benefit types management\n  async createBenefitType(data: any): Promise<any> {\n    try {\n      return await benefitTypeModel.create(data);\n    } catch (error) {\n      logger.error('Error creating benefit type', { error: (error as Error).message, data });\n      throw error;\n    }\n  }\n\n  async getBenefitTypes(params: any = {}): Promise<{ records: any[]; total: number }> {\n    try {\n      return await benefitTypeModel.findAll(params);\n    } catch (error) {\n      logger.error('Error getting benefit types', { error: (error as Error).message, params });\n      throw error;\n    }\n  }\n\n  async updateBenefitType(id: string, data: any): Promise<any> {\n    try {\n      return await benefitTypeModel.update(id, data);\n    } catch (error) {\n      logger.error('Error updating benefit type', { error: (error as Error).message, id, data });\n      throw error;\n    }\n  }\n\n  async deleteBenefitType(id: string): Promise<boolean> {\n    try {\n      return await benefitTypeModel.delete(id);\n    } catch (error) {\n      logger.error('Error deleting benefit type', { error: (error as Error).message, id });\n      throw error;\n    }\n  }\n\n  // New methods for employee deduction balances management\n  async getEmployeeDeductionBalances(params: any = {}): Promise<{ records: any[]; total: number }> {\n    try {\n      return await employeeDeductionBalanceModel.findAll(params);\n    } catch (error) {\n      logger.error('Error getting employee deduction balances', { error: (error as Error).message, params });\n      throw error;\n    }\n  }\n\n  async createEmployeeDeductionBalance(data: any): Promise<any> {\n    try {\n      return await employeeDeductionBalanceModel.create(data);\n    } catch (error) {\n      logger.error('Error creating employee deduction balance', { error: (error as Error).message, data });\n      throw error;\n    }\n  }\n\n  async updateEmployeeDeductionBalance(id: string, data: any): Promise<any> {\n    try {\n      return await employeeDeductionBalanceModel.update(id, data);\n    } catch (error) {\n      logger.error('Error updating employee deduction balance', { error: (error as Error).message, id, data });\n      throw error;\n    }\n  }\n\n  async deleteEmployeeDeductionBalance(id: string): Promise<boolean> {\n    try {\n      return await employeeDeductionBalanceModel.delete(id);\n    } catch (error) {\n      logger.error('Error deleting employee deduction balance', { error: (error as Error).message, id });\n      throw error;\n    }\n  }\n\n  // New methods for employee benefits management\n  async getEmployeeBenefits(params: any = {}): Promise<{ records: any[]; total: number }> {\n    try {\n      return await employeeBenefitModel.findAll(params);\n    } catch (error) {\n      logger.error('Error getting employee benefits', { error: (error as Error).message, params });\n      throw error;\n    }\n  }\n\n  async createEmployeeBenefit(data: any): Promise<any> {\n    try {\n      return await employeeBenefitModel.create(data);\n    } catch (error) {\n      logger.error('Error creating employee benefit', { error: (error as Error).message, data });\n      throw error;\n    }\n  }\n\n  async updateEmployeeBenefit(id: string, data: any): Promise<any> {\n    try {\n      return await employeeBenefitModel.update(id, data);\n    } catch (error) {\n      logger.error('Error updating employee benefit', { error: (error as Error).message, id, data });\n      throw error;\n    }\n  }\n\n  async deleteEmployeeBenefit(id: string): Promise<boolean> {\n    try {\n      return await employeeBenefitModel.delete(id);\n    } catch (error) {\n      logger.error('Error deleting employee benefit', { error: (error as Error).message, id });\n      throw error;\n    }\n  }\n\n  // CSV upload for employee benefits\n  async uploadEmployeeBenefits(csvData: any[]): Promise<{ success: number; errors: any[] }> {\n    try {\n      const errors: any[] = [];\n      const successData: any[] = [];\n\n      for (let i = 0; i < csvData.length; i++) {\n        const row = csvData[i];\n        try {\n          // Validate required fields\n          if (!row.employee_name || !row.employee_id || !row.benefit_type_name || !row.benefit_type_id || !row.amount) {\n            errors.push({\n              row: i + 1,\n              error: 'Missing required fields: employee_name, employee_id, benefit_type_name, benefit_type_id, amount'\n            });\n            continue;\n          }\n\n          // Find employee by employee_id\n          const employee = await employeeModel.findByEmployeeId(row.employee_id);\n          if (!employee) {\n            errors.push({\n              row: i + 1,\n              error: `Employee not found: ${row.employee_id}`\n            });\n            continue;\n          }\n\n          // Find benefit type by UUID\n          const benefitType = await benefitTypeModel.findById(row.benefit_type_id);\n          if (!benefitType) {\n            errors.push({\n              row: i + 1,\n              error: `Benefit type not found: ${row.benefit_type_id}`\n            });\n            continue;\n          }\n\n          // Check if record already exists (unique constraint: employee_id, benefit_type_id, start_date)\n          const existingRecord = await employeeBenefitModel.findByEmployeeAndBenefitTypeAndDate(\n            employee.id, \n            benefitType.id, \n            new Date(row.start_date || new Date())\n          );\n          \n          if (existingRecord) {\n            errors.push({\n              row: i + 1,\n              error: `Record already exists for employee ${row.employee_id} with benefit type ${row.benefit_type_name} on ${row.start_date}`\n            });\n            continue;\n          }\n\n          // Prepare data for creation\n          const benefitData = {\n            employee_id: employee.id,\n            benefit_type_id: benefitType.id,\n            amount: parseFloat(row.amount),\n            start_date: new Date(row.start_date || new Date()),\n            end_date: row.end_date ? new Date(row.end_date) : null,\n            is_active: row.is_active !== 'false'\n          };\n\n          successData.push(benefitData);\n        } catch (error) {\n          errors.push({\n            row: i + 1,\n            error: (error as Error).message\n          });\n        }\n      }\n\n      // Bulk create successful records\n      if (successData.length > 0) {\n        await employeeBenefitModel.bulkCreate(successData);\n      }\n\n      logger.info('Employee benefits uploaded', { \n        success: successData.length, \n        errors: errors.length \n      });\n\n      return {\n        success: successData.length,\n        errors\n      };\n    } catch (error) {\n      logger.error('Error uploading employee benefits', { error: (error as Error).message });\n      throw error;\n    }\n  }\n\n  // CSV upload for employee deduction balances\n  async uploadEmployeeDeductionBalances(csvData: any[]): Promise<{ success: number; errors: any[] }> {\n    try {\n      const errors: any[] = [];\n      const successData: any[] = [];\n\n      for (let i = 0; i < csvData.length; i++) {\n        const row = csvData[i];\n        try {\n          // Validate required fields\n          if (!row.employee_name || !row.employee_id || !row.deduction_type_name || !row.remaining_balance) {\n            errors.push({\n              row: i + 1,\n              error: 'Missing required fields: employee_name, employee_id, deduction_type_name, remaining_balance'\n            });\n            continue;\n          }\n\n          // Find employee by employee_id\n          const employee = await employeeModel.findByEmployeeId(row.employee_id);\n          if (!employee) {\n            errors.push({\n              row: i + 1,\n              error: `Employee not found: ${row.employee_id}`\n            });\n            continue;\n          }\n\n          // Find deduction type by UUID\n          const deductionType = await deductionTypeModel.findById(row.deduction_type_id);\n          if (!deductionType) {\n            errors.push({\n              row: i + 1,\n              error: `Deduction type not found: ${row.deduction_type_id}`\n            });\n            continue;\n          }\n\n          // Check if record already exists (unique constraint: employee_id, deduction_type_id, start_date)\n          const existingRecord = await employeeDeductionBalanceModel.findByEmployeeAndDeductionTypeAndDate(\n            employee.id, \n            deductionType.id, \n            new Date(row.start_date || new Date())\n          );\n          \n          if (existingRecord) {\n            errors.push({\n              row: i + 1,\n              error: `Record already exists for employee ${row.employee_id} with deduction type ${row.deduction_type_name} on ${row.start_date}`\n            });\n            continue;\n          }\n\n          // Prepare data for creation\n          const balanceData = {\n            employee_id: employee.id,\n            deduction_type_id: deductionType.id,\n            original_amount: parseFloat(row.remaining_balance),\n            remaining_balance: parseFloat(row.remaining_balance),\n            monthly_deduction_amount: parseFloat(row.monthly_deduction_amount || '0'),\n            start_date: new Date(row.start_date || new Date()),\n            end_date: row.end_date ? new Date(row.end_date) : null,\n            is_active: row.is_active !== 'false'\n          };\n\n          successData.push(balanceData);\n        } catch (error) {\n          errors.push({\n            row: i + 1,\n            error: (error as Error).message\n          });\n        }\n      }\n\n      // Bulk create successful records\n      if (successData.length > 0) {\n        await employeeDeductionBalanceModel.bulkCreate(successData);\n      }\n\n      logger.info('Employee deduction balances uploaded', { \n        success: successData.length, \n        errors: errors.length \n      });\n\n      return {\n        success: successData.length,\n        errors\n      };\n    } catch (error) {\n      logger.error('Error uploading employee deduction balances', { error: (error as Error).message });\n      throw error;\n    }\n  }\n\n  /**\n   * Calculate working days between two dates (excluding weekends)\n   * @param startDate Start date\n   * @param endDate End date\n   * @returns Number of working days\n   */\n  private calculateWorkingDays(startDate: Date, endDate: Date): number {\n    let workingDays = 0;\n    const currentDate = new Date(startDate);\n    \n    while (currentDate <= endDate) {\n      // Check if it's not a weekend (Saturday = 6, Sunday = 0)\n      if (currentDate.getDay() !== 0 && currentDate.getDay() !== 6) {\n        workingDays++;\n      }\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    \n    return workingDays;\n  }\n\n  /**\n   * Calculate attendance hours using the mathematical formulation\n   */\n  private async calculateAttendanceHours(employeeId: string, startDate: Date, endDate: Date): Promise<{\n    totalWorkedHours: number;\n    totalRegularHours: number;\n    totalOvertimeHours: number;\n    totalLateHours: number;\n    totalWorkingDays: number;\n  }> {\n    const pool = getPool();\n    \n    // Get all attendance records for the period\n    const attendanceQuery = `\n      SELECT ar.id, ar.date, ar.overall_status\n      FROM attendance_records ar\n      WHERE ar.employee_id = $1 \n        AND ar.date >= $2 \n        AND ar.date <= $3\n        AND ar.overall_status IN ('present', 'late', 'partial')\n      ORDER BY ar.date\n    `;\n\n    const result = await pool.query(attendanceQuery, [employeeId, startDate, endDate]);\n    const attendanceRecords = result.rows;\n\n    let totalWorkedHours = 0;\n    let totalRegularHours = 0;\n    let totalOvertimeHours = 0;\n    let totalLateHours = 0;\n    let totalWorkingDays = attendanceRecords.length;\n\n    // Calculate hours for each attendance record using the new formula\n    for (const record of attendanceRecords) {\n      const sessions = await attendanceSessionModel.getSessionsByAttendanceRecord(record.id);\n      const hoursResult = defaultHoursCalculator.calculateFromSessions(sessions);\n\n      totalWorkedHours += hoursResult.totalHours;\n\n      // Calculate regular and overtime hours (8 hours per day is regular)\n      if (hoursResult.totalHours <= 8) {\n        totalRegularHours += hoursResult.totalHours;\n      } else {\n        totalRegularHours += 8;\n        totalOvertimeHours += (hoursResult.totalHours - 8);\n      }\n\n      // Log the calculation for debugging\n      logger.info('Payroll hours calculation', {\n        employeeId,\n        date: record.date,\n        morningHours: hoursResult.morningHours,\n        afternoonHours: hoursResult.afternoonHours,\n        totalHours: hoursResult.totalHours,\n        regularHours: Math.min(hoursResult.totalHours, 8),\n        overtimeHours: Math.max(0, hoursResult.totalHours - 8),\n        effectiveMorningStart: hoursResult.effectiveMorningStart,\n        effectiveAfternoonStart: hoursResult.effectiveAfternoonStart\n      });\n    }\n\n    return {\n      totalWorkedHours: Math.round(totalWorkedHours * 100) / 100,\n      totalRegularHours: Math.round(totalRegularHours * 100) / 100,\n      totalOvertimeHours: Math.round(totalOvertimeHours * 100) / 100, // Fixed: was hardcoded to 0\n      totalLateHours: Math.round(totalLateHours * 100) / 100,\n      totalWorkingDays\n    };\n  }\n\n  /**\n   * Generate payroll records for all departments\n   * This creates separate payroll records for each department\n   */\n  async generatePayrollRecordsForAllDepartments(payrollPeriodId: string): Promise<{ departmentId: string; records: PayrollRecord[] }[]> {\n    try {\n      // Get all departments with active employees\n      const { getPool } = await import('../../config/database');\n      const pool = getPool();\n      \n      const departmentsQuery = `\n        SELECT DISTINCT d.id, d.name\n        FROM departments d\n        INNER JOIN employees e ON d.id = e.department_id\n        WHERE e.status = 'active' AND d.is_active = true\n        ORDER BY d.name\n      `;\n      \n      const departmentsResult = await pool.query(departmentsQuery);\n      const departmentResults: { departmentId: string; records: PayrollRecord[] }[] = [];\n\n      // Generate payroll records for each department\n      for (const department of departmentsResult.rows) {\n        const records = await this.generatePayrollRecords(payrollPeriodId, department.id);\n        departmentResults.push({\n          departmentId: department.id,\n          records\n        });\n        \n        logger.info(`Generated ${records.length} payroll records for department: ${department.name}`);\n      }\n\n      return departmentResults;\n    } catch (error) {\n      logger.error('Error generating payroll records for all departments:', error);\n      throw error;\n    }\n  }\n\n  async getPayrollRecordsByDepartmentAndPeriod(departmentId: string, periodId: string): Promise<PayrollRecord[]> {\n    try {\n      const { getPool } = await import('../../config/database');\n      const pool = getPool();\n      \n      const query = `\n        SELECT \n          pr.*,\n          u.first_name,\n          u.last_name,\n          e.employee_id,\n          e.position,\n          e.department_id,\n          d.name as department_name,\n          pp.period_name\n        FROM payroll_records pr\n        INNER JOIN employees e ON pr.employee_id = e.id\n        INNER JOIN users u ON e.user_id = u.id\n        INNER JOIN departments d ON e.department_id = d.id\n        INNER JOIN payroll_periods pp ON pr.payroll_period_id = pp.id\n        WHERE pr.payroll_period_id = $1 AND e.department_id = $2\n        ORDER BY u.first_name, u.last_name\n      `;\n      \n      const result = await pool.query(query, [periodId, departmentId]);\n      return result.rows;\n    } catch (error) {\n      logger.error('Error getting payroll records by department and period:', error);\n      throw error;\n    }\n  }\n\n  /**\n   * Get paid leave hours for an employee within a payroll period\n   * This method uses the leave payment policies to determine which leave types are paid\n   * and calculates the total hours with proper payment percentages\n   */\n  private async getPaidLeaveHours(employeeId: string, startDate: Date, endDate: Date): Promise<number> {\n    try {\n      const { getPool } = await import('../../config/database');\n      const pool = getPool();\n\n      // Get all approved leave days within the payroll period\n      const leaveQuery = `\n        SELECT \n          leave_type,\n          start_date,\n          end_date,\n          (end_date - start_date + 1) as total_days\n        FROM leaves\n        WHERE employee_id = $1 \n          AND status = 'approved'\n          AND (\n            (start_date <= $2 AND end_date >= $3) OR  -- Leave spans the period\n            (start_date >= $3 AND start_date <= $2) OR  -- Leave starts within period\n            (end_date >= $3 AND end_date <= $2)  -- Leave ends within period\n          )\n      `;\n\n      const result = await pool.query(leaveQuery, [\n        employeeId,\n        endDate,\n        startDate\n      ]);\n\n      let totalPaidHours = 0;\n      \n      for (const leave of result.rows) {\n        const leaveType = leave.leave_type;\n        const leaveDays = parseFloat(leave.total_days) || 0;\n        \n        // Check if this leave type is paid\n        if (!isLeaveTypePaid(leaveType)) {\n          logger.info('Unpaid leave skipped', {\n            employeeId,\n            leaveType,\n            days: leaveDays\n          });\n          continue;\n        }\n\n        // Get payment percentage for this leave type\n        const paymentPercentage = getLeavePaymentPercentage(leaveType);\n        const maxPaidDaysPerYear = getMaxPaidDaysPerYear(leaveType);\n        \n        // Calculate paid days (considering yearly limits if applicable)\n        let paidDays = leaveDays;\n        if (maxPaidDaysPerYear) {\n          // TODO: Implement yearly limit checking (would need to track used days per year)\n          // For now, we'll use the full leave days\n          logger.info('Yearly limit check not implemented yet', {\n            leaveType,\n            maxPaidDaysPerYear,\n            requestedDays: leaveDays\n          });\n        }\n        \n        // Calculate paid hours with payment percentage\n        const paidHours = (paidDays * 8 * paymentPercentage) / 100; // 8 hours per working day\n        totalPaidHours += paidHours;\n        \n        logger.info('Paid leave calculated', {\n          employeeId,\n          leaveType,\n          startDate: leave.start_date,\n          endDate: leave.end_date,\n          totalDays: leaveDays,\n          paidDays,\n          paymentPercentage,\n          paidHours,\n          maxPaidDaysPerYear\n        });\n      }\n\n      logger.info('Total paid leave hours calculated', {\n        employeeId,\n        startDate,\n        endDate,\n        totalPaidHours,\n        leaveCount: result.rows.length\n      });\n\n      return totalPaidHours;\n    } catch (error) {\n      logger.error('Error calculating paid leave hours', {\n        error: (error as Error).message,\n        employeeId,\n        startDate,\n        endDate\n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Export all employee paystubs for a period as PDF\n   */\n  async exportPeriodPaystubsPDF(periodId: string): Promise<Buffer> {\n    try {\n      const PDFDocument = require('pdfkit');\n      const doc = new PDFDocument({ margin: 50 });\n      const buffers: Buffer[] = [];\n\n      doc.on('data', buffers.push.bind(buffers));\n\n      // Get payroll period information\n      const period = await payrollPeriodModel.findById(periodId);\n      if (!period) {\n        throw new Error('Payroll period not found');\n      }\n\n      // Get all payroll records for the period\n      const result = await payrollRecordModel.findAllWithEmployee({ payroll_period_id: periodId, limit: 1000 });\n      const records = result.records;\n\n      // Add title page\n      doc.fontSize(20).text('PAYROLL PAYSTUBS', { align: 'center' });\n      doc.fontSize(16).text(`Period: ${period.period_name}`, { align: 'center' });\n      doc.fontSize(12).text(`From: ${this.formatDate(period.start_date)} To: ${this.formatDate(period.end_date)}`, { align: 'center' });\n      doc.moveDown(2);\n\n      // Generate paystub for each employee\n      for (const record of records) {\n        try {\n          this.addPaystubPage(doc, record, period);\n        } catch (error) {\n          logger.error('Error adding paystub page', { \n            error: (error as Error).message, \n            recordId: record.id,\n            employeeId: record.employee_id\n          });\n          // Continue with next record instead of failing completely\n        }\n      }\n\n      doc.end();\n\n      return new Promise((resolve, reject) => {\n        doc.on('end', () => {\n          const pdfBuffer = Buffer.concat(buffers);\n          resolve(pdfBuffer);\n        });\n        doc.on('error', reject);\n      });\n    } catch (error) {\n      logger.error('Error exporting period paystubs PDF', { \n        error: (error as Error).message, \n        periodId \n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Export department employee paystubs for a period as PDF\n   */\n  async exportDepartmentPaystubsPDF(periodId: string, userId: string): Promise<Buffer> {\n    try {\n      const PDFDocument = require('pdfkit');\n      const doc = new PDFDocument({ margin: 50 });\n      const buffers: Buffer[] = [];\n\n      doc.on('data', buffers.push.bind(buffers));\n\n      // Get department head's department\n      const { DepartmentHeadService } = await import('../department-head/departmentHeadService');\n      const departmentHeadService = new DepartmentHeadService();\n      const department = await departmentHeadService.getDepartmentInfo(userId);\n      \n      if (!department) {\n        throw new Error('Department not found for user');\n      }\n\n      // Get payroll period information\n      const period = await payrollPeriodModel.findById(periodId);\n      if (!period) {\n        throw new Error('Payroll period not found');\n      }\n\n      // Get payroll records for the department\n      const result = await payrollRecordModel.findAllWithEmployee({ \n        payroll_period_id: periodId,\n        department_id: department.id,\n        limit: 1000\n      });\n      const records = result.records;\n\n      // Add title page\n      doc.fontSize(20).text('DEPARTMENT PAYROLL PAYSTUBS', { align: 'center' });\n      doc.fontSize(16).text(`Department: ${department.name}`, { align: 'center' });\n      doc.fontSize(16).text(`Period: ${period.period_name}`, { align: 'center' });\n      doc.fontSize(12).text(`From: ${this.formatDate(period.start_date)} To: ${this.formatDate(period.end_date)}`, { align: 'center' });\n      doc.moveDown(2);\n\n      // Generate paystub for each employee\n      for (const record of records) {\n        try {\n          this.addPaystubPage(doc, record, period);\n        } catch (error) {\n          logger.error('Error adding paystub page', { \n            error: (error as Error).message, \n            recordId: record.id,\n            employeeId: record.employee_id\n          });\n          // Continue with next record instead of failing completely\n        }\n      }\n\n      doc.end();\n\n      return new Promise((resolve, reject) => {\n        doc.on('end', () => {\n          const pdfBuffer = Buffer.concat(buffers);\n          resolve(pdfBuffer);\n        });\n        doc.on('error', reject);\n      });\n    } catch (error) {\n      logger.error('Error exporting department paystubs PDF', { \n        error: (error as Error).message, \n        periodId,\n        userId \n      });\n      throw error;\n    }\n  }\n\n  /**\n   * Helper function to safely format numbers for PDF\n   */\n  private formatCurrency(amount: any): string {\n    try {\n      if (amount === null || amount === undefined) return '₱0.00';\n      const num = Number(amount);\n      if (isNaN(num) || !isFinite(num)) return '₱0.00';\n      return `₱${num.toFixed(2)}`;\n    } catch (error) {\n      return '₱0.00';\n    }\n  }\n\n  /**\n   * Helper function to safely format dates for PDF\n   */\n  private formatDate(date: any): string {\n    try {\n      if (!date) return 'N/A';\n      return new Date(date).toLocaleDateString();\n    } catch (error) {\n      return 'N/A';\n    }\n  }\n\n  /**\n   * Add a paystub page to the PDF document\n   */\n  private addPaystubPage(doc: any, record: PayrollRecordWithEmployee, period: any): void {\n    // Add new page for each employee\n    doc.addPage();\n\n    // Employee Information\n    doc.fontSize(18).text('PAYSTUB', { align: 'center' });\n    doc.moveDown(1);\n\n    doc.fontSize(12);\n    doc.text(`Employee ID: ${record.employee.employee_id}`, 50, 100);\n    doc.text(`Name: ${record.employee.user.first_name} ${record.employee.user.last_name}`, 50, 120);\n    doc.text(`Department: ${record.employee.department.name}`, 50, 140);\n    doc.text(`Pay Period: ${period.period_name}`, 50, 180);\n    doc.text(`Period: ${this.formatDate(period.start_date)} - ${this.formatDate(period.end_date)}`, 50, 200);\n\n    // Hours Worked Section\n    doc.moveDown(2);\n    doc.fontSize(14).text('HOURS WORKED', { underline: true });\n    doc.moveDown(0.5);\n    \n    doc.fontSize(12);\n    const regularHours = Number(record.total_regular_hours) || 0;\n    const overtimeHours = Number(record.total_overtime_hours) || 0;\n    const lateHours = Number(record.total_late_hours) || 0;\n    const paidLeaveHours = Number(record.paid_leave_hours) || 0;\n    const totalHours = regularHours + overtimeHours + paidLeaveHours;\n    \n    doc.text(`Regular Hours: ${regularHours}`, 50);\n    doc.text(`Overtime Hours: ${overtimeHours}`, 50);\n    doc.text(`Late Hours: ${lateHours}`, 50);\n    doc.text(`Paid Leave Hours: ${paidLeaveHours}`, 50);\n    doc.text(`Total Hours: ${totalHours}`, 50);\n\n    // Earnings Section\n    doc.moveDown(1);\n    doc.fontSize(14).text('EARNINGS', { underline: true });\n    doc.moveDown(0.5);\n    \n    doc.fontSize(12);\n    doc.text(`Base Salary: ${this.formatCurrency(record.base_salary)}`, 50);\n    \n    // Calculate Leave Pay\n    const hourlyRate = Number(record.hourly_rate) || 0;\n    const leavePay = paidLeaveHours * hourlyRate;\n    if (leavePay > 0) {\n      doc.text(`Leave Pay: ${this.formatCurrency(leavePay)}`, 50);\n    }\n    \n    doc.text(`Benefits: ${this.formatCurrency(record.total_benefits)}`, 50);\n    doc.text(`Gross Pay: ${this.formatCurrency(record.gross_pay)}`, 50);\n\n    // Deductions Section\n    doc.moveDown(1);\n    doc.fontSize(14).text('DEDUCTIONS', { underline: true });\n    doc.moveDown(0.5);\n    \n    doc.fontSize(12);\n    doc.text(`Late Deductions: ${this.formatCurrency(record.late_deductions)}`, 50);\n    doc.text(`Total Deductions: ${this.formatCurrency(record.total_deductions)}`, 50);\n\n    // Net Pay Section\n    doc.moveDown(1);\n    doc.fontSize(16).text(`NET PAY: ${this.formatCurrency(record.net_pay)}`, 50, { underline: true });\n\n    // Footer\n    doc.fontSize(10);\n    doc.text(`Generated on: ${this.formatDate(new Date())}`, 50, doc.page.height - 100);\n    doc.text(`Status: ${record.status?.toUpperCase()}`, 50, doc.page.height - 80);\n  }\n}\n\nexport const payrollService = new PayrollService();"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}