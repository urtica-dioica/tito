d75c829703b2f42f299fdae1ac94a5d8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const loadTestUtils_1 = require("./loadTestUtils");
const database_1 = require("../../src/config/database");
// Mock axios for testing
const axios = {
    create: () => ({
        get: jest.fn(),
        post: jest.fn(),
        put: jest.fn(),
        delete: jest.fn(),
        patch: jest.fn(),
        interceptors: {
            request: { use: jest.fn() },
            response: { use: jest.fn() }
        }
    })
};
describe('Performance Benchmark Tests', () => {
    let benchmark;
    let pool;
    let baseURL;
    let authToken;
    beforeAll(async () => {
        benchmark = new loadTestUtils_1.PerformanceBenchmark();
        pool = (0, database_1.getPool)();
        baseURL = process.env.TEST_BASE_URL || 'http://localhost:3000';
        // Get authentication token
        try {
            const response = await axios.create().post(`${baseURL}/api/v1/auth/login`, {
                email: 'hr@example.com',
                password: 'password123'
            });
            authToken = response.data.data.accessToken;
        }
        catch (error) {
            console.warn('Could not obtain auth token for benchmark test');
            authToken = 'test-token';
        }
    });
    afterAll(async () => {
        if (pool && typeof pool.end === 'function') {
            await pool.end();
        }
    });
    describe('API Endpoint Performance Benchmarks', () => {
        it('should benchmark authentication endpoints', async () => {
            const iterations = 10;
            // Benchmark login endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Login Endpoint', async () => {
                    await axios.create().post(`${baseURL}/api/v1/auth/login`, {
                        email: 'test@example.com',
                        password: 'password123'
                    });
                });
            }
            // Benchmark profile endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Profile Endpoint', async () => {
                    await axios.create().get(`${baseURL}/api/v1/auth/profile`, {
                        headers: { 'Authorization': `Bearer ${authToken}` }
                    });
                });
            }
            // Benchmark refresh endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Refresh Endpoint', async () => {
                    await axios.create().post(`${baseURL}/api/v1/auth/refresh`, {}, {
                        headers: { 'Cookie': 'refreshToken=test-refresh-token' }
                    });
                });
            }
            const results = benchmark.getResults();
            console.log('\nðŸ” AUTHENTICATION ENDPOINT BENCHMARKS');
            console.log('=====================================');
            for (const [name, stats] of results.entries()) {
                console.log(`${name}:`);
                console.log(`  Average: ${stats.average.toFixed(2)}ms`);
                console.log(`  Min: ${stats.min.toFixed(2)}ms`);
                console.log(`  Max: ${stats.max.toFixed(2)}ms`);
                console.log(`  Samples: ${stats.count}`);
            }
            // Performance assertions
            expect(results.get('Login Endpoint')?.average).toBeLessThan(2000);
            expect(results.get('Profile Endpoint')?.average).toBeLessThan(1000);
            expect(results.get('Refresh Endpoint')?.average).toBeLessThan(1500);
        }, 60000);
        it('should benchmark payroll endpoints', async () => {
            const iterations = 8;
            // Benchmark payroll periods endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Payroll Periods', async () => {
                    await axios.create().get(`${baseURL}/api/v1/payroll/periods`, {
                        headers: { 'Authorization': `Bearer ${authToken}` },
                        params: { page: 1, limit: 10 }
                    });
                });
            }
            // Benchmark payroll records endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Payroll Records', async () => {
                    await axios.create().get(`${baseURL}/api/v1/payroll/periods/test-period-id/records`, {
                        headers: { 'Authorization': `Bearer ${authToken}` },
                        params: { page: 1, limit: 20 }
                    });
                });
            }
            // Benchmark payroll summary endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Payroll Summary', async () => {
                    await axios.create().get(`${baseURL}/api/v1/payroll/periods/test-period-id/summary`, {
                        headers: { 'Authorization': `Bearer ${authToken}` }
                    });
                });
            }
            // Benchmark payroll stats endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Payroll Stats', async () => {
                    await axios.create().get(`${baseURL}/api/v1/payroll/stats`, {
                        headers: { 'Authorization': `Bearer ${authToken}` },
                        params: { period: '2024-01' }
                    });
                });
            }
            const results = benchmark.getResults();
            console.log('\nðŸ” PAYROLL ENDPOINT BENCHMARKS');
            console.log('==============================');
            for (const [name, stats] of results.entries()) {
                if (name.includes('Payroll')) {
                    console.log(`${name}:`);
                    console.log(`  Average: ${stats.average.toFixed(2)}ms`);
                    console.log(`  Min: ${stats.min.toFixed(2)}ms`);
                    console.log(`  Max: ${stats.max.toFixed(2)}ms`);
                    console.log(`  Samples: ${stats.count}`);
                }
            }
            // Performance assertions
            expect(results.get('Payroll Periods')?.average).toBeLessThan(2000);
            expect(results.get('Payroll Records')?.average).toBeLessThan(3000);
            expect(results.get('Payroll Summary')?.average).toBeLessThan(2500);
            expect(results.get('Payroll Stats')?.average).toBeLessThan(3000);
        }, 60000);
        it('should benchmark employee endpoints', async () => {
            const iterations = 8;
            // Benchmark employee listing endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Employee Listing', async () => {
                    await axios.create().get(`${baseURL}/api/v1/hr/employees`, {
                        headers: { 'Authorization': `Bearer ${authToken}` },
                        params: { page: 1, limit: 20 }
                    });
                });
            }
            // Benchmark employee search endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Employee Search', async () => {
                    await axios.create().get(`${baseURL}/api/v1/hr/employees`, {
                        headers: { 'Authorization': `Bearer ${authToken}` },
                        params: { search: 'test', page: 1, limit: 10 }
                    });
                });
            }
            // Benchmark department listing endpoint
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Department Listing', async () => {
                    await axios.create().get(`${baseURL}/api/v1/hr/departments`, {
                        headers: { 'Authorization': `Bearer ${authToken}` }
                    });
                });
            }
            const results = benchmark.getResults();
            console.log('\nðŸ” EMPLOYEE ENDPOINT BENCHMARKS');
            console.log('===============================');
            for (const [name, stats] of results.entries()) {
                if (name.includes('Employee') || name.includes('Department')) {
                    console.log(`${name}:`);
                    console.log(`  Average: ${stats.average.toFixed(2)}ms`);
                    console.log(`  Min: ${stats.min.toFixed(2)}ms`);
                    console.log(`  Max: ${stats.max.toFixed(2)}ms`);
                    console.log(`  Samples: ${stats.count}`);
                }
            }
            // Performance assertions
            expect(results.get('Employee Listing')?.average).toBeLessThan(2000);
            expect(results.get('Employee Search')?.average).toBeLessThan(2500);
            expect(results.get('Department Listing')?.average).toBeLessThan(1500);
        }, 60000);
    });
    describe('Database Query Performance Benchmarks', () => {
        it('should benchmark database queries', async () => {
            const iterations = 20;
            // Benchmark user authentication query
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('User Auth Query', async () => {
                    await pool.query('SELECT id, email, first_name, last_name, role FROM users WHERE email = $1 AND is_active = true', ['test@example.com']);
                });
            }
            // Benchmark employee listing query
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Employee List Query', async () => {
                    await pool.query(`
            SELECT e.id, e.employee_id, e.position, u.first_name, u.last_name, u.email, d.name as department_name
            FROM employees e
            JOIN users u ON e.user_id = u.id
            LEFT JOIN departments d ON e.department_id = d.id
            WHERE e.status = 'active'
            ORDER BY u.last_name, u.first_name
            LIMIT $1
          `, [20]);
                });
            }
            // Benchmark attendance statistics query
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Attendance Stats Query', async () => {
                    await pool.query(`
            SELECT 
              COUNT(*) as total_employees,
              COUNT(CASE WHEN ar.status = 'present' THEN 1 END) as present_today,
              COUNT(CASE WHEN ar.status = 'absent' THEN 1 END) as absent_today,
              COALESCE(SUM(ar.total_hours), 0) as total_hours_today
            FROM employees e
            LEFT JOIN attendance_records ar ON e.id = ar.employee_id AND ar.date = CURRENT_DATE
            WHERE e.status = 'active'
          `);
                });
            }
            // Benchmark payroll summary query
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Payroll Summary Query', async () => {
                    await pool.query(`
            SELECT 
              COUNT(*) as total_employees,
              COALESCE(SUM(pr.gross_pay), 0) as total_gross_pay,
              COALESCE(SUM(pr.net_pay), 0) as total_net_pay,
              COALESCE(AVG(pr.gross_pay), 0) as average_salary
            FROM payroll_records pr
            JOIN payroll_periods pp ON pr.payroll_period_id = pp.id
            WHERE pp.id = $1
          `, ['test-period-id']);
                });
            }
            const results = benchmark.getResults();
            console.log('\nðŸ” DATABASE QUERY BENCHMARKS');
            console.log('============================');
            for (const [name, stats] of results.entries()) {
                if (name.includes('Query')) {
                    console.log(`${name}:`);
                    console.log(`  Average: ${stats.average.toFixed(2)}ms`);
                    console.log(`  Min: ${stats.min.toFixed(2)}ms`);
                    console.log(`  Max: ${stats.max.toFixed(2)}ms`);
                    console.log(`  Samples: ${stats.count}`);
                }
            }
            // Performance assertions
            expect(results.get('User Auth Query')?.average).toBeLessThan(50);
            expect(results.get('Employee List Query')?.average).toBeLessThan(100);
            expect(results.get('Attendance Stats Query')?.average).toBeLessThan(150);
            expect(results.get('Payroll Summary Query')?.average).toBeLessThan(200);
        }, 60000);
    });
    describe('System Performance Benchmarks', () => {
        it('should benchmark system resource usage', async () => {
            const iterations = 5;
            // Benchmark memory usage during operations
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Memory Intensive Operation', async () => {
                    // Simulate memory-intensive operation
                    const largeArray = new Array(10000).fill(0).map((_, index) => ({
                        id: index,
                        name: `Item ${index}`,
                        data: `Data for item ${index}`.repeat(10)
                    }));
                    // Process the array
                    const processed = largeArray.map(item => ({
                        ...item,
                        processed: true,
                        timestamp: Date.now()
                    }));
                    return processed.length;
                });
            }
            // Benchmark CPU-intensive operations
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('CPU Intensive Operation', async () => {
                    // Simulate CPU-intensive calculation
                    let result = 0;
                    for (let j = 0; j < 100000; j++) {
                        result += Math.sqrt(j) * Math.sin(j) * Math.cos(j);
                    }
                    return result;
                });
            }
            // Benchmark I/O operations
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('I/O Operation', async () => {
                    // Simulate I/O operation with database
                    await pool.query('SELECT COUNT(*) FROM users');
                    await pool.query('SELECT COUNT(*) FROM employees');
                    await pool.query('SELECT COUNT(*) FROM departments');
                    return true;
                });
            }
            const results = benchmark.getResults();
            console.log('\nðŸ” SYSTEM PERFORMANCE BENCHMARKS');
            console.log('=================================');
            for (const [name, stats] of results.entries()) {
                if (name.includes('Operation')) {
                    console.log(`${name}:`);
                    console.log(`  Average: ${stats.average.toFixed(2)}ms`);
                    console.log(`  Min: ${stats.min.toFixed(2)}ms`);
                    console.log(`  Max: ${stats.max.toFixed(2)}ms`);
                    console.log(`  Samples: ${stats.count}`);
                }
            }
            // Performance assertions
            expect(results.get('Memory Intensive Operation')?.average).toBeLessThan(1000);
            expect(results.get('CPU Intensive Operation')?.average).toBeLessThan(500);
            expect(results.get('I/O Operation')?.average).toBeLessThan(200);
        }, 60000);
    });
    describe('Performance Regression Tests', () => {
        it('should detect performance regressions', async () => {
            const iterations = 15;
            // Test critical path performance
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Critical Path - User Login', async () => {
                    // Simulate complete user login flow
                    await axios.create().post(`${baseURL}/api/v1/auth/login`, {
                        email: 'test@example.com',
                        password: 'password123'
                    });
                });
            }
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Critical Path - Dashboard Load', async () => {
                    // Simulate dashboard loading
                    await axios.create().get(`${baseURL}/api/v1/hr/employees`, {
                        headers: { 'Authorization': `Bearer ${authToken}` },
                        params: { page: 1, limit: 20 }
                    });
                });
            }
            for (let i = 0; i < iterations; i++) {
                await benchmark.measure('Critical Path - Payroll View', async () => {
                    // Simulate payroll view loading
                    await axios.create().get(`${baseURL}/api/v1/payroll/periods`, {
                        headers: { 'Authorization': `Bearer ${authToken}` },
                        params: { page: 1, limit: 10 }
                    });
                });
            }
            const results = benchmark.getResults();
            console.log('\nðŸ” PERFORMANCE REGRESSION TESTS');
            console.log('===============================');
            for (const [name, stats] of results.entries()) {
                if (name.includes('Critical Path')) {
                    console.log(`${name}:`);
                    console.log(`  Average: ${stats.average.toFixed(2)}ms`);
                    console.log(`  Min: ${stats.min.toFixed(2)}ms`);
                    console.log(`  Max: ${stats.max.toFixed(2)}ms`);
                    console.log(`  Samples: ${stats.count}`);
                }
            }
            // Performance regression assertions (strict thresholds)
            expect(results.get('Critical Path - User Login')?.average).toBeLessThan(1500);
            expect(results.get('Critical Path - Dashboard Load')?.average).toBeLessThan(2000);
            expect(results.get('Critical Path - Payroll View')?.average).toBeLessThan(2000);
            // Check for performance consistency (max should not be too far from average)
            const loginStats = results.get('Critical Path - User Login');
            const dashboardStats = results.get('Critical Path - Dashboard Load');
            const payrollStats = results.get('Critical Path - Payroll View');
            if (loginStats) {
                expect(loginStats.max / loginStats.average).toBeLessThan(3); // Max should not be 3x average
            }
            if (dashboardStats) {
                expect(dashboardStats.max / dashboardStats.average).toBeLessThan(3);
            }
            if (payrollStats) {
                expect(payrollStats.max / payrollStats.average).toBeLessThan(3);
            }
        }, 90000);
    });
    afterAll(() => {
        // Generate final benchmark report
        console.log(benchmark.generateReport());
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUva2ltL3RpdG8vc2VydmVyL3Rlc3RzL3BlcmZvcm1hbmNlL3BlcmZvcm1hbmNlQmVuY2htYXJrLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxtREFBdUQ7QUFDdkQsd0RBQW9EO0FBQ3BELHlCQUF5QjtBQUN6QixNQUFNLEtBQUssR0FBRztJQUNaLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ2IsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDZCxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNmLEdBQUcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2QsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDakIsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDaEIsWUFBWSxFQUFFO1lBQ1osT0FBTyxFQUFFLEVBQUUsR0FBRyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFBRTtZQUMzQixRQUFRLEVBQUUsRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFO1NBQzdCO0tBQ0YsQ0FBQztDQUNILENBQUM7QUFFRixRQUFRLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO0lBQzNDLElBQUksU0FBK0IsQ0FBQztJQUNwQyxJQUFJLElBQVMsQ0FBQztJQUNkLElBQUksT0FBZSxDQUFDO0lBQ3BCLElBQUksU0FBaUIsQ0FBQztJQUV0QixTQUFTLENBQUMsS0FBSyxJQUFJLEVBQUU7UUFDbkIsU0FBUyxHQUFHLElBQUksb0NBQW9CLEVBQUUsQ0FBQztRQUN2QyxJQUFJLEdBQUcsSUFBQSxrQkFBTyxHQUFFLENBQUM7UUFDakIsT0FBTyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxJQUFJLHVCQUF1QixDQUFDO1FBRS9ELDJCQUEyQjtRQUMzQixJQUFJLENBQUM7WUFDSCxNQUFNLFFBQVEsR0FBRyxNQUFNLEtBQUssQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFP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QzlGLENBQUM7WUFDRCxJQUFJLGNBQWMsRUFBRSxDQUFDO2dCQUNuQixNQUFNLENBQUMsY0FBYyxDQUFDLEdBQUcsR0FBRyxjQUFjLENBQUMsT0FBTyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RFLENBQUM7WUFDRCxJQUFJLFlBQVksRUFBRSxDQUFDO2dCQUNqQixNQUFNLENBQUMsWUFBWSxDQUFDLEdBQUcsR0FBRyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2xFLENBQUM7UUFDSCxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7SUFDWixDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyxHQUFHLEVBQUU7UUFDWixrQ0FBa0M7UUFDbEMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLENBQUMsQ0FBQztJQUMxQyxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9ob21lL2tpbS90aXRvL3NlcnZlci90ZXN0cy9wZXJmb3JtYW5jZS9wZXJmb3JtYW5jZUJlbmNobWFyay50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBlcmZvcm1hbmNlQmVuY2htYXJrIH0gZnJvbSAnLi9sb2FkVGVzdFV0aWxzJztcbmltcG9ydCB7IGdldFBvb2wgfSBmcm9tICcuLi8uLi9zcmMvY29uZmlnL2RhdGFiYXNlJztcbi8vIE1vY2sgYXhpb3MgZm9yIHRlc3RpbmdcbmNvbnN0IGF4aW9zID0ge1xuICBjcmVhdGU6ICgpID0+ICh7XG4gICAgZ2V0OiBqZXN0LmZuKCksXG4gICAgcG9zdDogamVzdC5mbigpLFxuICAgIHB1dDogamVzdC5mbigpLFxuICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgIHBhdGNoOiBqZXN0LmZuKCksXG4gICAgaW50ZXJjZXB0b3JzOiB7XG4gICAgICByZXF1ZXN0OiB7IHVzZTogamVzdC5mbigpIH0sXG4gICAgICByZXNwb25zZTogeyB1c2U6IGplc3QuZm4oKSB9XG4gICAgfVxuICB9KVxufTtcblxuZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIEJlbmNobWFyayBUZXN0cycsICgpID0+IHtcbiAgbGV0IGJlbmNobWFyazogUGVyZm9ybWFuY2VCZW5jaG1hcms7XG4gIGxldCBwb29sOiBhbnk7XG4gIGxldCBiYXNlVVJMOiBzdHJpbmc7XG4gIGxldCBhdXRoVG9rZW46IHN0cmluZztcblxuICBiZWZvcmVBbGwoYXN5bmMgKCkgPT4ge1xuICAgIGJlbmNobWFyayA9IG5ldyBQZXJmb3JtYW5jZUJlbmNobWFyaygpO1xuICAgIHBvb2wgPSBnZXRQb29sKCk7XG4gICAgYmFzZVVSTCA9IHByb2Nlc3MuZW52LlRFU1RfQkFTRV9VUkwgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCc7XG5cbiAgICAvLyBHZXQgYXV0aGVudGljYXRpb24gdG9rZW5cbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5jcmVhdGUoKS5wb3N0KGAke2Jhc2VVUkx9L2FwaS92MS9hdXRoL2xvZ2luYCwge1xuICAgICAgICBlbWFpbDogJ2hyQGV4YW1wbGUuY29tJyxcbiAgICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMydcbiAgICAgIH0pO1xuICAgICAgYXV0aFRva2VuID0gcmVzcG9uc2UuZGF0YS5kYXRhLmFjY2Vzc1Rva2VuO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBvYnRhaW4gYXV0aCB0b2tlbiBmb3IgYmVuY2htYXJrIHRlc3QnKTtcbiAgICAgIGF1dGhUb2tlbiA9ICd0ZXN0LXRva2VuJztcbiAgICB9XG4gIH0pO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICBpZiAocG9vbCAmJiB0eXBlb2YgcG9vbC5lbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGF3YWl0IHBvb2wuZW5kKCk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnQVBJIEVuZHBvaW50IFBlcmZvcm1hbmNlIEJlbmNobWFya3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBiZW5jaG1hcmsgYXV0aGVudGljYXRpb24gZW5kcG9pbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaXRlcmF0aW9ucyA9IDEwO1xuXG4gICAgICAvLyBCZW5jaG1hcmsgbG9naW4gZW5kcG9pbnRcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGJlbmNobWFyay5tZWFzdXJlKCdMb2dpbiBFbmRwb2ludCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5wb3N0KGAke2Jhc2VVUkx9L2FwaS92MS9hdXRoL2xvZ2luYCwge1xuICAgICAgICAgICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICAgICAgICAgIHBhc3N3b3JkOiAncGFzc3dvcmQxMjMnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBCZW5jaG1hcmsgcHJvZmlsZSBlbmRwb2ludFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ1Byb2ZpbGUgRW5kcG9pbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgYXhpb3MuY3JlYXRlKCkuZ2V0KGAke2Jhc2VVUkx9L2FwaS92MS9hdXRoL3Byb2ZpbGVgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2F1dGhUb2tlbn1gIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEJlbmNobWFyayByZWZyZXNoIGVuZHBvaW50XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnUmVmcmVzaCBFbmRwb2ludCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5wb3N0KGAke2Jhc2VVUkx9L2FwaS92MS9hdXRoL3JlZnJlc2hgLCB7fSwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnQ29va2llJzogJ3JlZnJlc2hUb2tlbj10ZXN0LXJlZnJlc2gtdG9rZW4nIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBiZW5jaG1hcmsuZ2V0UmVzdWx0cygpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnXFxu8J+UjSBBVVRIRU5USUNBVElPTiBFTkRQT0lOVCBCRU5DSE1BUktTJyk7XG4gICAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgZm9yIChjb25zdCBbbmFtZSwgc3RhdHNdIG9mIHJlc3VsdHMuZW50cmllcygpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGAke25hbWV9OmApO1xuICAgICAgICBjb25zb2xlLmxvZyhgICBBdmVyYWdlOiAke3N0YXRzLmF2ZXJhZ2UudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICBjb25zb2xlLmxvZyhgICBNaW46ICR7c3RhdHMubWluLnRvRml4ZWQoMil9bXNgKTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgTWF4OiAke3N0YXRzLm1heC50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKGAgIFNhbXBsZXM6ICR7c3RhdHMuY291bnR9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIFBlcmZvcm1hbmNlIGFzc2VydGlvbnNcbiAgICAgIGV4cGVjdChyZXN1bHRzLmdldCgnTG9naW4gRW5kcG9pbnQnKT8uYXZlcmFnZSkudG9CZUxlc3NUaGFuKDIwMDApO1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdQcm9maWxlIEVuZHBvaW50Jyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigxMDAwKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmdldCgnUmVmcmVzaCBFbmRwb2ludCcpPy5hdmVyYWdlKS50b0JlTGVzc1RoYW4oMTUwMCk7XG4gICAgfSwgNjAwMDApO1xuXG4gICAgaXQoJ3Nob3VsZCBiZW5jaG1hcmsgcGF5cm9sbCBlbmRwb2ludHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpdGVyYXRpb25zID0gODtcblxuICAgICAgLy8gQmVuY2htYXJrIHBheXJvbGwgcGVyaW9kcyBlbmRwb2ludFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ1BheXJvbGwgUGVyaW9kcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5nZXQoYCR7YmFzZVVSTH0vYXBpL3YxL3BheXJvbGwvcGVyaW9kc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXV0aFRva2VufWAgfSxcbiAgICAgICAgICAgIHBhcmFtczogeyBwYWdlOiAxLCBsaW1pdDogMTAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQmVuY2htYXJrIHBheXJvbGwgcmVjb3JkcyBlbmRwb2ludFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ1BheXJvbGwgUmVjb3JkcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5nZXQoYCR7YmFzZVVSTH0vYXBpL3YxL3BheXJvbGwvcGVyaW9kcy90ZXN0LXBlcmlvZC1pZC9yZWNvcmRzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCB9LFxuICAgICAgICAgICAgcGFyYW1zOiB7IHBhZ2U6IDEsIGxpbWl0OiAyMCB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBCZW5jaG1hcmsgcGF5cm9sbCBzdW1tYXJ5IGVuZHBvaW50XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnUGF5cm9sbCBTdW1tYXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IGF4aW9zLmNyZWF0ZSgpLmdldChgJHtiYXNlVVJMfS9hcGkvdjEvcGF5cm9sbC9wZXJpb2RzL3Rlc3QtcGVyaW9kLWlkL3N1bW1hcnlgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2F1dGhUb2tlbn1gIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEJlbmNobWFyayBwYXlyb2xsIHN0YXRzIGVuZHBvaW50XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnUGF5cm9sbCBTdGF0cycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5nZXQoYCR7YmFzZVVSTH0vYXBpL3YxL3BheXJvbGwvc3RhdHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2F1dGhUb2tlbn1gIH0sXG4gICAgICAgICAgICBwYXJhbXM6IHsgcGVyaW9kOiAnMjAyNC0wMScgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGJlbmNobWFyay5nZXRSZXN1bHRzKCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdcXG7wn5SNIFBBWVJPTEwgRU5EUE9JTlQgQkVOQ0hNQVJLUycpO1xuICAgICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PScpO1xuICAgICAgZm9yIChjb25zdCBbbmFtZSwgc3RhdHNdIG9mIHJlc3VsdHMuZW50cmllcygpKSB7XG4gICAgICAgIGlmIChuYW1lLmluY2x1ZGVzKCdQYXlyb2xsJykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHtuYW1lfTpgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICBBdmVyYWdlOiAke3N0YXRzLmF2ZXJhZ2UudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1pbjogJHtzdGF0cy5taW4udG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1heDogJHtzdGF0cy5tYXgudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFNhbXBsZXM6ICR7c3RhdHMuY291bnR9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGVyZm9ybWFuY2UgYXNzZXJ0aW9uc1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdQYXlyb2xsIFBlcmlvZHMnKT8uYXZlcmFnZSkudG9CZUxlc3NUaGFuKDIwMDApO1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdQYXlyb2xsIFJlY29yZHMnKT8uYXZlcmFnZSkudG9CZUxlc3NUaGFuKDMwMDApO1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdQYXlyb2xsIFN1bW1hcnknKT8uYXZlcmFnZSkudG9CZUxlc3NUaGFuKDI1MDApO1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdQYXlyb2xsIFN0YXRzJyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigzMDAwKTtcbiAgICB9LCA2MDAwMCk7XG5cbiAgICBpdCgnc2hvdWxkIGJlbmNobWFyayBlbXBsb3llZSBlbmRwb2ludHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpdGVyYXRpb25zID0gODtcblxuICAgICAgLy8gQmVuY2htYXJrIGVtcGxveWVlIGxpc3RpbmcgZW5kcG9pbnRcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGJlbmNobWFyay5tZWFzdXJlKCdFbXBsb3llZSBMaXN0aW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IGF4aW9zLmNyZWF0ZSgpLmdldChgJHtiYXNlVVJMfS9hcGkvdjEvaHIvZW1wbG95ZWVzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCB9LFxuICAgICAgICAgICAgcGFyYW1zOiB7IHBhZ2U6IDEsIGxpbWl0OiAyMCB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBCZW5jaG1hcmsgZW1wbG95ZWUgc2VhcmNoIGVuZHBvaW50XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnRW1wbG95ZWUgU2VhcmNoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IGF4aW9zLmNyZWF0ZSgpLmdldChgJHtiYXNlVVJMfS9hcGkvdjEvaHIvZW1wbG95ZWVzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCB9LFxuICAgICAgICAgICAgcGFyYW1zOiB7IHNlYXJjaDogJ3Rlc3QnLCBwYWdlOiAxLCBsaW1pdDogMTAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQmVuY2htYXJrIGRlcGFydG1lbnQgbGlzdGluZyBlbmRwb2ludFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ0RlcGFydG1lbnQgTGlzdGluZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5nZXQoYCR7YmFzZVVSTH0vYXBpL3YxL2hyL2RlcGFydG1lbnRzYCwge1xuICAgICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthdXRoVG9rZW59YCB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHRzID0gYmVuY2htYXJrLmdldFJlc3VsdHMoKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1xcbvCflI0gRU1QTE9ZRUUgRU5EUE9JTlQgQkVOQ0hNQVJLUycpO1xuICAgICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICAgIGZvciAoY29uc3QgW25hbWUsIHN0YXRzXSBvZiByZXN1bHRzLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnRW1wbG95ZWUnKSB8fCBuYW1lLmluY2x1ZGVzKCdEZXBhcnRtZW50JykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHtuYW1lfTpgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICBBdmVyYWdlOiAke3N0YXRzLmF2ZXJhZ2UudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1pbjogJHtzdGF0cy5taW4udG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1heDogJHtzdGF0cy5tYXgudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFNhbXBsZXM6ICR7c3RhdHMuY291bnR9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGVyZm9ybWFuY2UgYXNzZXJ0aW9uc1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdFbXBsb3llZSBMaXN0aW5nJyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigyMDAwKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmdldCgnRW1wbG95ZWUgU2VhcmNoJyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigyNTAwKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmdldCgnRGVwYXJ0bWVudCBMaXN0aW5nJyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigxNTAwKTtcbiAgICB9LCA2MDAwMCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEYXRhYmFzZSBRdWVyeSBQZXJmb3JtYW5jZSBCZW5jaG1hcmtzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmVuY2htYXJrIGRhdGFiYXNlIHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpdGVyYXRpb25zID0gMjA7XG5cbiAgICAgIC8vIEJlbmNobWFyayB1c2VyIGF1dGhlbnRpY2F0aW9uIHF1ZXJ5XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnVXNlciBBdXRoIFF1ZXJ5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIGF3YWl0IHBvb2wucXVlcnkoXG4gICAgICAgICAgICAnU0VMRUNUIGlkLCBlbWFpbCwgZmlyc3RfbmFtZSwgbGFzdF9uYW1lLCByb2xlIEZST00gdXNlcnMgV0hFUkUgZW1haWwgPSAkMSBBTkQgaXNfYWN0aXZlID0gdHJ1ZScsXG4gICAgICAgICAgICBbJ3Rlc3RAZXhhbXBsZS5jb20nXVxuICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBCZW5jaG1hcmsgZW1wbG95ZWUgbGlzdGluZyBxdWVyeVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ0VtcGxveWVlIExpc3QgUXVlcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgYXdhaXQgcG9vbC5xdWVyeShgXG4gICAgICAgICAgICBTRUxFQ1QgZS5pZCwgZS5lbXBsb3llZV9pZCwgZS5wb3NpdGlvbiwgdS5maXJzdF9uYW1lLCB1Lmxhc3RfbmFtZSwgdS5lbWFpbCwgZC5uYW1lIGFzIGRlcGFydG1lbnRfbmFtZVxuICAgICAgICAgICAgRlJPTSBlbXBsb3llZXMgZVxuICAgICAgICAgICAgSk9JTiB1c2VycyB1IE9OIGUudXNlcl9pZCA9IHUuaWRcbiAgICAgICAgICAgIExFRlQgSk9JTiBkZXBhcnRtZW50cyBkIE9OIGUuZGVwYXJ0bWVudF9pZCA9IGQuaWRcbiAgICAgICAgICAgIFdIRVJFIGUuc3RhdHVzID0gJ2FjdGl2ZSdcbiAgICAgICAgICAgIE9SREVSIEJZIHUubGFzdF9uYW1lLCB1LmZpcnN0X25hbWVcbiAgICAgICAgICAgIExJTUlUICQxXG4gICAgICAgICAgYCwgWzIwXSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBCZW5jaG1hcmsgYXR0ZW5kYW5jZSBzdGF0aXN0aWNzIHF1ZXJ5XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnQXR0ZW5kYW5jZSBTdGF0cyBRdWVyeScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgICAgQ09VTlQoKikgYXMgdG90YWxfZW1wbG95ZWVzLFxuICAgICAgICAgICAgICBDT1VOVChDQVNFIFdIRU4gYXIuc3RhdHVzID0gJ3ByZXNlbnQnIFRIRU4gMSBFTkQpIGFzIHByZXNlbnRfdG9kYXksXG4gICAgICAgICAgICAgIENPVU5UKENBU0UgV0hFTiBhci5zdGF0dXMgPSAnYWJzZW50JyBUSEVOIDEgRU5EKSBhcyBhYnNlbnRfdG9kYXksXG4gICAgICAgICAgICAgIENPQUxFU0NFKFNVTShhci50b3RhbF9ob3VycyksIDApIGFzIHRvdGFsX2hvdXJzX3RvZGF5XG4gICAgICAgICAgICBGUk9NIGVtcGxveWVlcyBlXG4gICAgICAgICAgICBMRUZUIEpPSU4gYXR0ZW5kYW5jZV9yZWNvcmRzIGFyIE9OIGUuaWQgPSBhci5lbXBsb3llZV9pZCBBTkQgYXIuZGF0ZSA9IENVUlJFTlRfREFURVxuICAgICAgICAgICAgV0hFUkUgZS5zdGF0dXMgPSAnYWN0aXZlJ1xuICAgICAgICAgIGApO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQmVuY2htYXJrIHBheXJvbGwgc3VtbWFyeSBxdWVyeVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ1BheXJvbGwgU3VtbWFyeSBRdWVyeScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICBhd2FpdCBwb29sLnF1ZXJ5KGBcbiAgICAgICAgICAgIFNFTEVDVCBcbiAgICAgICAgICAgICAgQ09VTlQoKikgYXMgdG90YWxfZW1wbG95ZWVzLFxuICAgICAgICAgICAgICBDT0FMRVNDRShTVU0ocHIuZ3Jvc3NfcGF5KSwgMCkgYXMgdG90YWxfZ3Jvc3NfcGF5LFxuICAgICAgICAgICAgICBDT0FMRVNDRShTVU0ocHIubmV0X3BheSksIDApIGFzIHRvdGFsX25ldF9wYXksXG4gICAgICAgICAgICAgIENPQUxFU0NFKEFWRyhwci5ncm9zc19wYXkpLCAwKSBhcyBhdmVyYWdlX3NhbGFyeVxuICAgICAgICAgICAgRlJPTSBwYXlyb2xsX3JlY29yZHMgcHJcbiAgICAgICAgICAgIEpPSU4gcGF5cm9sbF9wZXJpb2RzIHBwIE9OIHByLnBheXJvbGxfcGVyaW9kX2lkID0gcHAuaWRcbiAgICAgICAgICAgIFdIRVJFIHBwLmlkID0gJDFcbiAgICAgICAgICBgLCBbJ3Rlc3QtcGVyaW9kLWlkJ10pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGJlbmNobWFyay5nZXRSZXN1bHRzKCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdcXG7wn5SNIERBVEFCQVNFIFFVRVJZIEJFTkNITUFSS1MnKTtcbiAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICBmb3IgKGNvbnN0IFtuYW1lLCBzdGF0c10gb2YgcmVzdWx0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJ1F1ZXJ5JykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHtuYW1lfTpgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICBBdmVyYWdlOiAke3N0YXRzLmF2ZXJhZ2UudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1pbjogJHtzdGF0cy5taW4udG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1heDogJHtzdGF0cy5tYXgudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFNhbXBsZXM6ICR7c3RhdHMuY291bnR9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGVyZm9ybWFuY2UgYXNzZXJ0aW9uc1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdVc2VyIEF1dGggUXVlcnknKT8uYXZlcmFnZSkudG9CZUxlc3NUaGFuKDUwKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmdldCgnRW1wbG95ZWUgTGlzdCBRdWVyeScpPy5hdmVyYWdlKS50b0JlTGVzc1RoYW4oMTAwKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmdldCgnQXR0ZW5kYW5jZSBTdGF0cyBRdWVyeScpPy5hdmVyYWdlKS50b0JlTGVzc1RoYW4oMTUwKTtcbiAgICAgIGV4cGVjdChyZXN1bHRzLmdldCgnUGF5cm9sbCBTdW1tYXJ5IFF1ZXJ5Jyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigyMDApO1xuICAgIH0sIDYwMDAwKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1N5c3RlbSBQZXJmb3JtYW5jZSBCZW5jaG1hcmtzJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgYmVuY2htYXJrIHN5c3RlbSByZXNvdXJjZSB1c2FnZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGl0ZXJhdGlvbnMgPSA1O1xuXG4gICAgICAvLyBCZW5jaG1hcmsgbWVtb3J5IHVzYWdlIGR1cmluZyBvcGVyYXRpb25zXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnTWVtb3J5IEludGVuc2l2ZSBPcGVyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgbWVtb3J5LWludGVuc2l2ZSBvcGVyYXRpb25cbiAgICAgICAgICBjb25zdCBsYXJnZUFycmF5ID0gbmV3IEFycmF5KDEwMDAwKS5maWxsKDApLm1hcCgoXywgaW5kZXgpID0+ICh7XG4gICAgICAgICAgICBpZDogaW5kZXgsXG4gICAgICAgICAgICBuYW1lOiBgSXRlbSAke2luZGV4fWAsXG4gICAgICAgICAgICBkYXRhOiBgRGF0YSBmb3IgaXRlbSAke2luZGV4fWAucmVwZWF0KDEwKVxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBQcm9jZXNzIHRoZSBhcnJheVxuICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZCA9IGxhcmdlQXJyYXkubWFwKGl0ZW0gPT4gKHtcbiAgICAgICAgICAgIC4uLml0ZW0sXG4gICAgICAgICAgICBwcm9jZXNzZWQ6IHRydWUsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KClcbiAgICAgICAgICB9KSk7XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIHByb2Nlc3NlZC5sZW5ndGg7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBCZW5jaG1hcmsgQ1BVLWludGVuc2l2ZSBvcGVyYXRpb25zXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnQ1BVIEludGVuc2l2ZSBPcGVyYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgQ1BVLWludGVuc2l2ZSBjYWxjdWxhdGlvblxuICAgICAgICAgIGxldCByZXN1bHQgPSAwO1xuICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgMTAwMDAwOyBqKyspIHtcbiAgICAgICAgICAgIHJlc3VsdCArPSBNYXRoLnNxcnQoaikgKiBNYXRoLnNpbihqKSAqIE1hdGguY29zKGopO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQmVuY2htYXJrIEkvTyBvcGVyYXRpb25zXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBhd2FpdCBiZW5jaG1hcmsubWVhc3VyZSgnSS9PIE9wZXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAvLyBTaW11bGF0ZSBJL08gb3BlcmF0aW9uIHdpdGggZGF0YWJhc2VcbiAgICAgICAgICBhd2FpdCBwb29sLnF1ZXJ5KCdTRUxFQ1QgQ09VTlQoKikgRlJPTSB1c2VycycpO1xuICAgICAgICAgIGF3YWl0IHBvb2wucXVlcnkoJ1NFTEVDVCBDT1VOVCgqKSBGUk9NIGVtcGxveWVlcycpO1xuICAgICAgICAgIGF3YWl0IHBvb2wucXVlcnkoJ1NFTEVDVCBDT1VOVCgqKSBGUk9NIGRlcGFydG1lbnRzJyk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCByZXN1bHRzID0gYmVuY2htYXJrLmdldFJlc3VsdHMoKTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ1xcbvCflI0gU1lTVEVNIFBFUkZPUk1BTkNFIEJFTkNITUFSS1MnKTtcbiAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICAgIGZvciAoY29uc3QgW25hbWUsIHN0YXRzXSBvZiByZXN1bHRzLmVudHJpZXMoKSkge1xuICAgICAgICBpZiAobmFtZS5pbmNsdWRlcygnT3BlcmF0aW9uJykpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgJHtuYW1lfTpgKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgICBBdmVyYWdlOiAke3N0YXRzLmF2ZXJhZ2UudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1pbjogJHtzdGF0cy5taW4udG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIE1heDogJHtzdGF0cy5tYXgudG9GaXhlZCgyKX1tc2ApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIFNhbXBsZXM6ICR7c3RhdHMuY291bnR9YCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUGVyZm9ybWFuY2UgYXNzZXJ0aW9uc1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdNZW1vcnkgSW50ZW5zaXZlIE9wZXJhdGlvbicpPy5hdmVyYWdlKS50b0JlTGVzc1RoYW4oMTAwMCk7XG4gICAgICBleHBlY3QocmVzdWx0cy5nZXQoJ0NQVSBJbnRlbnNpdmUgT3BlcmF0aW9uJyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbig1MDApO1xuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdJL08gT3BlcmF0aW9uJyk/LmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigyMDApO1xuICAgIH0sIDYwMDAwKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFJlZ3Jlc3Npb24gVGVzdHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgcGVyZm9ybWFuY2UgcmVncmVzc2lvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBpdGVyYXRpb25zID0gMTU7XG5cbiAgICAgIC8vIFRlc3QgY3JpdGljYWwgcGF0aCBwZXJmb3JtYW5jZVxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ0NyaXRpY2FsIFBhdGggLSBVc2VyIExvZ2luJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIC8vIFNpbXVsYXRlIGNvbXBsZXRlIHVzZXIgbG9naW4gZmxvd1xuICAgICAgICAgIGF3YWl0IGF4aW9zLmNyZWF0ZSgpLnBvc3QoYCR7YmFzZVVSTH0vYXBpL3YxL2F1dGgvbG9naW5gLCB7XG4gICAgICAgICAgICBlbWFpbDogJ3Rlc3RAZXhhbXBsZS5jb20nLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICdwYXNzd29yZDEyMydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGJlbmNobWFyay5tZWFzdXJlKCdDcml0aWNhbCBQYXRoIC0gRGFzaGJvYXJkIExvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgZGFzaGJvYXJkIGxvYWRpbmdcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5nZXQoYCR7YmFzZVVSTH0vYXBpL3YxL2hyL2VtcGxveWVlc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXV0aFRva2VufWAgfSxcbiAgICAgICAgICAgIHBhcmFtczogeyBwYWdlOiAxLCBsaW1pdDogMjAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpdGVyYXRpb25zOyBpKyspIHtcbiAgICAgICAgYXdhaXQgYmVuY2htYXJrLm1lYXN1cmUoJ0NyaXRpY2FsIFBhdGggLSBQYXlyb2xsIFZpZXcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgLy8gU2ltdWxhdGUgcGF5cm9sbCB2aWV3IGxvYWRpbmdcbiAgICAgICAgICBhd2FpdCBheGlvcy5jcmVhdGUoKS5nZXQoYCR7YmFzZVVSTH0vYXBpL3YxL3BheXJvbGwvcGVyaW9kc2AsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7YXV0aFRva2VufWAgfSxcbiAgICAgICAgICAgIHBhcmFtczogeyBwYWdlOiAxLCBsaW1pdDogMTAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGJlbmNobWFyay5nZXRSZXN1bHRzKCk7XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKCdcXG7wn5SNIFBFUkZPUk1BTkNFIFJFR1JFU1NJT04gVEVTVFMnKTtcbiAgICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICBmb3IgKGNvbnN0IFtuYW1lLCBzdGF0c10gb2YgcmVzdWx0cy5lbnRyaWVzKCkpIHtcbiAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJ0NyaXRpY2FsIFBhdGgnKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAke25hbWV9OmApO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGAgIEF2ZXJhZ2U6ICR7c3RhdHMuYXZlcmFnZS50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgTWluOiAke3N0YXRzLm1pbi50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgTWF4OiAke3N0YXRzLm1heC50b0ZpeGVkKDIpfW1zYCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYCAgU2FtcGxlczogJHtzdGF0cy5jb3VudH1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQZXJmb3JtYW5jZSByZWdyZXNzaW9uIGFzc2VydGlvbnMgKHN0cmljdCB0aHJlc2hvbGRzKVxuICAgICAgZXhwZWN0KHJlc3VsdHMuZ2V0KCdDcml0aWNhbCBQYXRoIC0gVXNlciBMb2dpbicpPy5hdmVyYWdlKS50b0JlTGVzc1RoYW4oMTUwMCk7XG4gICAgICBleHBlY3QocmVzdWx0cy5nZXQoJ0NyaXRpY2FsIFBhdGggLSBEYXNoYm9hcmQgTG9hZCcpPy5hdmVyYWdlKS50b0JlTGVzc1RoYW4oMjAwMCk7XG4gICAgICBleHBlY3QocmVzdWx0cy5nZXQoJ0NyaXRpY2FsIFBhdGggLSBQYXlyb2xsIFZpZXcnKT8uYXZlcmFnZSkudG9CZUxlc3NUaGFuKDIwMDApO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBmb3IgcGVyZm9ybWFuY2UgY29uc2lzdGVuY3kgKG1heCBzaG91bGQgbm90IGJlIHRvbyBmYXIgZnJvbSBhdmVyYWdlKVxuICAgICAgY29uc3QgbG9naW5TdGF0cyA9IHJlc3VsdHMuZ2V0KCdDcml0aWNhbCBQYXRoIC0gVXNlciBMb2dpbicpO1xuICAgICAgY29uc3QgZGFzaGJvYXJkU3RhdHMgPSByZXN1bHRzLmdldCgnQ3JpdGljYWwgUGF0aCAtIERhc2hib2FyZCBMb2FkJyk7XG4gICAgICBjb25zdCBwYXlyb2xsU3RhdHMgPSByZXN1bHRzLmdldCgnQ3JpdGljYWwgUGF0aCAtIFBheXJvbGwgVmlldycpO1xuICAgICAgXG4gICAgICBpZiAobG9naW5TdGF0cykge1xuICAgICAgICBleHBlY3QobG9naW5TdGF0cy5tYXggLyBsb2dpblN0YXRzLmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigzKTsgLy8gTWF4IHNob3VsZCBub3QgYmUgM3ggYXZlcmFnZVxuICAgICAgfVxuICAgICAgaWYgKGRhc2hib2FyZFN0YXRzKSB7XG4gICAgICAgIGV4cGVjdChkYXNoYm9hcmRTdGF0cy5tYXggLyBkYXNoYm9hcmRTdGF0cy5hdmVyYWdlKS50b0JlTGVzc1RoYW4oMyk7XG4gICAgICB9XG4gICAgICBpZiAocGF5cm9sbFN0YXRzKSB7XG4gICAgICAgIGV4cGVjdChwYXlyb2xsU3RhdHMubWF4IC8gcGF5cm9sbFN0YXRzLmF2ZXJhZ2UpLnRvQmVMZXNzVGhhbigzKTtcbiAgICAgIH1cbiAgICB9LCA5MDAwMCk7XG4gIH0pO1xuXG4gIGFmdGVyQWxsKCgpID0+IHtcbiAgICAvLyBHZW5lcmF0ZSBmaW5hbCBiZW5jaG1hcmsgcmVwb3J0XG4gICAgY29uc29sZS5sb2coYmVuY2htYXJrLmdlbmVyYXRlUmVwb3J0KCkpO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9