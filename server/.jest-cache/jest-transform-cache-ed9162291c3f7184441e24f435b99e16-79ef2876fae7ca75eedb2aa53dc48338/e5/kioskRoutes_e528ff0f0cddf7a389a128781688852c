96fc4d5909f3b386a114d298e06f193a
"use strict";

/* istanbul ignore next */
function cov_168kd5w9() {
  var path = "/home/kim/tito/server/src/routes/kiosk/kioskRoutes.ts";
  var hash = "4ca6079e575bd50e225ddc1cec140b911b0e25f6";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/kim/tito/server/src/routes/kiosk/kioskRoutes.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 22
        },
        end: {
          line: 4,
          column: 1
        }
      },
      "1": {
        start: {
          line: 3,
          column: 4
        },
        end: {
          line: 3,
          column: 62
        }
      },
      "2": {
        start: {
          line: 5,
          column: 0
        },
        end: {
          line: 5,
          column: 62
        }
      },
      "3": {
        start: {
          line: 6,
          column: 18
        },
        end: {
          line: 6,
          column: 36
        }
      },
      "4": {
        start: {
          line: 7,
          column: 26
        },
        end: {
          line: 7,
          column: 93
        }
      },
      "5": {
        start: {
          line: 8,
          column: 17
        },
        end: {
          line: 8,
          column: 47
        }
      },
      "6": {
        start: {
          line: 9,
          column: 20
        },
        end: {
          line: 9,
          column: 62
        }
      },
      "7": {
        start: {
          line: 10,
          column: 19
        },
        end: {
          line: 10,
          column: 66
        }
      },
      "8": {
        start: {
          line: 11,
          column: 23
        },
        end: {
          line: 11,
          column: 82
        }
      },
      "9": {
        start: {
          line: 12,
          column: 30
        },
        end: {
          line: 12,
          column: 83
        }
      },
      "10": {
        start: {
          line: 13,
          column: 17
        },
        end: {
          line: 13,
          column: 51
        }
      },
      "11": {
        start: {
          line: 14,
          column: 15
        },
        end: {
          line: 14,
          column: 38
        }
      },
      "12": {
        start: {
          line: 16,
          column: 23
        },
        end: {
          line: 24,
          column: 2
        }
      },
      "13": {
        start: {
          line: 22,
          column: 8
        },
        end: {
          line: 22,
          column: 65
        }
      },
      "14": {
        start: {
          line: 26,
          column: 0
        },
        end: {
          line: 47,
          column: 4
        }
      },
      "15": {
        start: {
          line: 49,
          column: 0
        },
        end: {
          line: 49,
          column: 27
        }
      },
      "16": {
        start: {
          line: 50,
          column: 0
        },
        end: {
          line: 50,
          column: 34
        }
      },
      "17": {
        start: {
          line: 52,
          column: 0
        },
        end: {
          line: 52,
          column: 71
        }
      },
      "18": {
        start: {
          line: 53,
          column: 0
        },
        end: {
          line: 53,
          column: 139
        }
      },
      "19": {
        start: {
          line: 54,
          column: 0
        },
        end: {
          line: 54,
          column: 154
        }
      },
      "20": {
        start: {
          line: 55,
          column: 0
        },
        end: {
          line: 55,
          column: 160
        }
      },
      "21": {
        start: {
          line: 57,
          column: 0
        },
        end: {
          line: 57,
          column: 167
        }
      },
      "22": {
        start: {
          line: 58,
          column: 0
        },
        end: {
          line: 58,
          column: 171
        }
      },
      "23": {
        start: {
          line: 59,
          column: 0
        },
        end: {
          line: 59,
          column: 142
        }
      },
      "24": {
        start: {
          line: 60,
          column: 0
        },
        end: {
          line: 60,
          column: 154
        }
      },
      "25": {
        start: {
          line: 61,
          column: 0
        },
        end: {
          line: 61,
          column: 25
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 2,
            column: 56
          },
          end: {
            line: 2,
            column: 57
          }
        },
        loc: {
          start: {
            line: 2,
            column: 71
          },
          end: {
            line: 4,
            column: 1
          }
        },
        line: 2
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 20,
            column: 18
          },
          end: {
            line: 20,
            column: 19
          }
        },
        loc: {
          start: {
            line: 20,
            column: 27
          },
          end: {
            line: 23,
            column: 5
          }
        },
        line: 20
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 2,
            column: 22
          },
          end: {
            line: 4,
            column: 1
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 2,
            column: 23
          },
          end: {
            line: 2,
            column: 27
          }
        }, {
          start: {
            line: 2,
            column: 31
          },
          end: {
            line: 2,
            column: 51
          }
        }, {
          start: {
            line: 2,
            column: 56
          },
          end: {
            line: 4,
            column: 1
          }
        }],
        line: 2
      },
      "1": {
        loc: {
          start: {
            line: 3,
            column: 11
          },
          end: {
            line: 3,
            column: 61
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 3,
            column: 37
          },
          end: {
            line: 3,
            column: 40
          }
        }, {
          start: {
            line: 3,
            column: 43
          },
          end: {
            line: 3,
            column: 61
          }
        }],
        line: 3
      },
      "2": {
        loc: {
          start: {
            line: 3,
            column: 12
          },
          end: {
            line: 3,
            column: 33
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 3,
            column: 12
          },
          end: {
            line: 3,
            column: 15
          }
        }, {
          start: {
            line: 3,
            column: 19
          },
          end: {
            line: 3,
            column: 33
          }
        }],
        line: 3
      },
      "3": {
        loc: {
          start: {
            line: 22,
            column: 28
          },
          end: {
            line: 22,
            column: 62
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 22,
            column: 28
          },
          end: {
            line: 22,
            column: 49
          }
        }, {
          start: {
            line: 22,
            column: 53
          },
          end: {
            line: 22,
            column: 62
          }
        }],
        line: 22
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0
    },
    f: {
      "0": 0,
      "1": 0
    },
    b: {
      "0": [0, 0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0]
    },
    inputSourceMap: {
      file: "/home/kim/tito/server/src/routes/kiosk/kioskRoutes.ts",
      mappings: ";;;;;AAAA,qCAAiC;AACjC,8FAAsE;AACtE,gDAAsE;AACtE,+DAA4D;AAC5D,mEAAoF;AACpF,mFAAiI;AACjI,oFAAkF;AAClF,oDAA4B;AAE5B,MAAM,MAAM,GAAG,IAAA,gBAAM,GAAE,CAAC;AAExB,8EAA8E;AAC9E,MAAM,cAAc,GAAG,IAAA,0CAAoB,EAAC;IAC1C,QAAQ,EAAE,EAAE,GAAG,EAAE,GAAG,IAAI,EAAE,aAAa;IACvC,WAAW,EAAE,EAAE,EAAE,oCAAoC;IACrD,OAAO,EAAE,iDAAiD;IAC1D,YAAY,EAAE,CAAC,GAAG,EAAE,EAAE;QACpB,sEAAsE;QACtE,OAAO,GAAG,GAAG,CAAC,EAAE,IAAI,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,IAAI,SAAS,EAAE,CAAC;IAC3D,CAAC;CACF,CAAC,CAAC;AAEH,kEAAkE;AAClE,MAAM,CAAC,GAAG,CAAC,IAAA,gBAAM,EAAC;IAChB,qBAAqB,EAAE;QACrB,UAAU,EAAE;YACV,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,QAAQ,EAAE,CAAC,QAAQ,EAAE,iBAAiB,CAAC,EAAE,8BAA8B;YACvE,SAAS,EAAE,CAAC,QAAQ,CAAC;YACrB,MAAM,EAAE,CAAC,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,EAAE,yCAAyC;YAC/E,UAAU,EAAE,CAAC,QAAQ,CAAC;YACtB,OAAO,EAAE,CAAC,QAAQ,CAAC;YACnB,SAAS,EAAE,CAAC,QAAQ,CAAC;YACrB,QAAQ,EAAE,CAAC,QAAQ,CAAC;YACpB,QAAQ,EAAE,CAAC,QAAQ,CAAC;SACrB;KACF;IACD,yBAAyB,EAAE,KAAK;IAChC,yBAAyB,EAAE,EAAE,MAAM,EAAE,cAAc,EAAE;IACrD,IAAI,EAAE;QACJ,MAAM,EAAE,QAAQ;QAChB,iBAAiB,EAAE,IAAI;QACvB,OAAO,EAAE,IAAI;KACd;CACF,CAAC,CAAC,CAAC;AAEJ,6DAA6D;AAC7D,MAAM,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;AAC3B,MAAM,CAAC,GAAG,CAAC,qBAAS,CAAC,CAAC;AAEtB,yDAAyD;AACzD,MAAM,CAAC,GAAG,CAAC,YAAY,EAAE,yBAAe,CAAC,kBAAkB,CAAC,CAAC;AAC7D,MAAM,CAAC,IAAI,CAAC,aAAa,EAAE,IAAA,uBAAY,EAAC,oCAAqB,CAAC,EAAE,yBAAe,CAAC,gBAAgB,CAAC,CAAC;AAClG,MAAM,CAAC,GAAG,CAAC,8BAA8B,EAAE,IAAA,yBAAc,EAAC,gCAAiB,CAAC,EAAE,yBAAe,CAAC,iBAAiB,CAAC,CAAC;AACjH,MAAM,CAAC,GAAG,CAAC,iCAAiC,EAAE,IAAA,yBAAc,EAAC,gCAAiB,CAAC,EAAE,yBAAe,CAAC,oBAAoB,CAAC,CAAC;AAEvH,+BAA+B;AAC/B,MAAM,CAAC,GAAG,CAAC,sCAAsC,EAAE,IAAA,yBAAc,EAAC,gCAAiB,CAAC,EAAE,yBAAe,CAAC,sBAAsB,CAAC,CAAC;AAC9H,MAAM,CAAC,GAAG,CAAC,uCAAuC,EAAE,IAAA,yBAAc,EAAC,gCAAiB,CAAC,EAAE,yBAAe,CAAC,yBAAyB,CAAC,CAAC;AAClI,MAAM,CAAC,IAAI,CAAC,wBAAwB,EAAE,qBAAY,EAAE,0BAAiB,EAAE,yBAAe,CAAC,yBAAyB,CAAC,CAAC;AAClH,MAAM,CAAC,IAAI,CAAC,sBAAsB,EAAE,IAAA,uBAAY,EAAC,kCAAmB,CAAC,EAAE,yBAAe,CAAC,wBAAwB,CAAC,CAAC;AAEjH,kBAAe,MAAM,CAAC",
      names: [],
      sources: ["/home/kim/tito/server/src/routes/kiosk/kioskRoutes.ts"],
      sourcesContent: ["import { Router } from 'express';\nimport kioskController from '../../controllers/kiosk/kioskController';\nimport { uploadSelfie, handleMulterError } from '../../config/multer';\nimport { kioskAuth } from '../../middleware/auth/kioskAuth';\nimport { validateBody, validateParams } from '../../middleware/validation/validate';\nimport { kioskAttendanceSchema, kioskValidateSchema, kioskParamsSchema } from '../../middleware/validation/schemas/kioskSchemas';\nimport { createRedisRateLimit } from '../../middleware/redis/rateLimitMiddleware';\nimport helmet from 'helmet';\n\nconst router = Router();\n\n// SECURITY: Apply stricter rate limiting for kiosk endpoints to prevent abuse\nconst kioskRateLimit = createRedisRateLimit({\n  windowMs: 15 * 60 * 1000, // 15 minutes\n  maxRequests: 50, // 50 requests per 15 minutes per IP\n  message: 'Too many kiosk requests, please try again later',\n  keyGenerator: (req) => {\n    // Use IP + User-Agent for rate limiting to prevent simple IP spoofing\n    return `${req.ip}-${req.get('User-Agent') || 'unknown'}`;\n  }\n});\n\n// SECURITY: Apply additional security headers for kiosk endpoints\nrouter.use(helmet({\n  contentSecurityPolicy: {\n    directives: {\n      defaultSrc: [\"'self'\"],\n      styleSrc: [\"'self'\", \"'unsafe-inline'\"], // For potential styling needs\n      scriptSrc: [\"'self'\"],\n      imgSrc: [\"'self'\", \"data:\", \"blob:\"], // Allow data URLs and blobs for QR codes\n      connectSrc: [\"'self'\"],\n      fontSrc: [\"'self'\"],\n      objectSrc: [\"'none'\"],\n      mediaSrc: [\"'self'\"],\n      frameSrc: [\"'none'\"],\n    },\n  },\n  crossOriginEmbedderPolicy: false,\n  crossOriginResourcePolicy: { policy: \"cross-origin\" },\n  hsts: {\n    maxAge: 31536000,\n    includeSubDomains: true,\n    preload: true\n  }\n}));\n\n// Apply rate limiting and authentication to all kiosk routes\nrouter.use(kioskRateLimit);\nrouter.use(kioskAuth);\n\n// Kiosk routes with proper authentication and validation\nrouter.get('/verify-qr', kioskController.verifyEmployeeByQR);\nrouter.post('/attendance', validateBody(kioskAttendanceSchema), kioskController.recordAttendance);\nrouter.get('/attendance/last/:employeeId', validateParams(kioskParamsSchema), kioskController.getLastAttendance);\nrouter.get('/attendance/history/:employeeId', validateParams(kioskParamsSchema), kioskController.getAttendanceHistory);\n\n// Time-based attendance routes\nrouter.get('/attendance/next-session/:employeeId', validateParams(kioskParamsSchema), kioskController.getNextExpectedSession);\nrouter.get('/attendance/today-summary/:employeeId', validateParams(kioskParamsSchema), kioskController.getTodayAttendanceSummary);\nrouter.post('/attendance/time-based', uploadSelfie, handleMulterError, kioskController.recordTimeBasedAttendance);\nrouter.post('/attendance/validate', validateBody(kioskValidateSchema), kioskController.validateAttendanceAction);\n\nexport default router;\n"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "4ca6079e575bd50e225ddc1cec140b911b0e25f6"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_168kd5w9 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_168kd5w9();
var __importDefault =
/* istanbul ignore next */
(cov_168kd5w9().s[0]++,
/* istanbul ignore next */
(cov_168kd5w9().b[0][0]++, this) &&
/* istanbul ignore next */
(cov_168kd5w9().b[0][1]++, this.__importDefault) ||
/* istanbul ignore next */
(cov_168kd5w9().b[0][2]++, function (mod) {
  /* istanbul ignore next */
  cov_168kd5w9().f[0]++;
  cov_168kd5w9().s[1]++;
  return /* istanbul ignore next */(cov_168kd5w9().b[2][0]++, mod) &&
  /* istanbul ignore next */
  (cov_168kd5w9().b[2][1]++, mod.__esModule) ?
  /* istanbul ignore next */
  (cov_168kd5w9().b[1][0]++, mod) :
  /* istanbul ignore next */
  (cov_168kd5w9().b[1][1]++, {
    "default": mod
  });
}));
/* istanbul ignore next */
cov_168kd5w9().s[2]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
const express_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[3]++, require("express"));
const kioskController_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[4]++, __importDefault(require("../../controllers/kiosk/kioskController")));
const multer_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[5]++, require("../../config/multer"));
const kioskAuth_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[6]++, require("../../middleware/auth/kioskAuth"));
const validate_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[7]++, require("../../middleware/validation/validate"));
const kioskSchemas_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[8]++, require("../../middleware/validation/schemas/kioskSchemas"));
const rateLimitMiddleware_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[9]++, require("../../middleware/redis/rateLimitMiddleware"));
const helmet_1 =
/* istanbul ignore next */
(cov_168kd5w9().s[10]++, __importDefault(require("helmet")));
const router =
/* istanbul ignore next */
(cov_168kd5w9().s[11]++, (0, express_1.Router)());
// SECURITY: Apply stricter rate limiting for kiosk endpoints to prevent abuse
const kioskRateLimit =
/* istanbul ignore next */
(cov_168kd5w9().s[12]++, (0, rateLimitMiddleware_1.createRedisRateLimit)({
  windowMs: 15 * 60 * 1000,
  // 15 minutes
  maxRequests: 50,
  // 50 requests per 15 minutes per IP
  message: 'Too many kiosk requests, please try again later',
  keyGenerator: req => {
    /* istanbul ignore next */
    cov_168kd5w9().f[1]++;
    cov_168kd5w9().s[13]++;
    // Use IP + User-Agent for rate limiting to prevent simple IP spoofing
    return `${req.ip}-${
    /* istanbul ignore next */
    (cov_168kd5w9().b[3][0]++, req.get('User-Agent')) ||
    /* istanbul ignore next */
    (cov_168kd5w9().b[3][1]++, 'unknown')}`;
  }
}));
// SECURITY: Apply additional security headers for kiosk endpoints
/* istanbul ignore next */
cov_168kd5w9().s[14]++;
router.use((0, helmet_1.default)({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      // For potential styling needs
      scriptSrc: ["'self'"],
      imgSrc: ["'self'", "data:", "blob:"],
      // Allow data URLs and blobs for QR codes
      connectSrc: ["'self'"],
      fontSrc: ["'self'"],
      objectSrc: ["'none'"],
      mediaSrc: ["'self'"],
      frameSrc: ["'none'"]
    }
  },
  crossOriginEmbedderPolicy: false,
  crossOriginResourcePolicy: {
    policy: "cross-origin"
  },
  hsts: {
    maxAge: 31536000,
    includeSubDomains: true,
    preload: true
  }
}));
// Apply rate limiting and authentication to all kiosk routes
/* istanbul ignore next */
cov_168kd5w9().s[15]++;
router.use(kioskRateLimit);
/* istanbul ignore next */
cov_168kd5w9().s[16]++;
router.use(kioskAuth_1.kioskAuth);
// Kiosk routes with proper authentication and validation
/* istanbul ignore next */
cov_168kd5w9().s[17]++;
router.get('/verify-qr', kioskController_1.default.verifyEmployeeByQR);
/* istanbul ignore next */
cov_168kd5w9().s[18]++;
router.post('/attendance', (0, validate_1.validateBody)(kioskSchemas_1.kioskAttendanceSchema), kioskController_1.default.recordAttendance);
/* istanbul ignore next */
cov_168kd5w9().s[19]++;
router.get('/attendance/last/:employeeId', (0, validate_1.validateParams)(kioskSchemas_1.kioskParamsSchema), kioskController_1.default.getLastAttendance);
/* istanbul ignore next */
cov_168kd5w9().s[20]++;
router.get('/attendance/history/:employeeId', (0, validate_1.validateParams)(kioskSchemas_1.kioskParamsSchema), kioskController_1.default.getAttendanceHistory);
// Time-based attendance routes
/* istanbul ignore next */
cov_168kd5w9().s[21]++;
router.get('/attendance/next-session/:employeeId', (0, validate_1.validateParams)(kioskSchemas_1.kioskParamsSchema), kioskController_1.default.getNextExpectedSession);
/* istanbul ignore next */
cov_168kd5w9().s[22]++;
router.get('/attendance/today-summary/:employeeId', (0, validate_1.validateParams)(kioskSchemas_1.kioskParamsSchema), kioskController_1.default.getTodayAttendanceSummary);
/* istanbul ignore next */
cov_168kd5w9().s[23]++;
router.post('/attendance/time-based', multer_1.uploadSelfie, multer_1.handleMulterError, kioskController_1.default.recordTimeBasedAttendance);
/* istanbul ignore next */
cov_168kd5w9().s[24]++;
router.post('/attendance/validate', (0, validate_1.validateBody)(kioskSchemas_1.kioskValidateSchema), kioskController_1.default.validateAttendanceAction);
/* istanbul ignore next */
cov_168kd5w9().s[25]++;
exports.default = router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTY4a2Q1dzkiLCJhY3R1YWxDb3ZlcmFnZSIsImV4cHJlc3NfMSIsInMiLCJyZXF1aXJlIiwia2lvc2tDb250cm9sbGVyXzEiLCJfX2ltcG9ydERlZmF1bHQiLCJtdWx0ZXJfMSIsImtpb3NrQXV0aF8xIiwidmFsaWRhdGVfMSIsImtpb3NrU2NoZW1hc18xIiwicmF0ZUxpbWl0TWlkZGxld2FyZV8xIiwiaGVsbWV0XzEiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJraW9za1JhdGVMaW1pdCIsImNyZWF0ZVJlZGlzUmF0ZUxpbWl0Iiwid2luZG93TXMiLCJtYXhSZXF1ZXN0cyIsIm1lc3NhZ2UiLCJrZXlHZW5lcmF0b3IiLCJyZXEiLCJmIiwiaXAiLCJiIiwiZ2V0IiwidXNlIiwiZGVmYXVsdCIsImNvbnRlbnRTZWN1cml0eVBvbGljeSIsImRpcmVjdGl2ZXMiLCJkZWZhdWx0U3JjIiwic3R5bGVTcmMiLCJzY3JpcHRTcmMiLCJpbWdTcmMiLCJjb25uZWN0U3JjIiwiZm9udFNyYyIsIm9iamVjdFNyYyIsIm1lZGlhU3JjIiwiZnJhbWVTcmMiLCJjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5IiwiY3Jvc3NPcmlnaW5SZXNvdXJjZVBvbGljeSIsInBvbGljeSIsImhzdHMiLCJtYXhBZ2UiLCJpbmNsdWRlU3ViRG9tYWlucyIsInByZWxvYWQiLCJraW9za0F1dGgiLCJ2ZXJpZnlFbXBsb3llZUJ5UVIiLCJwb3N0IiwidmFsaWRhdGVCb2R5Iiwia2lvc2tBdHRlbmRhbmNlU2NoZW1hIiwicmVjb3JkQXR0ZW5kYW5jZSIsInZhbGlkYXRlUGFyYW1zIiwia2lvc2tQYXJhbXNTY2hlbWEiLCJnZXRMYXN0QXR0ZW5kYW5jZSIsImdldEF0dGVuZGFuY2VIaXN0b3J5IiwiZ2V0TmV4dEV4cGVjdGVkU2Vzc2lvbiIsImdldFRvZGF5QXR0ZW5kYW5jZVN1bW1hcnkiLCJ1cGxvYWRTZWxmaWUiLCJoYW5kbGVNdWx0ZXJFcnJvciIsInJlY29yZFRpbWVCYXNlZEF0dGVuZGFuY2UiLCJraW9za1ZhbGlkYXRlU2NoZW1hIiwidmFsaWRhdGVBdHRlbmRhbmNlQWN0aW9uIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIi9ob21lL2tpbS90aXRvL3NlcnZlci9zcmMvcm91dGVzL2tpb3NrL2tpb3NrUm91dGVzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IGtpb3NrQ29udHJvbGxlciBmcm9tICcuLi8uLi9jb250cm9sbGVycy9raW9zay9raW9za0NvbnRyb2xsZXInO1xuaW1wb3J0IHsgdXBsb2FkU2VsZmllLCBoYW5kbGVNdWx0ZXJFcnJvciB9IGZyb20gJy4uLy4uL2NvbmZpZy9tdWx0ZXInO1xuaW1wb3J0IHsga2lvc2tBdXRoIH0gZnJvbSAnLi4vLi4vbWlkZGxld2FyZS9hdXRoL2tpb3NrQXV0aCc7XG5pbXBvcnQgeyB2YWxpZGF0ZUJvZHksIHZhbGlkYXRlUGFyYW1zIH0gZnJvbSAnLi4vLi4vbWlkZGxld2FyZS92YWxpZGF0aW9uL3ZhbGlkYXRlJztcbmltcG9ydCB7IGtpb3NrQXR0ZW5kYW5jZVNjaGVtYSwga2lvc2tWYWxpZGF0ZVNjaGVtYSwga2lvc2tQYXJhbXNTY2hlbWEgfSBmcm9tICcuLi8uLi9taWRkbGV3YXJlL3ZhbGlkYXRpb24vc2NoZW1hcy9raW9za1NjaGVtYXMnO1xuaW1wb3J0IHsgY3JlYXRlUmVkaXNSYXRlTGltaXQgfSBmcm9tICcuLi8uLi9taWRkbGV3YXJlL3JlZGlzL3JhdGVMaW1pdE1pZGRsZXdhcmUnO1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxuLy8gU0VDVVJJVFk6IEFwcGx5IHN0cmljdGVyIHJhdGUgbGltaXRpbmcgZm9yIGtpb3NrIGVuZHBvaW50cyB0byBwcmV2ZW50IGFidXNlXG5jb25zdCBraW9za1JhdGVMaW1pdCA9IGNyZWF0ZVJlZGlzUmF0ZUxpbWl0KHtcbiAgd2luZG93TXM6IDE1ICogNjAgKiAxMDAwLCAvLyAxNSBtaW51dGVzXG4gIG1heFJlcXVlc3RzOiA1MCwgLy8gNTAgcmVxdWVzdHMgcGVyIDE1IG1pbnV0ZXMgcGVyIElQXG4gIG1lc3NhZ2U6ICdUb28gbWFueSBraW9zayByZXF1ZXN0cywgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlcicsXG4gIGtleUdlbmVyYXRvcjogKHJlcSkgPT4ge1xuICAgIC8vIFVzZSBJUCArIFVzZXItQWdlbnQgZm9yIHJhdGUgbGltaXRpbmcgdG8gcHJldmVudCBzaW1wbGUgSVAgc3Bvb2ZpbmdcbiAgICByZXR1cm4gYCR7cmVxLmlwfS0ke3JlcS5nZXQoJ1VzZXItQWdlbnQnKSB8fCAndW5rbm93bid9YDtcbiAgfVxufSk7XG5cbi8vIFNFQ1VSSVRZOiBBcHBseSBhZGRpdGlvbmFsIHNlY3VyaXR5IGhlYWRlcnMgZm9yIGtpb3NrIGVuZHBvaW50c1xucm91dGVyLnVzZShoZWxtZXQoe1xuICBjb250ZW50U2VjdXJpdHlQb2xpY3k6IHtcbiAgICBkaXJlY3RpdmVzOiB7XG4gICAgICBkZWZhdWx0U3JjOiBbXCInc2VsZidcIl0sXG4gICAgICBzdHlsZVNyYzogW1wiJ3NlbGYnXCIsIFwiJ3Vuc2FmZS1pbmxpbmUnXCJdLCAvLyBGb3IgcG90ZW50aWFsIHN0eWxpbmcgbmVlZHNcbiAgICAgIHNjcmlwdFNyYzogW1wiJ3NlbGYnXCJdLFxuICAgICAgaW1nU3JjOiBbXCInc2VsZidcIiwgXCJkYXRhOlwiLCBcImJsb2I6XCJdLCAvLyBBbGxvdyBkYXRhIFVSTHMgYW5kIGJsb2JzIGZvciBRUiBjb2Rlc1xuICAgICAgY29ubmVjdFNyYzogW1wiJ3NlbGYnXCJdLFxuICAgICAgZm9udFNyYzogW1wiJ3NlbGYnXCJdLFxuICAgICAgb2JqZWN0U3JjOiBbXCInbm9uZSdcIl0sXG4gICAgICBtZWRpYVNyYzogW1wiJ3NlbGYnXCJdLFxuICAgICAgZnJhbWVTcmM6IFtcIidub25lJ1wiXSxcbiAgICB9LFxuICB9LFxuICBjcm9zc09yaWdpbkVtYmVkZGVyUG9saWN5OiBmYWxzZSxcbiAgY3Jvc3NPcmlnaW5SZXNvdXJjZVBvbGljeTogeyBwb2xpY3k6IFwiY3Jvc3Mtb3JpZ2luXCIgfSxcbiAgaHN0czoge1xuICAgIG1heEFnZTogMzE1MzYwMDAsXG4gICAgaW5jbHVkZVN1YkRvbWFpbnM6IHRydWUsXG4gICAgcHJlbG9hZDogdHJ1ZVxuICB9XG59KSk7XG5cbi8vIEFwcGx5IHJhdGUgbGltaXRpbmcgYW5kIGF1dGhlbnRpY2F0aW9uIHRvIGFsbCBraW9zayByb3V0ZXNcbnJvdXRlci51c2Uoa2lvc2tSYXRlTGltaXQpO1xucm91dGVyLnVzZShraW9za0F1dGgpO1xuXG4vLyBLaW9zayByb3V0ZXMgd2l0aCBwcm9wZXIgYXV0aGVudGljYXRpb24gYW5kIHZhbGlkYXRpb25cbnJvdXRlci5nZXQoJy92ZXJpZnktcXInLCBraW9za0NvbnRyb2xsZXIudmVyaWZ5RW1wbG95ZWVCeVFSKTtcbnJvdXRlci5wb3N0KCcvYXR0ZW5kYW5jZScsIHZhbGlkYXRlQm9keShraW9za0F0dGVuZGFuY2VTY2hlbWEpLCBraW9za0NvbnRyb2xsZXIucmVjb3JkQXR0ZW5kYW5jZSk7XG5yb3V0ZXIuZ2V0KCcvYXR0ZW5kYW5jZS9sYXN0LzplbXBsb3llZUlkJywgdmFsaWRhdGVQYXJhbXMoa2lvc2tQYXJhbXNTY2hlbWEpLCBraW9za0NvbnRyb2xsZXIuZ2V0TGFzdEF0dGVuZGFuY2UpO1xucm91dGVyLmdldCgnL2F0dGVuZGFuY2UvaGlzdG9yeS86ZW1wbG95ZWVJZCcsIHZhbGlkYXRlUGFyYW1zKGtpb3NrUGFyYW1zU2NoZW1hKSwga2lvc2tDb250cm9sbGVyLmdldEF0dGVuZGFuY2VIaXN0b3J5KTtcblxuLy8gVGltZS1iYXNlZCBhdHRlbmRhbmNlIHJvdXRlc1xucm91dGVyLmdldCgnL2F0dGVuZGFuY2UvbmV4dC1zZXNzaW9uLzplbXBsb3llZUlkJywgdmFsaWRhdGVQYXJhbXMoa2lvc2tQYXJhbXNTY2hlbWEpLCBraW9za0NvbnRyb2xsZXIuZ2V0TmV4dEV4cGVjdGVkU2Vzc2lvbik7XG5yb3V0ZXIuZ2V0KCcvYXR0ZW5kYW5jZS90b2RheS1zdW1tYXJ5LzplbXBsb3llZUlkJywgdmFsaWRhdGVQYXJhbXMoa2lvc2tQYXJhbXNTY2hlbWEpLCBraW9za0NvbnRyb2xsZXIuZ2V0VG9kYXlBdHRlbmRhbmNlU3VtbWFyeSk7XG5yb3V0ZXIucG9zdCgnL2F0dGVuZGFuY2UvdGltZS1iYXNlZCcsIHVwbG9hZFNlbGZpZSwgaGFuZGxlTXVsdGVyRXJyb3IsIGtpb3NrQ29udHJvbGxlci5yZWNvcmRUaW1lQmFzZWRBdHRlbmRhbmNlKTtcbnJvdXRlci5wb3N0KCcvYXR0ZW5kYW5jZS92YWxpZGF0ZScsIHZhbGlkYXRlQm9keShraW9za1ZhbGlkYXRlU2NoZW1hKSwga2lvc2tDb250cm9sbGVyLnZhbGlkYXRlQXR0ZW5kYW5jZUFjdGlvbik7XG5cbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7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